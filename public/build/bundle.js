var app=function(){"use strict";function e(){}const t=e=>e;function n(e,t){for(const n in t)e[n]=t[n];return e}function r(e){return e()}function i(){return Object.create(null)}function o(e){e.forEach(r)}function s(e){return"function"==typeof e}function a(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}function c(e,t){const n=e.subscribe(t);return n.unsubscribe?()=>n.unsubscribe():n}function u(e){let t;return c(e,e=>t=e)(),t}function l(e,t,n){e.$$.on_destroy.push(c(t,n))}function h(e,t,r){return e[1]?n({},n(t.$$scope.ctx,e[1](r?r(t):{}))):t.$$scope.ctx}function f(e){return null==e?"":e}const d="undefined"!=typeof window;let p=d?()=>window.performance.now():()=>Date.now(),g=d?e=>requestAnimationFrame(e):e;const m=new Set;let v,y=!1;function b(){m.forEach(e=>{e[0](p())||(m.delete(e),e[1]())}),y=m.size>0,y&&g(b)}function w(e,t){e.appendChild(t)}function x(e,t,n){e.insertBefore(t,n||null)}function _(e){e.parentNode.removeChild(e)}function k(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function $(e){return document.createElement(e)}function A(e){return document.createTextNode(e)}function P(){return A(" ")}function T(){return A("")}function E(e,t,n,r){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n,r)}function S(e,t,n){null==n?e.removeAttribute(t):e.setAttribute(t,n)}function O(e,t){t=""+t,e.data!==t&&(e.data=t)}function D(e,t,n){e.style.setProperty(t,n)}function I(e,t,n){e.classList[n?"add":"remove"](t)}function z(e,t){const n=document.createEvent("CustomEvent");return n.initCustomEvent(e,!1,!1,t),n}let C,M=0,j={};function R(e,t,n,r,i,o,s,a=0){const c=16.666/r;let u="{\n";for(let e=0;e<=1;e+=c){const r=t+(n-t)*o(e);u+=100*e+`%{${s(r,1-r)}}\n`}const l=u+`100% {${s(n,1-n)}}\n}`,h=`__svelte_${function(e){let t=5381,n=e.length;for(;n--;)t=(t<<5)-t^e.charCodeAt(n);return t>>>0}(l)}_${a}`;if(!j[h]){if(!v){const e=$("style");document.head.appendChild(e),v=e.sheet}j[h]=!0,v.insertRule(`@keyframes ${h} ${l}`,v.cssRules.length)}const f=e.style.animation||"";return e.style.animation=`${f?`${f}, `:""}${h} ${r}ms linear ${i}ms 1 both`,M+=1,h}function L(e,t){e.style.animation=(e.style.animation||"").split(", ").filter(t?e=>e.indexOf(t)<0:e=>-1===e.indexOf("__svelte")).join(", "),t&&!--M&&g(()=>{if(M)return;let e=v.cssRules.length;for(;e--;)v.deleteRule(e);j={}})}function N(e){C=e}function F(){if(!C)throw new Error("Function called outside component initialization");return C}function W(e){F().$$.before_update.push(e)}function q(e){F().$$.on_mount.push(e)}function B(){const e=C;return(t,n)=>{const r=e.$$.callbacks[t];if(r){const i=z(t,n);r.slice().forEach(t=>{t.call(e,i)})}}}const K=[],H=[],U=[],Z=[],V=Promise.resolve();let G,Y=!1;function X(e){U.push(e)}function Q(){const e=new Set;do{for(;K.length;){const e=K.shift();N(e),J(e.$$)}for(;H.length;)H.pop()();for(let t=0;t<U.length;t+=1){const n=U[t];e.has(n)||(n(),e.add(n))}U.length=0}while(K.length);for(;Z.length;)Z.pop()();Y=!1}function J(e){e.fragment&&(e.update(e.dirty),o(e.before_update),e.fragment.p(e.dirty,e.ctx),e.dirty=null,e.after_update.forEach(X))}function ee(e,t,n){e.dispatchEvent(z(`${t?"intro":"outro"}${n}`))}const te=new Set;let ne;function re(){ne={r:0,c:[],p:ne}}function ie(){ne.r||o(ne.c),ne=ne.p}function oe(e,t){e&&e.i&&(te.delete(e),e.i(t))}function se(e,t,n,r){if(e&&e.o){if(te.has(e))return;te.add(e),ne.c.push(()=>{te.delete(e),r&&(n&&e.d(1),r())}),e.o(t)}}const ae={duration:0};function ce(n,r,i,a){let c=r(n,i),u=a?0:1,l=null,h=null,f=null;function d(){f&&L(n,f)}function v(e,t){const n=e.b-u;return t*=Math.abs(n),{a:u,b:e.b,d:n,duration:t,start:e.start,end:e.start+t,group:e.group}}function w(r){const{delay:i=0,duration:s=300,easing:a=t,tick:w=e,css:x}=c||ae,_={start:p()+i,b:r};r||(_.group=ne,ne.r+=1),l?h=_:(x&&(d(),f=R(n,u,r,s,i,a,x)),r&&w(0,1),l=v(_,s),X(()=>ee(n,r,"start")),function(e){let t;y||(y=!0,g(b)),new Promise(n=>{m.add(t=[e,n])})}(e=>{if(h&&e>h.start&&(l=v(h,s),h=null,ee(n,l.b,"start"),x&&(d(),f=R(n,u,l.b,l.duration,0,a,c.css))),l)if(e>=l.end)w(u=l.b,1-u),ee(n,l.b,"end"),h||(l.b?d():--l.group.r||o(l.group.c)),l=null;else if(e>=l.start){const t=e-l.start;u=l.a+l.d*a(t/l.duration),w(u,1-u)}return!(!l&&!h)}))}return{run(e){s(c)?(G||(G=Promise.resolve(),G.then(()=>{G=null})),G).then(()=>{c=c(),w(e)}):w(e)},end(){d(),l=h=null}}}const ue="undefined"!=typeof window?window:global;function le(e,t){se(e,1,1,()=>{t.delete(e.key)})}function he(e,t,n){const{fragment:i,on_mount:a,on_destroy:c,after_update:u}=e.$$;i.m(t,n),X(()=>{const t=a.map(r).filter(s);c?c.push(...t):o(t),e.$$.on_mount=[]}),u.forEach(X)}function fe(e,t){e.$$.fragment&&(o(e.$$.on_destroy),e.$$.fragment.d(t),e.$$.on_destroy=e.$$.fragment=null,e.$$.ctx={})}function de(e,t){e.$$.dirty||(K.push(e),Y||(Y=!0,V.then(Q)),e.$$.dirty=i()),e.$$.dirty[t]=!0}function pe(t,n,r,s,a,c){const u=C;N(t);const l=n.props||{},h=t.$$={fragment:null,ctx:null,props:c,update:e,not_equal:a,bound:i(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(u?u.$$.context:[]),callbacks:i(),dirty:null};let f=!1;h.ctx=r?r(t,l,(e,n)=>{h.ctx&&a(h.ctx[e],h.ctx[e]=n)&&(h.bound[e]&&h.bound[e](n),f&&de(t,e))}):l,h.update(),f=!0,o(h.before_update),h.fragment=s(h.ctx),n.target&&(n.hydrate?h.fragment.l(function(e){return Array.from(e.childNodes)}(n.target)):h.fragment.c(),n.intro&&oe(t.$$.fragment),he(t,n.target,n.anchor),Q()),N(u)}class ge{$destroy(){fe(this,1),this.$destroy=e}$on(e,t){const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}$set(){}}const me=[];function ve(t,n=e){let r;const i=[];function o(e){if(a(t,e)&&(t=e,r)){const e=!me.length;for(let e=0;e<i.length;e+=1){const n=i[e];n[1](),me.push(n,t)}if(e){for(let e=0;e<me.length;e+=2)me[e][0](me[e+1]);me.length=0}}}return{set:o,update:function(e){o(e(t))},subscribe:function(s,a=e){const c=[s,a];return i.push(c),1===i.length&&(r=n(o)||e),s(t),()=>{const e=i.indexOf(c);-1!==e&&i.splice(e,1),0===i.length&&(r(),r=null)}}}}var ye=Object.keys,be=Array.isArray,we="undefined"!=typeof self?self:"undefined"!=typeof window?window:global;function xe(e,t){return"object"!=typeof t?e:(ye(t).forEach((function(n){e[n]=t[n]})),e)}var _e=Object.getPrototypeOf,ke={}.hasOwnProperty;function $e(e,t){return ke.call(e,t)}function Ae(e,t){"function"==typeof t&&(t=t(_e(e))),ye(t).forEach((function(n){Te(e,n,t[n])}))}var Pe=Object.defineProperty;function Te(e,t,n,r){Pe(e,t,xe(n&&$e(n,"get")&&"function"==typeof n.get?{get:n.get,set:n.set,configurable:!0}:{value:n,configurable:!0,writable:!0},r))}function Ee(e){return{from:function(t){return e.prototype=Object.create(t.prototype),Te(e.prototype,"constructor",e),{extend:Ae.bind(null,e.prototype)}}}}var Se=Object.getOwnPropertyDescriptor;var Oe=[].slice;function De(e,t,n){return Oe.call(e,t,n)}function Ie(e,t){return t(e)}function ze(e){if(!e)throw new Error("Assertion Failed")}function Ce(e){we.setImmediate?setImmediate(e):setTimeout(e,0)}function Me(e,t){return e.reduce((function(e,n,r){var i=t(n,r);return i&&(e[i[0]]=i[1]),e}),{})}function je(e,t){return function(){try{e.apply(this,arguments)}catch(e){t(e)}}}function Re(e,t,n){try{e.apply(null,n)}catch(e){t&&t(e)}}function Le(e,t){if($e(e,t))return e[t];if(!t)return e;if("string"!=typeof t){for(var n=[],r=0,i=t.length;r<i;++r){var o=Le(e,t[r]);n.push(o)}return n}var s=t.indexOf(".");if(-1!==s){var a=e[t.substr(0,s)];return void 0===a?void 0:Le(a,t.substr(s+1))}}function Ne(e,t,n){if(e&&void 0!==t&&!("isFrozen"in Object&&Object.isFrozen(e)))if("string"!=typeof t&&"length"in t){ze("string"!=typeof n&&"length"in n);for(var r=0,i=t.length;r<i;++r)Ne(e,t[r],n[r])}else{var o=t.indexOf(".");if(-1!==o){var s=t.substr(0,o),a=t.substr(o+1);if(""===a)void 0===n?delete e[s]:e[s]=n;else{var c=e[s];c||(c=e[s]={}),Ne(c,a,n)}}else void 0===n?delete e[t]:e[t]=n}}function Fe(e){var t={};for(var n in e)$e(e,n)&&(t[n]=e[n]);return t}var We=[].concat;function qe(e){return We.apply([],e)}var Be="Boolean,String,Date,RegExp,Blob,File,FileList,ArrayBuffer,DataView,Uint8ClampedArray,ImageData,Map,Set".split(",").concat(qe([8,16,32,64].map((function(e){return["Int","Uint","Float"].map((function(t){return t+e+"Array"}))})))).filter((function(e){return we[e]})).map((function(e){return we[e]}));function Ke(e){if(!e||"object"!=typeof e)return e;var t;if(be(e)){t=[];for(var n=0,r=e.length;n<r;++n)t.push(Ke(e[n]))}else if(Be.indexOf(e.constructor)>=0)t=e;else for(var i in t=e.constructor?Object.create(e.constructor.prototype):{},e)$e(e,i)&&(t[i]=Ke(e[i]));return t}function He(e,t,n,r){return n=n||{},r=r||"",ye(e).forEach((function(i){if($e(t,i)){var o=e[i],s=t[i];"object"==typeof o&&"object"==typeof s&&o&&s&&""+o.constructor==""+s.constructor?He(o,s,n,r+i+"."):o!==s&&(n[r+i]=t[i])}else n[r+i]=void 0})),ye(t).forEach((function(i){$e(e,i)||(n[r+i]=t[i])})),n}var Ue="undefined"!=typeof Symbol&&Symbol.iterator,Ze=Ue?function(e){var t;return null!=e&&(t=e[Ue])&&t.apply(e)}:function(){return null},Ve={};function Ge(e){var t,n,r,i;if(1===arguments.length){if(be(e))return e.slice();if(this===Ve&&"string"==typeof e)return[e];if(i=Ze(e)){for(n=[];!(r=i.next()).done;)n.push(r.value);return n}if(null==e)return[e];if("number"==typeof(t=e.length)){for(n=new Array(t);t--;)n[t]=e[t];return n}return[e]}for(t=arguments.length,n=new Array(t);t--;)n[t]=arguments[t];return n}var Ye="undefined"!=typeof location&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function Xe(e,t){Ye=e,Qe=t}var Qe=function(){return!0},Je=!new Error("").stack;function et(){if(Je)try{throw et.arguments,new Error}catch(e){return e}return new Error}function tt(e,t){var n=e.stack;return n?(t=t||0,0===n.indexOf(e.name)&&(t+=(e.name+e.message).split("\n").length),n.split("\n").slice(t).filter(Qe).map((function(e){return"\n"+e})).join("")):""}var nt=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],rt=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(nt),it={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed"};function ot(e,t){this._e=et(),this.name=e,this.message=t}function st(e,t,n,r){this._e=et(),this.failures=t,this.failedKeys=r,this.successCount=n}function at(e,t){this._e=et(),this.name="BulkError",this.failures=t,this.message=function(e,t){return e+". Errors: "+t.map((function(e){return e.toString()})).filter((function(e,t,n){return n.indexOf(e)===t})).join("\n")}(e,t)}Ee(ot).from(Error).extend({stack:{get:function(){return this._stack||(this._stack=this.name+": "+this.message+tt(this._e,2))}},toString:function(){return this.name+": "+this.message}}),Ee(st).from(ot),Ee(at).from(ot);var ct=rt.reduce((function(e,t){return e[t]=t+"Error",e}),{}),ut=ot,lt=rt.reduce((function(e,t){var n=t+"Error";function r(e,r){this._e=et(),this.name=n,e?"string"==typeof e?(this.message=e,this.inner=r||null):"object"==typeof e&&(this.message=e.name+" "+e.message,this.inner=e):(this.message=it[t]||n,this.inner=null)}return Ee(r).from(ut),e[t]=r,e}),{});lt.Syntax=SyntaxError,lt.Type=TypeError,lt.Range=RangeError;var ht=nt.reduce((function(e,t){return e[t+"Error"]=lt[t],e}),{});var ft=rt.reduce((function(e,t){return-1===["Syntax","Type","Range"].indexOf(t)&&(e[t+"Error"]=lt[t]),e}),{});function dt(){}function pt(e){return e}function gt(e,t){return null==e||e===pt?t:function(n){return t(e(n))}}function mt(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}function vt(e,t){return e===dt?t:function(){var n=e.apply(this,arguments);void 0!==n&&(arguments[0]=n);var r=this.onsuccess,i=this.onerror;this.onsuccess=null,this.onerror=null;var o=t.apply(this,arguments);return r&&(this.onsuccess=this.onsuccess?mt(r,this.onsuccess):r),i&&(this.onerror=this.onerror?mt(i,this.onerror):i),void 0!==o?o:n}}function yt(e,t){return e===dt?t:function(){e.apply(this,arguments);var n=this.onsuccess,r=this.onerror;this.onsuccess=this.onerror=null,t.apply(this,arguments),n&&(this.onsuccess=this.onsuccess?mt(n,this.onsuccess):n),r&&(this.onerror=this.onerror?mt(r,this.onerror):r)}}function bt(e,t){return e===dt?t:function(n){var r=e.apply(this,arguments);xe(n,r);var i=this.onsuccess,o=this.onerror;this.onsuccess=null,this.onerror=null;var s=t.apply(this,arguments);return i&&(this.onsuccess=this.onsuccess?mt(i,this.onsuccess):i),o&&(this.onerror=this.onerror?mt(o,this.onerror):o),void 0===r?void 0===s?void 0:s:xe(r,s)}}function wt(e,t){return e===dt?t:function(){return!1!==t.apply(this,arguments)&&e.apply(this,arguments)}}function xt(e,t){return e===dt?t:function(){var n=e.apply(this,arguments);if(n&&"function"==typeof n.then){for(var r=this,i=arguments.length,o=new Array(i);i--;)o[i]=arguments[i];return n.then((function(){return t.apply(r,o)}))}return t.apply(this,arguments)}}ft.ModifyError=st,ft.DexieError=ot,ft.BulkError=at;var _t={},kt=function(){try{return new Function("let F=async ()=>{},p=F();return [p,Object.getPrototypeOf(p),Promise.resolve(),F.constructor];")()}catch(t){var e=we.Promise;return e?[e.resolve(),e.prototype,e.resolve()]:[]}}(),$t=kt[0],At=kt[1],Pt=kt[2],Tt=At&&At.then,Et=$t&&$t.constructor,St=kt[3],Ot=!!Pt,Dt=!1,It=Pt?function(){Pt.then(en)}:we.setImmediate?setImmediate.bind(null,en):we.MutationObserver?function(){var e=document.createElement("div");new MutationObserver((function(){en(),e=null})).observe(e,{attributes:!0}),e.setAttribute("i","1")}:function(){setTimeout(en,0)},zt=function(e,t){qt.push([e,t]),Mt&&(It(),Mt=!1)},Ct=!0,Mt=!0,jt=[],Rt=[],Lt=null,Nt=pt,Ft={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:$n,pgp:!1,env:{},finalize:function(){this.unhandleds.forEach((function(e){try{$n(e[0],e[1])}catch(e){}}))}},Wt=Ft,qt=[],Bt=0,Kt=[];function Ht(e){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");this._listeners=[],this.onuncatched=dt,this._lib=!1;var t=this._PSD=Wt;if(Ye&&(this._stackHolder=et(),this._prev=null,this._numPrev=0),"function"!=typeof e){if(e!==_t)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(!1===this._state&&Gt(this,this._value))}this._state=null,this._value=null,++t.ref,Vt(this,e)}var Ut={get:function(){var e=Wt,t=hn;function n(n,r){var i=this,o=!e.global&&(e!==Wt||t!==hn);o&&gn();var s=new Ht((function(t,s){Xt(i,new Zt(_n(n,e,o),_n(r,e,o),t,s,e))}));return Ye&&Jt(s,this),s}return n.prototype=_t,n},set:function(e){Te(this,"then",e&&e.prototype===_t?Ut:{get:function(){return e},set:Ut.set})}};function Zt(e,t,n,r,i){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.resolve=n,this.reject=r,this.psd=i}function Vt(e,t){try{t((function(t){if(null===e._state){if(t===e)throw new TypeError("A promise cannot be resolved with itself.");var n=e._lib&&tn();t&&"function"==typeof t.then?Vt(e,(function(e,n){t instanceof Ht?t._then(e,n):t.then(e,n)})):(e._state=!0,e._value=t,Yt(e)),n&&nn()}}),Gt.bind(null,e))}catch(t){Gt(e,t)}}function Gt(e,t){if(Rt.push(t),null===e._state){var n=e._lib&&tn();t=Nt(t),e._state=!1,e._value=t,Ye&&null!==t&&"object"==typeof t&&!t._promise&&Re((function(){var n=function e(t,n){var r;return Se(t,n)||(r=_e(t))&&e(r,n)}(t,"stack");t._promise=e,Te(t,"stack",{get:function(){return Dt?n&&(n.get?n.get.apply(t):n.value):e.stack}})})),function(e){jt.some((function(t){return t._value===e._value}))||jt.push(e)}(e),Yt(e),n&&nn()}}function Yt(e){var t=e._listeners;e._listeners=[];for(var n=0,r=t.length;n<r;++n)Xt(e,t[n]);var i=e._PSD;--i.ref||i.finalize(),0===Bt&&(++Bt,zt((function(){0==--Bt&&rn()}),[]))}function Xt(e,t){if(null!==e._state){var n=e._state?t.onFulfilled:t.onRejected;if(null===n)return(e._state?t.resolve:t.reject)(e._value);++t.psd.ref,++Bt,zt(Qt,[n,e,t])}else e._listeners.push(t)}function Qt(e,t,n){try{Lt=t;var r,i=t._value;t._state?r=e(i):(Rt.length&&(Rt=[]),r=e(i),-1===Rt.indexOf(i)&&function(e){var t=jt.length;for(;t;)if(jt[--t]._value===e._value)return void jt.splice(t,1)}(t)),n.resolve(r)}catch(e){n.reject(e)}finally{Lt=null,0==--Bt&&rn(),--n.psd.ref||n.psd.finalize()}}function Jt(e,t){var n=t?t._numPrev+1:0;n<100&&(e._prev=t,e._numPrev=n)}function en(){tn()&&nn()}function tn(){var e=Ct;return Ct=!1,Mt=!1,e}function nn(){var e,t,n;do{for(;qt.length>0;)for(e=qt,qt=[],n=e.length,t=0;t<n;++t){var r=e[t];r[0].apply(null,r[1])}}while(qt.length>0);Ct=!0,Mt=!0}function rn(){var e=jt;jt=[],e.forEach((function(e){e._PSD.onunhandled.call(null,e._value,e)}));for(var t=Kt.slice(0),n=t.length;n;)t[--n]()}function on(e){return new Ht(_t,!1,e)}function sn(e,t){var n=Wt;return function(){var r=tn(),i=Wt;try{return bn(n,!0),e.apply(this,arguments)}catch(e){t&&t(e)}finally{bn(i,!1),r&&nn()}}}Ae(Ht.prototype,{then:Ut,_then:function(e,t){Xt(this,new Zt(null,null,e,t,Wt))},catch:function(e){if(1===arguments.length)return this.then(null,e);var t=arguments[0],n=arguments[1];return"function"==typeof t?this.then(null,(function(e){return e instanceof t?n(e):on(e)})):this.then(null,(function(e){return e&&e.name===t?n(e):on(e)}))},finally:function(e){return this.then((function(t){return e(),t}),(function(t){return e(),on(t)}))},stack:{get:function(){if(this._stack)return this._stack;try{Dt=!0;var e=function e(t,n,r){if(n.length===r)return n;var i="";if(!1===t._state){var o,s,a=t._value;null!=a?(o=a.name||"Error",s=a.message||a,i=tt(a,0)):(o=a,s=""),n.push(o+(s?": "+s:"")+i)}Ye&&((i=tt(t._stackHolder,2))&&-1===n.indexOf(i)&&n.push(i),t._prev&&e(t._prev,n,r));return n}(this,[],20).join("\nFrom previous: ");return null!==this._state&&(this._stack=e),e}finally{Dt=!1}}},timeout:function(e,t){var n=this;return e<1/0?new Ht((function(r,i){var o=setTimeout((function(){return i(new lt.Timeout(t))}),e);n.then(r,i).finally(clearTimeout.bind(null,o))})):this}}),"undefined"!=typeof Symbol&&Symbol.toStringTag&&Te(Ht.prototype,Symbol.toStringTag,"Promise"),Ft.env=wn(),Ae(Ht,{all:function(){var e=Ge.apply(null,arguments).map(mn);return new Ht((function(t,n){0===e.length&&t([]);var r=e.length;e.forEach((function(i,o){return Ht.resolve(i).then((function(n){e[o]=n,--r||t(e)}),n)}))}))},resolve:function(e){if(e instanceof Ht)return e;if(e&&"function"==typeof e.then)return new Ht((function(t,n){e.then(t,n)}));var t=new Ht(_t,!0,e);return Jt(t,Lt),t},reject:on,race:function(){var e=Ge.apply(null,arguments).map(mn);return new Ht((function(t,n){e.map((function(e){return Ht.resolve(e).then(t,n)}))}))},PSD:{get:function(){return Wt},set:function(e){return Wt=e}},newPSD:dn,usePSD:xn,scheduler:{get:function(){return zt},set:function(e){zt=e}},rejectionMapper:{get:function(){return Nt},set:function(e){Nt=e}},follow:function(e,t){return new Ht((function(n,r){return dn((function(t,n){var r=Wt;r.unhandleds=[],r.onunhandled=n,r.finalize=mt((function(){var e=this;!function(e){Kt.push((function t(){e(),Kt.splice(Kt.indexOf(t),1)})),++Bt,zt((function(){0==--Bt&&rn()}),[])}((function(){0===e.unhandleds.length?t():n(e.unhandleds[0])}))}),r.finalize),e()}),t,n,r)}))}});var an={awaits:0,echoes:0,id:0},cn=0,un=[],ln=0,hn=0,fn=0;function dn(e,t,n,r){var i=Wt,o=Object.create(i);o.parent=i,o.ref=0,o.global=!1,o.id=++fn;var s=Ft.env;o.env=Ot?{Promise:Ht,PromiseProp:{value:Ht,configurable:!0,writable:!0},all:Ht.all,race:Ht.race,resolve:Ht.resolve,reject:Ht.reject,nthen:kn(s.nthen,o),gthen:kn(s.gthen,o)}:{},t&&xe(o,t),++i.ref,o.finalize=function(){--this.parent.ref||this.parent.finalize()};var a=xn(o,e,n,r);return 0===o.ref&&o.finalize(),a}function pn(){return an.id||(an.id=++cn),++an.awaits,an.echoes+=7,an.id}function gn(e){!an.awaits||e&&e!==an.id||(0==--an.awaits&&(an.id=0),an.echoes=7*an.awaits)}function mn(e){return an.echoes&&e&&e.constructor===Et?(pn(),e.then((function(e){return gn(),e}),(function(e){return gn(),An(e)}))):e}function vn(e){++hn,an.echoes&&0!=--an.echoes||(an.echoes=an.id=0),un.push(Wt),bn(e,!0)}function yn(){var e=un[un.length-1];un.pop(),bn(e,!1)}function bn(e,t){var n,r=Wt;if((t?!an.echoes||ln++&&e===Wt:!ln||--ln&&e===Wt)||(n=t?vn.bind(null,e):yn,Tt.call($t,n)),e!==Wt&&(Wt=e,r===Ft&&(Ft.env=wn()),Ot)){var i=Ft.env.Promise,o=e.env;At.then=o.nthen,i.prototype.then=o.gthen,(r.global||e.global)&&(Object.defineProperty(we,"Promise",o.PromiseProp),i.all=o.all,i.race=o.race,i.resolve=o.resolve,i.reject=o.reject)}}function wn(){var e=we.Promise;return Ot?{Promise:e,PromiseProp:Object.getOwnPropertyDescriptor(we,"Promise"),all:e.all,race:e.race,resolve:e.resolve,reject:e.reject,nthen:At.then,gthen:e.prototype.then}:{}}function xn(e,t,n,r,i){var o=Wt;try{return bn(e,!0),t(n,r,i)}finally{bn(o,!1)}}function _n(e,t,n){return"function"!=typeof e?e:function(){var r=Wt;n&&pn(),bn(t,!0);try{return e.apply(this,arguments)}finally{bn(r,!1)}}}function kn(e,t){return function(n,r){return e.call(this,_n(n,t,!1),_n(r,t,!1))}}function $n(e,t){var n;try{n=t.onuncatched(e)}catch(e){}if(!1!==n)try{var r,i={promise:t,reason:e};if(we.document&&document.createEvent?((r=document.createEvent("Event")).initEvent("unhandledrejection",!0,!0),xe(r,i)):we.CustomEvent&&xe(r=new CustomEvent("unhandledrejection",{detail:i}),i),r&&we.dispatchEvent&&(dispatchEvent(r),!we.PromiseRejectionEvent&&we.onunhandledrejection))try{we.onunhandledrejection(r)}catch(e){}r.defaultPrevented||console.warn("Unhandled rejection: "+(e.stack||e))}catch(e){}}var An=Ht.reject;function Pn(e){var t={},n=function(n,r){if(r){for(var i=arguments.length,o=new Array(i-1);--i;)o[i-1]=arguments[i];return t[n].subscribe.apply(null,o),e}if("string"==typeof n)return t[n]};n.addEventType=o;for(var r=1,i=arguments.length;r<i;++r)o(arguments[r]);return n;function o(e,r,i){if("object"==typeof e)return s(e);r||(r=wt),i||(i=dt);var o={subscribers:[],fire:i,subscribe:function(e){-1===o.subscribers.indexOf(e)&&(o.subscribers.push(e),o.fire=r(o.fire,e))},unsubscribe:function(e){o.subscribers=o.subscribers.filter((function(t){return t!==e})),o.fire=o.subscribers.reduce(r,i)}};return t[e]=n[e]=o,o}function s(e){ye(e).forEach((function(t){var n=e[t];if(be(n))o(t,e[t][0],e[t][1]);else{if("asap"!==n)throw new lt.InvalidArgument("Invalid event config");var r=o(t,pt,(function(){for(var e=arguments.length,t=new Array(e);e--;)t[e]=arguments[e];r.subscribers.forEach((function(e){Ce((function(){e.apply(null,t)}))}))}))}}))}}var Tn,En=String.fromCharCode(65535),Sn=function(){try{return IDBKeyRange.only([[]]),[[]]}catch(e){return En}}(),On="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",Dn=[],In="undefined"!=typeof navigator&&/(MSIE|Trident|Edge)/.test(navigator.userAgent),zn=In,Cn=In,Mn=function(e){return!/(dexie\.js|dexie\.min\.js)/.test(e)};function jn(e,t){var n,r,i,o,s,a=jn.dependencies,c=xe({addons:jn.addons,autoOpen:!0,indexedDB:a.indexedDB,IDBKeyRange:a.IDBKeyRange},t),u=c.addons,l=c.autoOpen,h=c.indexedDB,f=c.IDBKeyRange,d=this._dbSchema={},p=[],g=[],m={},v=null,y=null,b=!1,w=null,x=!1,_="readwrite",k=this,$=new Ht((function(e){n=e})),A=new Ht((function(e,t){r=t})),P=!0,T=!!Zn(h);function E(e){this._cfg={version:e,storesSource:null,dbschema:{},tables:{},contentUpgrade:null},this.stores({})}function S(e,t,n){var r=k._createTransaction(_,g,d);r.create(t),r._completion.catch(n);var i=r._reject.bind(r);dn((function(){Wt.trans=r,0===e?(ye(d).forEach((function(e){O(t,e,d[e].primKey,d[e].indexes)})),Ht.follow((function(){return k.on.populate.fire(r)})).catch(i)):function(e,t,n){var r=[],i=p.filter((function(t){return t._cfg.version===e}))[0];if(!i)throw new lt.Upgrade("Dexie specification of currently installed DB version is missing");d=k._dbSchema=i._cfg.dbschema;var o=!1;function s(){return r.length?Ht.resolve(r.shift()(t.idbtrans)).then(s):Ht.resolve()}return p.filter((function(t){return t._cfg.version>e})).forEach((function(e){r.push((function(){var r=d,i=e._cfg.dbschema;Y(r,n),Y(i,n),d=k._dbSchema=i;var s=function(e,t){var n={del:[],add:[],change:[]};for(var r in e)t[r]||n.del.push(r);for(r in t){var i=e[r],o=t[r];if(i){var s={name:r,def:o,recreate:!1,del:[],add:[],change:[]};if(i.primKey.src!==o.primKey.src)s.recreate=!0,n.change.push(s);else{var a=i.idxByName,c=o.idxByName;for(var u in a)c[u]||s.del.push(u);for(u in c){var l=a[u],h=c[u];l?l.src!==h.src&&s.change.push(h):s.add.push(h)}(s.del.length>0||s.add.length>0||s.change.length>0)&&n.change.push(s)}}else n.add.push([r,o])}return n}(r,i);if(s.add.forEach((function(e){O(n,e[0],e[1].primKey,e[1].indexes)})),s.change.forEach((function(e){if(e.recreate)throw new lt.Upgrade("Not yet support for changing primary key");var t=n.objectStore(e.name);e.add.forEach((function(e){D(t,e)})),e.change.forEach((function(e){t.deleteIndex(e.name),D(t,e)})),e.del.forEach((function(e){t.deleteIndex(e)}))})),e._cfg.contentUpgrade)return o=!0,Ht.follow((function(){e._cfg.contentUpgrade(t)}))})),r.push((function(t){o&&zn||function(e,t){for(var n=0;n<t.db.objectStoreNames.length;++n){var r=t.db.objectStoreNames[n];null==e[r]&&t.db.deleteObjectStore(r)}}(e._cfg.dbschema,t)}))})),s().then((function(){!function(e,t){ye(e).forEach((function(n){t.db.objectStoreNames.contains(n)||O(t,n,e[n].primKey,e[n].indexes)}))}(d,n)}))}(e,r,t).catch(i)}))}function O(e,t,n,r){var i=e.db.createObjectStore(t,n.keyPath?{keyPath:n.keyPath,autoIncrement:n.auto}:{autoIncrement:n.auto});return r.forEach((function(e){D(i,e)})),i}function D(e,t){e.createIndex(t.name,t.keyPath,{unique:t.unique,multiEntry:t.multi})}function I(e,t,n){var r=arguments.length;if(r<2)throw new lt.InvalidArgument("Too few arguments");for(var i=new Array(r-1);--r;)i[r-1]=arguments[r];n=i.pop();var o=qe(i);return[e,o,n]}function z(e,t,n){this.name=e,this.schema=t,this._tx=n,this.hook=m[e]?m[e].hook:Pn(null,{creating:[vt,dt],reading:[gt,pt],updating:[bt,dt],deleting:[yt,dt]})}function C(e,t,n){return(n?Wn:Nn)((function(n){e.push(n),t&&t()}))}function M(e,t,n,r,i){return new Ht((function(o,s){var a=n.length,c=a-1;if(0===a)return o();if(r){var u,l=Wn(s),h=Ln(null);Re((function(){for(var r=0;r<a;++r){u={onsuccess:null,onerror:null};var s=n[r];i.call(u,s[0],s[1],t);var f=e.delete(s[0]);f._hookCtx=u,f.onerror=l,f.onsuccess=r===c?Ln(o):h}}),(function(e){throw u.onerror&&u.onerror(e),e}))}else for(var f=0;f<a;++f){var d=e.delete(n[f]);d.onerror=Nn(s),f===c&&(d.onsuccess=sn((function(){return o()})))}}))}function j(e,t,n,r){var i=this;this.db=k,this.mode=e,this.storeNames=t,this.idbtrans=null,this.on=Pn(this,"complete","error","abort"),this.parent=r||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new Ht((function(e,t){i._resolve=e,i._reject=t})),this._completion.then((function(){i.active=!1,i.on.complete.fire()}),(function(e){var t=i.active;return i.active=!1,i.on.error.fire(e),i.parent?i.parent._reject(e):t&&i.idbtrans&&i.idbtrans.abort(),An(e)}))}function R(e,t,n){this._ctx={table:e,index:":id"===t?null:t,or:n}}function L(e,t){var n=null,r=null;if(t)try{n=t()}catch(e){r=e}var i=e._ctx,o=i.table;this._ctx={table:o,index:i.index,isPrimKey:!i.index||o.schema.primKey.keyPath&&i.index===o.schema.primKey.name,range:n,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:r,or:i.or,valueMapper:o.hook.reading.fire}}function N(e,t){return!(e.filter||e.algorithm||e.or)&&(t?e.justLimit:!e.replayFilter)}function F(e,t){return e._cfg.version-t._cfg.version}function W(e,t,n){t.forEach((function(t){var r=n[t];e.forEach((function(e){t in e||(e===j.prototype||e instanceof j?Te(e,t,{get:function(){return this.table(t)}}):e[t]=new z(t,r))}))}))}function q(e,t,n,r,i,o){var s=sn(o?function(e,t,r){return n(o(e),t,r)}:n,i);e.onerror||(e.onerror=Nn(i)),e.onsuccess=je(t?function(){var n=e.result;if(n){var o=function(){n.continue()};t(n,(function(e){o=e}),r,i)&&s(n.value,n,(function(e){o=e})),o()}else r()}:function(){var t=e.result;if(t){var n=function(){t.continue()};s(t.value,t,(function(e){n=e})),n()}else r()},i)}function B(e,t){return h.cmp(e,t)}function K(e,t){return B(e,t)>0?e:t}function H(e,t){return h.cmp(e,t)}function U(e,t){return h.cmp(t,e)}function Z(e,t){return e<t?-1:e===t?0:1}function V(e,t){return e>t?-1:e===t?0:1}function G(e,t){return e?t?function(){return e.apply(this,arguments)&&t.apply(this,arguments)}:e:t}function Y(e,t){for(var n=t.db.objectStoreNames,r=0;r<n.length;++r){var o=n[r],s=t.objectStore(o);i="getAll"in s;for(var a=0;a<s.indexNames.length;++a){var c=s.indexNames[a],u=s.index(c).keyPath,l="string"==typeof u?u:"["+De(u).join("+")+"]";if(e[o]){var h=e[o].idxByName[l];h&&(h.name=c)}}}/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&we.WorkerGlobalScope&&we instanceof we.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(i=!1)}function X(e){k.on("blocked").fire(e),Dn.filter((function(e){return e.name===k.name&&e!==k&&!e._vcFired})).map((function(t){return t.on("versionchange").fire(e)}))}this.version=function(e){if(v||b)throw new lt.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,e);var t=p.filter((function(t){return t._cfg.version===e}))[0];return t||(t=new E(e),p.push(t),p.sort(F),P=!1,t)},xe(E.prototype,{stores:function(e){this._cfg.storesSource=this._cfg.storesSource?xe(this._cfg.storesSource,e):e;var t={};p.forEach((function(e){xe(t,e._cfg.storesSource)}));var n=this._cfg.dbschema={};return this._parseStoresSpec(t,n),d=k._dbSchema=n,[m,k,j.prototype].forEach((function(e){for(var t in e)e[t]instanceof z&&delete e[t]})),W([m,k,j.prototype,this._cfg.tables],ye(n),n),g=ye(n),this},upgrade:function(e){return this._cfg.contentUpgrade=e,this},_parseStoresSpec:function(e,t){ye(e).forEach((function(n){if(null!==e[n]){var r={},i=function(e){var t=[];return e.split(",").forEach((function(e){var n=(e=e.trim()).replace(/([&*]|\+\+)/g,""),r=/^\[/.test(n)?n.match(/^\[(.*)\]$/)[1].split("+"):n;t.push(new Kn(n,r||null,/\&/.test(e),/\*/.test(e),/\+\+/.test(e),be(r),/\./.test(e)))})),t}(e[n]),o=i.shift();if(o.multi)throw new lt.Schema("Primary key cannot be multi-valued");o.keyPath&&Ne(r,o.keyPath,o.auto?0:o.keyPath),i.forEach((function(e){if(e.auto)throw new lt.Schema("Only primary key can be marked as autoIncrement (++)");if(!e.keyPath)throw new lt.Schema("Index must have a name and cannot be an empty string");Ne(r,e.keyPath,e.compound?e.keyPath.map((function(){return""})):"")})),t[n]=new Hn(n,o,i,r)}}))}}),this._allTables=m,this._createTransaction=function(e,t,n,r){return new j(e,t,n,r)},this._whenReady=function(e){return x||Wt.letThrough?e():new Ht((function(e,t){if(!b){if(!l)return void t(new lt.DatabaseClosed);k.open().catch(dt)}$.then(e,t)})).then(e)},this.verno=0,this.open=function(){if(b||v)return $.then((function(){return y?An(y):k}));Ye&&(A._stackHolder=et()),b=!0,y=null,x=!1;var t=n,r=null;return Ht.race([A,new Ht((function(t,n){if(!h)throw new lt.MissingAPI("indexedDB API not found. If using IE10+, make sure to run your code on a server URL (not locally). If using old Safari versions, make sure to include indexedDB polyfill.");var i=P?h.open(e):h.open(e,Math.round(10*k.verno));if(!i)throw new lt.MissingAPI("IndexedDB API not available");i.onerror=Nn(n),i.onblocked=sn(X),i.onupgradeneeded=sn((function(t){if(r=i.transaction,P&&!k._allowEmptyDB){i.onerror=qn,r.abort(),i.result.close();var o=h.deleteDatabase(e);o.onsuccess=o.onerror=sn((function(){n(new lt.NoSuchDatabase("Database "+e+" doesnt exist"))}))}else{r.onerror=Nn(n),S((t.oldVersion>Math.pow(2,62)?0:t.oldVersion)/10,r,n)}}),n),i.onsuccess=sn((function(){if(r=null,v=i.result,Dn.push(k),P)!function(){if(k.verno=v.version/10,k._dbSchema=d={},0===(g=De(v.objectStoreNames,0)).length)return;var e=v.transaction(Un(g),"readonly");g.forEach((function(t){for(var n=e.objectStore(t),r=n.keyPath,i=r&&"string"==typeof r&&-1!==r.indexOf("."),o=new Kn(r,r||"",!1,!1,!!n.autoIncrement,r&&"string"!=typeof r,i),s=[],a=0;a<n.indexNames.length;++a){var c=n.index(n.indexNames[a]);i=(r=c.keyPath)&&"string"==typeof r&&-1!==r.indexOf(".");var u=new Kn(c.name,r,!!c.unique,!!c.multiEntry,!1,r&&"string"!=typeof r,i);s.push(u)}d[t]=new Hn(t,o,s,{})})),W([m],ye(d),d)}();else if(v.objectStoreNames.length>0)try{Y(d,v.transaction(Un(v.objectStoreNames),"readonly"))}catch(e){}v.onversionchange=sn((function(e){k._vcFired=!0,k.on("versionchange").fire(e)})),T||"__dbnames"===e||Tn.dbnames.put({name:e}).catch(dt),t()}),n)}))]).then((function(){return w=[],Ht.resolve(jn.vip(k.on.ready.fire)).then((function e(){if(w.length>0){var t=w.reduce(xt,dt);return w=[],Ht.resolve(jn.vip(t)).then(e)}}))})).finally((function(){w=null})).then((function(){return b=!1,k})).catch((function(e){try{r&&r.abort()}catch(e){}return b=!1,k.close(),An(y=e)})).finally((function(){x=!0,t()}))},this.close=function(){var e=Dn.indexOf(k);if(e>=0&&Dn.splice(e,1),v){try{v.close()}catch(e){}v=null}l=!1,y=new lt.DatabaseClosed,b&&r(y),$=new Ht((function(e){n=e})),A=new Ht((function(e,t){r=t}))},this.delete=function(){var t=arguments.length>0;return new Ht((function(n,r){if(t)throw new lt.InvalidArgument("Arguments not allowed in db.delete()");function i(){k.close();var t=h.deleteDatabase(e);t.onsuccess=sn((function(){T||Tn.dbnames.delete(e).catch(dt),n()})),t.onerror=Nn(r),t.onblocked=X}b?$.then(i):i()}))},this.backendDB=function(){return v},this.isOpen=function(){return null!==v},this.hasBeenClosed=function(){return y&&y instanceof lt.DatabaseClosed},this.hasFailed=function(){return null!==y},this.dynamicallyOpened=function(){return P},this.name=e,Ae(this,{tables:{get:function(){return ye(m).map((function(e){return m[e]}))}}}),this.on=Pn(this,"populate","blocked","versionchange",{ready:[xt,dt]}),this.on.ready.subscribe=Ie(this.on.ready.subscribe,(function(e){return function(t,n){jn.vip((function(){x?(y||Ht.resolve().then(t),n&&e(t)):w?(w.push(t),n&&e(t)):(e(t),n||e((function e(){k.on.ready.unsubscribe(t),k.on.ready.unsubscribe(e)})))}))}})),this.transaction=function(){var e=I.apply(this,arguments);return this._transaction.apply(this,e)},this._transaction=function(e,t,n){var r=Wt.trans;r&&r.db===k&&-1===e.indexOf("!")||(r=null);var i=-1!==e.indexOf("?");e=e.replace("!","").replace("?","");try{var o=t.map((function(e){var t=e instanceof z?e.name:e;if("string"!=typeof t)throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return t}));if("r"==e||"readonly"==e)e="readonly";else{if("rw"!=e&&e!=_)throw new lt.InvalidArgument("Invalid transaction mode: "+e);e=_}if(r){if("readonly"===r.mode&&e===_){if(!i)throw new lt.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");r=null}r&&o.forEach((function(e){if(r&&-1===r.storeNames.indexOf(e)){if(!i)throw new lt.SubTransaction("Table "+e+" not included in parent transaction.");r=null}})),i&&r&&!r.active&&(r=null)}}catch(e){return r?r._promise(null,(function(t,n){n(e)})):An(e)}return r?r._promise(e,s,"lock"):Wt.trans?xn(Wt.transless,(function(){return k._whenReady(s)})):k._whenReady(s);function s(){return Ht.resolve().then((function(){var t,i=Wt.transless||Wt,s=k._createTransaction(e,o,d,r),a={trans:s,transless:i};r?s.idbtrans=r.idbtrans:s.create(),n.constructor===St&&pn();var c=Ht.follow((function(){if(t=n.call(s,s))if(t.constructor===Et){var e=gn.bind(null,null);t.then(e,e)}else"function"==typeof t.next&&"function"==typeof t.throw&&(t=Bn(t))}),a);return(t&&"function"==typeof t.then?Ht.resolve(t).then((function(e){return s.active?e:An(new lt.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))})):c.then((function(){return t}))).then((function(e){return r&&s._resolve(),s._completion.then((function(){return e}))})).catch((function(e){return s._reject(e),An(e)}))}))}},this.table=function(e){if(!$e(m,e))throw new lt.InvalidTable("Table "+e+" does not exist");return m[e]},Ae(z.prototype,{_trans:function(e,t,n){var r=this._tx||Wt.trans;return r&&r.db===k?r===Wt.trans?r._promise(e,t,n):dn((function(){return r._promise(e,t,n)}),{trans:r,transless:Wt.transless||Wt}):function e(t,n,r){if(x||Wt.letThrough){var i=k._createTransaction(t,n,d);try{i.create()}catch(e){return An(e)}return i._promise(t,(function(e,t){return dn((function(){return Wt.trans=i,r(e,t,i)}))})).then((function(e){return i._completion.then((function(){return e}))}))}if(!b){if(!l)return An(new lt.DatabaseClosed);k.open().catch(dt)}return $.then((function(){return e(t,n,r)}))}(e,[this.name],t)},_idbstore:function(e,t,n){var r=this.name;return this._trans(e,(function(e,n,i){if(-1===i.storeNames.indexOf(r))throw new lt.NotFound("Table"+r+" not part of transaction");return t(e,n,i.idbtrans.objectStore(r),i)}),n)},get:function(e,t){if(e&&e.constructor===Object)return this.where(e).first(t);var n=this;return this._idbstore("readonly",(function(t,r,i){var o=i.get(e);o.onerror=Nn(r),o.onsuccess=sn((function(){t(n.hook.reading.fire(o.result))}),r)})).then(t)},where:function(e){if("string"==typeof e)return new R(this,e);if(be(e))return new R(this,"["+e.join("+")+"]");var t=ye(e);if(1===t.length)return this.where(t[0]).equals(e[t[0]]);var n=this.schema.indexes.concat(this.schema.primKey).filter((function(e){return e.compound&&t.every((function(t){return e.keyPath.indexOf(t)>=0}))&&e.keyPath.every((function(e){return t.indexOf(e)>=0}))}))[0];if(n&&Sn!==En)return this.where(n.name).equals(n.keyPath.map((function(t){return e[t]})));n||console.warn("The query "+JSON.stringify(e)+" on "+this.name+" would benefit of a compound index ["+t.join("+")+"]");var r=this.schema.idxByName,i=t.reduce((function(t,n){return[t[0]||r[n],t[0]||!r[n]?G(t[1],(function(t){return""+Le(t,n)==""+e[n]})):t[1]]}),[null,null]),o=i[0];return o?this.where(o.name).equals(e[o.keyPath]).filter(i[1]):n?this.filter(i[1]):this.where(t).equals("")},count:function(e){return this.toCollection().count(e)},offset:function(e){return this.toCollection().offset(e)},limit:function(e){return this.toCollection().limit(e)},reverse:function(){return this.toCollection().reverse()},filter:function(e){return this.toCollection().and(e)},each:function(e){return this.toCollection().each(e)},toArray:function(e){return this.toCollection().toArray(e)},orderBy:function(e){return new L(new R(this,be(e)?"["+e.join("+")+"]":e))},toCollection:function(){return new L(new R(this))},mapToClass:function(e,t){this.schema.mappedClass=e;var n=Object.create(e.prototype);t&&Rn(n,t),this.schema.instanceTemplate=n;var r=function(t){if(!t)return t;var n=Object.create(e.prototype);for(var r in t)if($e(t,r))try{n[r]=t[r]}catch(e){}return n};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=r,this.hook("reading",r),e},defineClass:function(e){return this.mapToClass(jn.defineClass(e),e)},bulkDelete:function(e){return this.hook.deleting.fire===dt?this._idbstore(_,(function(t,n,r,i){t(M(r,i,e,!1,dt))})):this.where(":id").anyOf(e).delete().then((function(){}))},bulkPut:function(e,t){var n=this;return this._idbstore(_,(function(r,i,o){if(!o.keyPath&&!n.schema.primKey.auto&&!t)throw new lt.InvalidArgument("bulkPut() with non-inbound keys requires keys array in second argument");if(o.keyPath&&t)throw new lt.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(t&&t.length!==e.length)throw new lt.InvalidArgument("Arguments objects and keys must have the same length");if(0===e.length)return r();var s,a,c=function(e){0===u.length?r(e):i(new at(n.name+".bulkPut(): "+u.length+" of "+l+" operations failed",u))},u=[],l=e.length,h=n;if(n.hook.creating.fire===dt&&n.hook.updating.fire===dt){a=C(u);for(var f=0,d=e.length;f<d;++f)(s=t?o.put(e[f],t[f]):o.put(e[f])).onerror=a;s.onerror=C(u,c),s.onsuccess=Fn(c)}else{var p=t||o.keyPath&&e.map((function(e){return Le(e,o.keyPath)})),g=p&&Me(p,(function(t,n){return null!=t&&[t,e[n]]}));(p?h.where(":id").anyOf(p.filter((function(e){return null!=e}))).modify((function(){this.value=g[this.primKey],g[this.primKey]=null})).catch(st,(function(e){u=e.failures})).then((function(){for(var n=[],r=t&&[],i=p.length-1;i>=0;--i){var o=p[i];(null==o||g[o])&&(n.push(e[i]),t&&r.push(o),null!=o&&(g[o]=null))}return n.reverse(),t&&r.reverse(),h.bulkAdd(n,r)})).then((function(e){var t=p[p.length-1];return null!=t?t:e})):h.bulkAdd(e)).then(c).catch(at,(function(e){u=u.concat(e.failures),c()})).catch(i)}}),"locked")},bulkAdd:function(e,t){var n=this,r=this.hook.creating.fire;return this._idbstore(_,(function(i,o,s,a){if(!s.keyPath&&!n.schema.primKey.auto&&!t)throw new lt.InvalidArgument("bulkAdd() with non-inbound keys requires keys array in second argument");if(s.keyPath&&t)throw new lt.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(t&&t.length!==e.length)throw new lt.InvalidArgument("Arguments objects and keys must have the same length");if(0===e.length)return i();function c(e){0===f.length?i(e):o(new at(n.name+".bulkAdd(): "+f.length+" of "+d+" operations failed",f))}var u,l,h,f=[],d=e.length;if(r!==dt){var p,g=s.keyPath;l=C(f,null,!0),h=Ln(null),Re((function(){for(var n=0,i=e.length;n<i;++n){p={onerror:null,onsuccess:null};var o=t&&t[n],c=e[n],f=t?o:g?Le(c,g):void 0,d=r.call(p,f,c,a);null==f&&null!=d&&(g?Ne(c=Ke(c),g,d):o=d),(u=null!=o?s.add(c,o):s.add(c))._hookCtx=p,n<i-1&&(u.onerror=l,p.onsuccess&&(u.onsuccess=h))}}),(function(e){throw p.onerror&&p.onerror(e),e})),u.onerror=C(f,c,!0),u.onsuccess=Ln(c)}else{l=C(f);for(var m=0,v=e.length;m<v;++m)(u=t?s.add(e[m],t[m]):s.add(e[m])).onerror=l;u.onerror=C(f,c),u.onsuccess=Fn(c)}}))},add:function(e,t){var n=this.hook.creating.fire;return this._idbstore(_,(function(r,i,o,s){var a={onsuccess:null,onerror:null};if(n!==dt){var c=null!=t?t:o.keyPath?Le(e,o.keyPath):void 0,u=n.call(a,c,e,s);null==c&&null!=u&&(o.keyPath?Ne(e,o.keyPath,u):t=u)}try{var l=null!=t?o.add(e,t):o.add(e);l._hookCtx=a,l.onerror=Wn(i),l.onsuccess=Ln((function(t){var n=o.keyPath;n&&Ne(e,n,t),r(t)}))}catch(e){throw a.onerror&&a.onerror(e),e}}))},put:function(e,t){var n=this,r=this.hook.creating.fire,i=this.hook.updating.fire;if(r!==dt||i!==dt){var o=this.schema.primKey.keyPath,s=void 0!==t?t:o&&Le(e,o);return null==s?this.add(e):(e=Ke(e),this._trans(_,(function(){return n.where(":id").equals(s).modify((function(){this.value=e})).then((function(r){return 0===r?n.add(e,t):s}))}),"locked"))}return this._idbstore(_,(function(n,r,i){var o=void 0!==t?i.put(e,t):i.put(e);o.onerror=Nn(r),o.onsuccess=sn((function(t){var r=i.keyPath;r&&Ne(e,r,t.target.result),n(o.result)}))}))},delete:function(e){return this.hook.deleting.subscribers.length?this.where(":id").equals(e).delete():this._idbstore(_,(function(t,n,r){var i=r.delete(e);i.onerror=Nn(n),i.onsuccess=sn((function(){t(i.result)}))}))},clear:function(){return this.hook.deleting.subscribers.length?this.toCollection().delete():this._idbstore(_,(function(e,t,n){var r=n.clear();r.onerror=Nn(t),r.onsuccess=sn((function(){e(r.result)}))}))},update:function(e,t){if("object"!=typeof t||be(t))throw new lt.InvalidArgument("Modifications must be an object.");if("object"!=typeof e||be(e))return this.where(":id").equals(e).modify(t);ye(t).forEach((function(n){Ne(e,n,t[n])}));var n=Le(e,this.schema.primKey.keyPath);return void 0===n?An(new lt.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(n).modify(t)}}),Ae(j.prototype,{_lock:function(){return ze(!Wt.global),++this._reculock,1!==this._reculock||Wt.global||(Wt.lockOwnerFor=this),this},_unlock:function(){if(ze(!Wt.global),0==--this._reculock)for(Wt.global||(Wt.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var e=this._blockedFuncs.shift();try{xn(e[1],e[0])}catch(e){}}return this},_locked:function(){return this._reculock&&Wt.lockOwnerFor!==this},create:function(e){var t=this;if(!this.mode)return this;if(ze(!this.idbtrans),!e&&!v)switch(y&&y.name){case"DatabaseClosedError":throw new lt.DatabaseClosed(y);case"MissingAPIError":throw new lt.MissingAPI(y.message,y);default:throw new lt.OpenFailed(y)}if(!this.active)throw new lt.TransactionInactive;return ze(null===this._completion._state),(e=this.idbtrans=e||v.transaction(Un(this.storeNames),this.mode)).onerror=sn((function(n){qn(n),t._reject(e.error)})),e.onabort=sn((function(n){qn(n),t.active&&t._reject(new lt.Abort(e.error)),t.active=!1,t.on("abort").fire(n)})),e.oncomplete=sn((function(){t.active=!1,t._resolve()})),this},_promise:function(e,t,n){var r=this;if(e===_&&this.mode!==_)return An(new lt.ReadOnly("Transaction is readonly"));if(!this.active)return An(new lt.TransactionInactive);if(this._locked())return new Ht((function(i,o){r._blockedFuncs.push([function(){r._promise(e,t,n).then(i,o)},Wt])}));if(n)return dn((function(){var e=new Ht((function(e,n){r._lock();var i=t(e,n,r);i&&i.then&&i.then(e,n)}));return e.finally((function(){return r._unlock()})),e._lib=!0,e}));var i=new Ht((function(e,n){var i=t(e,n,r);i&&i.then&&i.then(e,n)}));return i._lib=!0,i},_root:function(){return this.parent?this.parent._root():this},waitFor:function(e){var t=this._root();if(e=Ht.resolve(e),t._waitingFor)t._waitingFor=t._waitingFor.then((function(){return e}));else{t._waitingFor=e,t._waitingQueue=[];var n=t.idbtrans.objectStore(t.storeNames[0]);!function e(){for(++t._spinCount;t._waitingQueue.length;)t._waitingQueue.shift()();t._waitingFor&&(n.get(-1/0).onsuccess=e)}()}var r=t._waitingFor;return new Ht((function(n,i){e.then((function(e){return t._waitingQueue.push(sn(n.bind(null,e)))}),(function(e){return t._waitingQueue.push(sn(i.bind(null,e)))})).finally((function(){t._waitingFor===r&&(t._waitingFor=null)}))}))},abort:function(){this.active&&this._reject(new lt.Abort),this.active=!1},tables:{get:(o="Transaction.tables",s=function(){return m},function(){return console.warn(o+" is deprecated. See https://github.com/dfahlander/Dexie.js/wiki/Deprecations. "+tt(et(),1)),s.apply(this,arguments)})},table:function(e){return new z(e,k.table(e).schema,this)}}),Ae(R.prototype,(function(){function e(e,t,n){var r=e instanceof R?new L(e):e;return r._ctx.error=n?new n(t):new TypeError(t),r}function t(e){return new L(e,(function(){return f.only("")})).limit(0)}function n(e,t,n,r,i,o){for(var s=Math.min(e.length,r.length),a=-1,c=0;c<s;++c){var u=t[c];if(u!==r[c])return i(e[c],n[c])<0?e.substr(0,c)+n[c]+n.substr(c+1):i(e[c],r[c])<0?e.substr(0,c)+r[c]+n.substr(c+1):a>=0?e.substr(0,a)+t[a]+n.substr(a+1):null;i(e[c],u)<0&&(a=c)}return s<r.length&&"next"===o?e+n.substr(e.length):s<e.length&&"prev"===o?e.substr(0,n.length):a<0?null:e.substr(0,a)+r[a]+n.substr(a+1)}function r(t,r,i,o){var s,a,c,u,l,h,d,p=i.length;if(!i.every((function(e){return"string"==typeof e})))return e(t,"String expected.");function g(e){s=function(e){return"next"===e?function(e){return e.toUpperCase()}:function(e){return e.toLowerCase()}}(e),a=function(e){return"next"===e?function(e){return e.toLowerCase()}:function(e){return e.toUpperCase()}}(e),c="next"===e?Z:V;var t=i.map((function(e){return{lower:a(e),upper:s(e)}})).sort((function(e,t){return c(e.lower,t.lower)}));u=t.map((function(e){return e.upper})),l=t.map((function(e){return e.lower})),h=e,d="next"===e?"":o}g("next");var m=new L(t,(function(){return f.bound(u[0],l[p-1]+o)}));m._ondirectionchange=function(e){g(e)};var v=0;return m._addAlgorithm((function(e,t,i){var o=e.key;if("string"!=typeof o)return!1;var s=a(o);if(r(s,l,v))return!0;for(var f=null,g=v;g<p;++g){var m=n(o,s,u[g],l[g],c,h);null===m&&null===f?v=g+1:(null===f||c(f,m)>0)&&(f=m)}return t(null!==f?function(){e.continue(f+d)}:i),!1})),m}return{between:function(n,r,i,o){i=!1!==i,o=!0===o;try{return B(n,r)>0||0===B(n,r)&&(i||o)&&(!i||!o)?t(this):new L(this,(function(){return f.bound(n,r,!i,!o)}))}catch(t){return e(this,On)}},equals:function(e){return new L(this,(function(){return f.only(e)}))},above:function(e){return new L(this,(function(){return f.lowerBound(e,!0)}))},aboveOrEqual:function(e){return new L(this,(function(){return f.lowerBound(e)}))},below:function(e){return new L(this,(function(){return f.upperBound(e,!0)}))},belowOrEqual:function(e){return new L(this,(function(){return f.upperBound(e)}))},startsWith:function(t){return"string"!=typeof t?e(this,"String expected."):this.between(t,t+En,!0,!0)},startsWithIgnoreCase:function(e){return""===e?this.startsWith(e):r(this,(function(e,t){return 0===e.indexOf(t[0])}),[e],En)},equalsIgnoreCase:function(e){return r(this,(function(e,t){return e===t[0]}),[e],"")},anyOfIgnoreCase:function(){var e=Ge.apply(Ve,arguments);return 0===e.length?t(this):r(this,(function(e,t){return-1!==t.indexOf(e)}),e,"")},startsWithAnyOfIgnoreCase:function(){var e=Ge.apply(Ve,arguments);return 0===e.length?t(this):r(this,(function(e,t){return t.some((function(t){return 0===e.indexOf(t)}))}),e,En)},anyOf:function(){var n=Ge.apply(Ve,arguments),r=H;try{n.sort(r)}catch(t){return e(this,On)}if(0===n.length)return t(this);var i=new L(this,(function(){return f.bound(n[0],n[n.length-1])}));i._ondirectionchange=function(e){r="next"===e?H:U,n.sort(r)};var o=0;return i._addAlgorithm((function(e,t,i){for(var s=e.key;r(s,n[o])>0;)if(++o===n.length)return t(i),!1;return 0===r(s,n[o])||(t((function(){e.continue(n[o])})),!1)})),i},notEqual:function(e){return this.inAnyRange([[-1/0,e],[e,Sn]],{includeLowers:!1,includeUppers:!1})},noneOf:function(){var t=Ge.apply(Ve,arguments);if(0===t.length)return new L(this);try{t.sort(H)}catch(t){return e(this,On)}var n=t.reduce((function(e,t){return e?e.concat([[e[e.length-1][1],t]]):[[-1/0,t]]}),null);return n.push([t[t.length-1],Sn]),this.inAnyRange(n,{includeLowers:!1,includeUppers:!1})},inAnyRange:function(n,r){if(0===n.length)return t(this);if(!n.every((function(e){return void 0!==e[0]&&void 0!==e[1]&&H(e[0],e[1])<=0})))return e(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",lt.InvalidArgument);var i=!r||!1!==r.includeLowers,o=r&&!0===r.includeUppers;var s,a=H;function c(e,t){return a(e[0],t[0])}try{(s=n.reduce((function(e,t){for(var n=0,r=e.length;n<r;++n){var i=e[n];if(B(t[0],i[1])<0&&B(t[1],i[0])>0){i[0]=(o=i[0],s=t[0],B(o,s)<0?o:s),i[1]=K(i[1],t[1]);break}}var o,s;return n===r&&e.push(t),e}),[])).sort(c)}catch(t){return e(this,On)}var u=0,l=o?function(e){return H(e,s[u][1])>0}:function(e){return H(e,s[u][1])>=0},h=i?function(e){return U(e,s[u][0])>0}:function(e){return U(e,s[u][0])>=0};var d=l,p=new L(this,(function(){return f.bound(s[0][0],s[s.length-1][1],!i,!o)}));return p._ondirectionchange=function(e){"next"===e?(d=l,a=H):(d=h,a=U),s.sort(c)},p._addAlgorithm((function(e,t,n){for(var r=e.key;d(r);)if(++u===s.length)return t(n),!1;return!!function(e){return!l(e)&&!h(e)}(r)||0!==B(r,s[u][1])&&0!==B(r,s[u][0])&&(t((function(){a===H?e.continue(s[u][0]):e.continue(s[u][1])})),!1)})),p},startsWithAnyOf:function(){var n=Ge.apply(Ve,arguments);return n.every((function(e){return"string"==typeof e}))?0===n.length?t(this):this.inAnyRange(n.map((function(e){return[e,e+En]}))):e(this,"startsWithAnyOf() only works with strings")}}})),Ae(L.prototype,(function(){function e(e,t){e.filter=G(e.filter,t)}function t(e,t,n){var r=e.replayFilter;e.replayFilter=r?function(){return G(r(),t())}:t,e.justLimit=n&&!r}function n(e,t){if(e.isPrimKey)return t;var n=e.table.schema.idxByName[e.index];if(!n)throw new lt.Schema("KeyPath "+e.index+" on object store "+t.name+" is not indexed");return t.index(n.name)}function r(e,t){var r=n(e,t);return e.keysOnly&&"openKeyCursor"in r?r.openKeyCursor(e.range||null,e.dir+e.unique):r.openCursor(e.range||null,e.dir+e.unique)}function o(e,t,n,i,o){var s=e.replayFilter?G(e.filter,e.replayFilter()):e.filter;e.or?function(){var a={},c=0;function u(){2==++c&&n()}function l(e,n,r){if(!s||s(n,r,u,i)){var o=n.primaryKey,c=""+o;"[object ArrayBuffer]"===c&&(c=""+new Uint8Array(o)),$e(a,c)||(a[c]=!0,t(e,n,r))}}e.or._iterate(l,u,i,o),q(r(e,o),e.algorithm,l,u,i,!e.keysOnly&&e.valueMapper)}():q(r(e,o),G(e.algorithm,s),t,n,i,!e.keysOnly&&e.valueMapper)}return{_read:function(e,t){var n=this._ctx;return n.error?n.table._trans(null,An.bind(null,n.error)):n.table._idbstore("readonly",e).then(t)},_write:function(e){var t=this._ctx;return t.error?t.table._trans(null,An.bind(null,t.error)):t.table._idbstore(_,e,"locked")},_addAlgorithm:function(e){var t=this._ctx;t.algorithm=G(t.algorithm,e)},_iterate:function(e,t,n,r){return o(this._ctx,e,t,n,r)},clone:function(e){var t=Object.create(this.constructor.prototype),n=Object.create(this._ctx);return e&&xe(n,e),t._ctx=n,t},raw:function(){return this._ctx.valueMapper=null,this},each:function(e){var t=this._ctx;return this._read((function(n,r,i){o(t,e,n,r,i)}))},count:function(e){var t=this._ctx;if(N(t,!0))return this._read((function(e,r,i){var o=n(t,i),s=t.range?o.count(t.range):o.count();s.onerror=Nn(r),s.onsuccess=function(n){e(Math.min(n.target.result,t.limit))}}),e);var r=0;return this._read((function(e,n,i){o(t,(function(){return++r,!1}),(function(){e(r)}),n,i)}),e)},sortBy:function(e,t){var n=e.split(".").reverse(),r=n[0],i=n.length-1;function o(e,t){return t?o(e[n[t]],t-1):e[r]}var s="next"===this._ctx.dir?1:-1;function a(e,t){var n=o(e,i),r=o(t,i);return n<r?-s:n>r?s:0}return this.toArray((function(e){return e.sort(a)})).then(t)},toArray:function(e){var t=this._ctx;return this._read((function(e,r,s){if(i&&"next"===t.dir&&N(t,!0)&&t.limit>0){var a=t.table.hook.reading.fire,c=n(t,s),u=t.limit<1/0?c.getAll(t.range,t.limit):c.getAll(t.range);u.onerror=Nn(r),u.onsuccess=Fn(a===pt?e:function(t){try{e(t.map(a))}catch(e){r(e)}})}else{var l=[];o(t,(function(e){l.push(e)}),(function(){e(l)}),r,s)}}),e)},offset:function(e){var n=this._ctx;return e<=0?this:(n.offset+=e,N(n)?t(n,(function(){var t=e;return function(e,n){return 0===t||(1===t?(--t,!1):(n((function(){e.advance(t),t=0})),!1))}})):t(n,(function(){var t=e;return function(){return--t<0}})),this)},limit:function(e){return this._ctx.limit=Math.min(this._ctx.limit,e),t(this._ctx,(function(){var t=e;return function(e,n,r){return--t<=0&&n(r),t>=0}}),!0),this},until:function(t,n){return e(this._ctx,(function(e,r,i){return!t(e.value)||(r(i),n)})),this},first:function(e){return this.limit(1).toArray((function(e){return e[0]})).then(e)},last:function(e){return this.reverse().first(e)},filter:function(t){return e(this._ctx,(function(e){return t(e.value)})),function(e,t){e.isMatch=G(e.isMatch,t)}(this._ctx,t),this},and:function(e){return this.filter(e)},or:function(e){return new R(this._ctx.table,e,this)},reverse:function(){return this._ctx.dir="prev"===this._ctx.dir?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},desc:function(){return this.reverse()},eachKey:function(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each((function(t,n){e(n.key,n)}))},eachUniqueKey:function(e){return this._ctx.unique="unique",this.eachKey(e)},eachPrimaryKey:function(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each((function(t,n){e(n.primaryKey,n)}))},keys:function(e){var t=this._ctx;t.keysOnly=!t.isMatch;var n=[];return this.each((function(e,t){n.push(t.key)})).then((function(){return n})).then(e)},primaryKeys:function(e){var t=this._ctx;if(i&&"next"===t.dir&&N(t,!0)&&t.limit>0)return this._read((function(e,r,i){var o=n(t,i),s=t.limit<1/0?o.getAllKeys(t.range,t.limit):o.getAllKeys(t.range);s.onerror=Nn(r),s.onsuccess=Fn(e)})).then(e);t.keysOnly=!t.isMatch;var r=[];return this.each((function(e,t){r.push(t.primaryKey)})).then((function(){return r})).then(e)},uniqueKeys:function(e){return this._ctx.unique="unique",this.keys(e)},firstKey:function(e){return this.limit(1).keys((function(e){return e[0]})).then(e)},lastKey:function(e){return this.reverse().firstKey(e)},distinct:function(){var t=this._ctx,n=t.index&&t.table.schema.idxByName[t.index];if(!n||!n.multi)return this;var r={};return e(this._ctx,(function(e){var t=e.primaryKey.toString(),n=$e(r,t);return r[t]=!0,!n})),this},modify:function(e){var t=this,n=this._ctx.table.hook,r=n.updating.fire,i=n.deleting.fire;return this._write((function(n,o,s,a){var c;if("function"==typeof e)c=r===dt&&i===dt?e:function(t){var n=Ke(t);if(!1===e.call(this,t,this))return!1;if($e(this,"value")){var o=He(n,this.value),s=r.call(this,o,this.primKey,n,a);s&&(t=this.value,ye(s).forEach((function(e){Ne(t,e,s[e])})))}else i.call(this,this.primKey,t,a)};else if(r===dt){var u=ye(e),l=u.length;c=function(t){for(var n=!1,r=0;r<l;++r){var i=u[r],o=e[i];Le(t,i)!==o&&(Ne(t,i,o),n=!0)}return n}}else{var h=e;e=Fe(h),c=function(t){var n=!1,i=r.call(this,e,this.primKey,Ke(t),a);return i&&xe(e,i),ye(e).forEach((function(r){var i=e[r];Le(t,r)!==i&&(Ne(t,r,i),n=!0)})),i&&(e=Fe(h)),n}}var f=0,d=0,p=!1,g=[],m=[],v=null;function y(e){return e&&(g.push(e),m.push(v)),o(new st("Error modifying one or more objects",g,d,m))}function b(){p&&d+g.length===f&&(g.length>0?y():n(d))}t.clone().raw()._iterate((function(e,t){v=t.primaryKey;var n={primKey:t.primaryKey,value:e,onsuccess:null,onerror:null};function r(e){return g.push(e),m.push(n.primKey),b(),!0}if(!1!==c.call(n,e,n)){var i=!$e(n,"value");++f,Re((function(){var e=i?t.delete():t.update(n.value);e._hookCtx=n,e.onerror=Wn(r),e.onsuccess=Ln((function(){++d,b()}))}),r)}else n.onsuccess&&n.onsuccess(n.value)}),(function(){p=!0,b()}),y,s)}))},delete:function(){var e=this,t=this._ctx,n=t.range,r=t.table.hook.deleting.fire,i=r!==dt;if(!i&&N(t)&&(t.isPrimKey&&!Cn||!n))return this._write((function(e,t,r){var i=Nn(t),o=n?r.count(n):r.count();o.onerror=i,o.onsuccess=function(){var s=o.result;Re((function(){var t=n?r.delete(n):r.clear();t.onerror=i,t.onsuccess=function(){return e(s)}}),(function(e){return t(e)}))}}));var o=i?2e3:1e4;return this._write((function(n,s,a,c){var u=0,l=e.clone({keysOnly:!t.isMatch&&!i}).distinct().limit(o).raw(),h=[],f=function(){return l.each(i?function(e,t){h.push([t.primaryKey,t.value])}:function(e,t){h.push(t.primaryKey)}).then((function(){return i?h.sort((function(e,t){return H(e[0],t[0])})):h.sort(H),M(a,c,h,i,r)})).then((function(){var e=h.length;return u+=e,h=[],e<o?u:f()}))};n(f())}))}}})),xe(this,{Collection:L,Table:z,Transaction:j,Version:E,WhereClause:R}),k.on("versionchange",(function(e){e.newVersion>0?console.warn("Another connection wants to upgrade database '"+k.name+"'. Closing db now to resume the upgrade."):console.warn("Another connection wants to delete database '"+k.name+"'. Closing db now to resume the delete request."),k.close()})),k.on("blocked",(function(e){!e.newVersion||e.newVersion<e.oldVersion?console.warn("Dexie.delete('"+k.name+"') was blocked"):console.warn("Upgrade '"+k.name+"' blocked by other connection holding version "+e.oldVersion/10)})),u.forEach((function(e){e(k)}))}function Rn(e,t){return ye(t).forEach((function(n){var r=function e(t){if("function"==typeof t)return new t;if(be(t))return[e(t[0])];if(t&&"object"==typeof t){var n={};return Rn(n,t),n}return t}(t[n]);e[n]=r})),e}function Ln(e){return sn((function(t){var n=t.target,r=n._hookCtx,i=r.value||n.result,o=r&&r.onsuccess;o&&o(i),e&&e(i)}),e)}function Nn(e){return sn((function(t){return qn(t),e(t.target.error),!1}))}function Fn(e){return sn((function(t){e(t.target.result)}))}function Wn(e){return sn((function(t){var n=t.target,r=n.error,i=n._hookCtx,o=i&&i.onerror;return o&&o(r),qn(t),e(r),!1}))}function qn(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault()}function Bn(e){var t=function(t){return e.next(t)},n=i(t),r=i((function(t){return e.throw(t)}));function i(e){return function(t){var i=e(t),o=i.value;return i.done?o:o&&"function"==typeof o.then?o.then(n,r):be(o)?Ht.all(o).then(n,r):n(o)}}return i(t)()}function Kn(e,t,n,r,i,o,s){this.name=e,this.keyPath=t,this.unique=n,this.multi=r,this.auto=i,this.compound=o,this.dotted=s;var a="string"==typeof t?t:t&&"["+[].join.call(t,"+")+"]";this.src=(n?"&":"")+(r?"*":"")+(i?"++":"")+a}function Hn(e,t,n,r){this.name=e,this.primKey=t||new Kn,this.indexes=n||[new Kn],this.instanceTemplate=r,this.mappedClass=null,this.idxByName=Me(n,(function(e){return[e.name,e]}))}function Un(e){return 1===e.length?e[0]:e}function Zn(e){var t=e&&(e.getDatabaseNames||e.webkitGetDatabaseNames);return t&&t.bind(e)}Xe(Ye,Mn),Ae(jn,ft),Ae(jn,{delete:function(e){var t=new jn(e),n=t.delete();return n.onblocked=function(e){return t.on("blocked",e),this},n},exists:function(e){return new jn(e).open().then((function(e){return e.close(),!0})).catch(jn.NoSuchDatabaseError,(function(){return!1}))},getDatabaseNames:function(e){var t=Zn(jn.dependencies.indexedDB);return t?new Ht((function(e,n){var r=t();r.onsuccess=function(t){e(De(t.target.result,0))},r.onerror=Nn(n)})).then(e):Tn.dbnames.toCollection().primaryKeys(e)},defineClass:function(){return function(e){e&&xe(this,e)}},applyStructure:Rn,ignoreTransaction:function(e){return Wt.trans?xn(Wt.transless,e):e()},vip:function(e){return dn((function(){return Wt.letThrough=!0,e()}))},async:function(e){return function(){try{var t=Bn(e.apply(this,arguments));return t&&"function"==typeof t.then?t:Ht.resolve(t)}catch(e){return An(e)}}},spawn:function(e,t,n){try{var r=Bn(e.apply(n,t||[]));return r&&"function"==typeof r.then?r:Ht.resolve(r)}catch(e){return An(e)}},currentTransaction:{get:function(){return Wt.trans||null}},waitFor:function(e,t){var n=Ht.resolve("function"==typeof e?jn.ignoreTransaction(e):e).timeout(t||6e4);return Wt.trans?Wt.trans.waitFor(n):n},Promise:Ht,debug:{get:function(){return Ye},set:function(e){Xe(e,"dexie"===e?function(){return!0}:Mn)}},derive:Ee,extend:xe,props:Ae,override:Ie,Events:Pn,getByKeyPath:Le,setByKeyPath:Ne,delByKeyPath:function(e,t){"string"==typeof t?Ne(e,t,void 0):"length"in t&&[].map.call(t,(function(t){Ne(e,t,void 0)}))},shallowClone:Fe,deepClone:Ke,getObjectDiff:He,asap:Ce,maxKey:Sn,minKey:-1/0,addons:[],connections:Dn,MultiModifyError:lt.Modify,errnames:ct,IndexSpec:Kn,TableSchema:Hn,dependencies:function(){try{return{indexedDB:we.indexedDB||we.mozIndexedDB||we.webkitIndexedDB||we.msIndexedDB,IDBKeyRange:we.IDBKeyRange||we.webkitIDBKeyRange}}catch(e){return{indexedDB:null,IDBKeyRange:null}}}(),semVer:"{version}",version:"{version}".split(".").map((function(e){return parseInt(e)})).reduce((function(e,t,n){return e+t/Math.pow(10,2*n)})),default:jn,Dexie:jn}),Ht.rejectionMapper=function(e,t){if(!e||e instanceof ot||e instanceof TypeError||e instanceof SyntaxError||!e.name||!ht[e.name])return e;var n=new ht[e.name](t||e.message,e);return"stack"in e&&Te(n,"stack",{get:function(){return this.inner.stack}}),n},(Tn=new jn("__dbnames")).version(1).stores({dbnames:"name"}),function(){try{void 0!==typeof localStorage&&void 0!==we.document&&(JSON.parse(localStorage.getItem("Dexie.DatabaseNames")||"[]").forEach((function(e){return Tn.dbnames.put({name:e}).catch(dt)})),localStorage.removeItem("Dexie.DatabaseNames"))}catch(e){}}();const Vn=[];let Gn=ve(2);const Yn=e=>Gn.update(()=>e),Xn=()=>Vn[u(Gn)],Qn=e=>Xn().widgets.get(e),Jn=new jn("dashes");Jn.version(1).stores({dashes:"ref",widgets:"ref"}),async function(){if(await Jn.dashes.count()>0){(await Jn.dashes.toArray()).forEach((e,t)=>{nr(e.title,e.ref),e.widgets.forEach(e=>{Jn.widgets.get(e).then(({type:n,title:r,data:i,sizeAndPos:o})=>ir(n,r,i,o,t,e))})})}else rr("one"),rr("two"),rr("three"),rr("four"),rr("five"),or("Sticky","Welcome","This is currently only a prototype. The concept is a personal dash space for organising activities. At the moment functionality is limited.",{24:{w:8,h:5,x:0,y:0},23:{w:8,h:5,x:5,y:0},12:{w:12,h:4,x:0,y:0}}),or("Sticky","Widgets","These are the building block. Each has an editiable title. You can resize and drag and drop them.",{24:{w:8,h:5,x:8,y:4},23:{w:6,h:6,x:6,y:5},12:{w:10,h:4,x:1,y:4}}),or("Sticky","Sticky","A type of Widget. Currently the only type available for the prototype. It accepts a text input. Future versions will accept and automatically convert image urls, dates, links, and todo lists.",{24:{w:8,h:5,x:0,y:6},23:{w:8,h:5,x:5,y:12},12:{w:12,h:5,x:0,y:13}}),or("Sticky","Add Widget","You may add more widgets using the widgets menu in the bottom right corner.",{24:{w:8,h:5,x:0,y:8},23:{w:6,h:6,x:0,y:6},12:{w:6,h:5,x:0,y:8},11:{w:11,h:5,x:0,y:8}}),or("Sticky","Delete Widgets","You can remove widgets by activating the trash from the widgets menu and clicking the trash icon within each widget to be removed.",{24:{w:8,h:5,x:16,y:8},23:{w:6,h:6,x:12,y:6},12:{w:6,h:5,x:6,y:8},11:{w:11,h:5,x:0,y:8}})}();let er=0;const tr=e=>e+"-"+Date.now()+"-"+er++,nr=(e,t)=>{try{const n={ref:t,_title:ve(e),widgets:new Map,_widgetsCount:ve(0)};Vn.push(n),Yn(Vn.length-1),n._title.subscribe(e=>Jn.dashes.update(t,{title:e}))}catch(e){console.error(e)}},rr=(e="",t=tr("dash"))=>new Promise((n,r)=>{nr(e,t),Jn.dashes.put({ref:t,title:e,widgets:[]}).then(()=>n,e=>r(e))}),ir=(e,t,n,r,i,o)=>{try{const s={type:e,sizeAndPos:r,_title:ve(t),_data:ve(n)};Vn[i].widgets.set(o,s),Vn[i]._widgetsCount.update(e=>e+1),s._title.subscribe(e=>Jn.widgets.update(o,{title:e})),s._data.subscribe(e=>Jn.widgets.update(o,{data:e}))}catch(e){console.error(e)}},or=(e,t="",n="",r={0:{w:8,h:5,x:1/0,y:0}},i=u(Gn),o=tr("widget"))=>new Promise((s,a)=>{ir(e,t,n,r,i,o),Jn.dashes.update(Vn[i].ref,{widgets:Array.from(Vn[i].widgets.keys())}),Jn.widgets.put({ref:o,type:e,sizeAndPos:r,title:t,data:n}).then(e=>s(),e=>a(e))}),sr=e=>{try{Jn.dashes.delete(Vn[e].ref),Vn.splice(e,1)}catch(e){console.error(e)}};function ar(t){var n,r;return{c(){(n=$("button")).innerHTML='<img src="/images/arrowRightIcon.svg" alt="prev">',S(n,"class","svelte-1l6716q"),r=E(n,"click",t.left)},m(e,t){x(e,n,t)},p:e,i:e,o:e,d(e){e&&_(n),r()}}}function cr(e){const t=B();return{left:()=>{t("left")}}}class ur extends ge{constructor(e){super(),pe(this,e,cr,ar,a,[])}}function lr(t){var n,r;return{c(){(n=$("button")).innerHTML='<img src="/images/arrowRightIcon.svg" alt="next">',S(n,"class","svelte-1bwa45r"),r=E(n,"click",t.right)},m(e,t){x(e,n,t)},p:e,i:e,o:e,d(e){e&&_(n),r()}}}function hr(e){const t=B();return{right:()=>{t("right")}}}class fr extends ge{constructor(e){super(),pe(this,e,hr,lr,a,[])}}function dr(e){var t,n,r;return{c(){S(t=$("img"),"class",n="cancel "+e.cancelPos+" svelte-1gmxc8e"),S(t,"src","/images/cancelIcon.svg"),S(t,"alt","x"),r=E(t,"click",e.trash)},m(e,n){x(e,t,n)},p(e,r){e.cancelPos&&n!==(n="cancel "+r.cancelPos+" svelte-1gmxc8e")&&S(t,"class",n)},d(e){e&&_(t),r()}}}function pr(t){var n,r,i,o,s,a=t.active&&dr(t);return{c(){n=$("button"),a&&a.c(),r=P(),S(i=$("img"),"src","/images/TrashIcon.svg"),S(i,"alt","-"),S(n,"class",o=f(t.active?"active":"")+" svelte-1gmxc8e"),s=E(n,"click",t.trash)},m(e,t){x(e,n,t),a&&a.m(n,null),w(n,r),w(n,i)},p(e,t){t.active?a?a.p(e,t):((a=dr(t)).c(),a.m(n,r)):a&&(a.d(1),a=null),e.active&&o!==(o=f(t.active?"active":"")+" svelte-1gmxc8e")&&S(n,"class",o)},i:e,o:e,d(e){e&&_(n),a&&a.d(),s()}}}function gr(e,t,n){let{active:r=!1,cancelPos:i="top"}=t;const o=B();return e.$set=e=>{"active"in e&&n("active",r=e.active),"cancelPos"in e&&n("cancelPos",i=e.cancelPos)},{active:r,cancelPos:i,trash:()=>{o("trash",{active:!r})}}}class mr extends ge{constructor(e){super(),pe(this,e,gr,pr,a,["active","cancelPos"])}}function vr(t){var n,r,i,o;return{c(){n=$("button"),S(r=$("img"),"src","/images/addIcon.svg"),S(r,"alt","+"),S(n,"class",i=f(t.active?"active":"")+" svelte-9b9csn"),o=E(n,"click",t.add)},m(e,t){x(e,n,t),w(n,r)},p(e,t){e.active&&i!==(i=f(t.active?"active":"")+" svelte-9b9csn")&&S(n,"class",i)},i:e,o:e,d(e){e&&_(n),o()}}}function yr(e,t,n){let{active:r}=t;const i=B();return e.$set=e=>{"active"in e&&n("active",r=e.active)},{active:r,add:()=>i("add")}}class br extends ge{constructor(e){super(),pe(this,e,yr,vr,a,["active"])}}function wr(e,t=!1){this.isOpen=t,this.update=e,this.close=this.close.bind(this),this.open=this.open.bind(this),this.toggle=this.toggle.bind(this)}function xr(e){"Enter"===e.key&&e.target.blur()}function _r(e,t,n){const r=Object.create(e);return r.dashIndex=t[n],r.i=n,r}function kr(e,t,n){const r=Object.create(e);return r.dash=t[n],r.i=n,r}function $r(t){var n;return{c(){S(n=$("div"),"class","carousel svelte-zdbq2n")},m(e,t){x(e,n,t)},p:e,d(e){e&&_(n)}}}function Ar(e){var t;function n(e){return e.trashIsOpen?Tr:Pr}var r=n(e),i=r(e);return{c(){i.c(),t=T()},m(e,n){i.m(e,n),x(e,t,n)},p(e,o){r===(r=n(o))&&i?i.p(e,o):(i.d(1),(i=r(o))&&(i.c(),i.m(t.parentNode,t)))},d(e){i.d(e),e&&_(t)}}}function Pr(e){for(var t,n,r=e.navIndexArray,i=[],o=0;o<r.length;o+=1)i[o]=Ir(_r(e,r,o));return{c(){t=$("div");for(var r=0;r<i.length;r+=1)i[r].c();S(t,"class",n="carousel "+e.animationClass+" svelte-zdbq2n")},m(e,n){x(e,t,n);for(var r=0;r<i.length;r+=1)i[r].m(t,null)},p(e,o){if(e.navIndexArray||e.$_activeDashIndex||e.editingTitle||e.$_title||e.dashboards||e.get){r=o.navIndexArray;for(var s=0;s<r.length;s+=1){const n=_r(o,r,s);i[s]?i[s].p(e,n):(i[s]=Ir(n),i[s].c(),i[s].m(t,null))}for(;s<i.length;s+=1)i[s].d(1);i.length=r.length}e.animationClass&&n!==(n="carousel "+o.animationClass+" svelte-zdbq2n")&&S(t,"class",n)},d(e){e&&_(t),k(i,e)}}}function Tr(e){for(var t,n=Vn,r=[],i=0;i<n.length;i+=1)r[i]=zr(kr(e,n,i));return{c(){t=$("div");for(var e=0;e<r.length;e+=1)r[e].c();S(t,"class","trashMenu svelte-zdbq2n")},m(e,n){x(e,t,n);for(var i=0;i<r.length;i+=1)r[i].m(t,null)},p(e,i){if(e.get||e.dashboards){n=Vn;for(var o=0;o<n.length;o+=1){const s=kr(i,n,o);r[o]?r[o].p(e,s):(r[o]=zr(s),r[o].c(),r[o].m(t,null))}for(;o<r.length;o+=1)r[o].d(1);r.length=n.length}},d(e){e&&_(t),k(r,e)}}}function Er(e){var t,n,r,i=Vn[e.dashIndex]?u(Vn[e.dashIndex]._title):"";function o(){return e.click_handler_2(e)}return{c(){t=$("button"),n=A(i),S(t,"class","nav-button-"+e.i+" svelte-zdbq2n"),r=E(t,"click",o)},m(e,r){x(e,t,r),w(t,n)},p(t,r){e=r,t.navIndexArray&&i!==(i=Vn[e.dashIndex]?u(Vn[e.dashIndex]._title):"")&&O(n,i)},d(e){e&&_(t),r()}}}function Sr(e){var t,n;function r(e){return e.editingTitle?Dr:Or}var i=r(e),o=i(e);return{c(){t=$("div"),o.c(),n=P(),S(t,"class","current svelte-zdbq2n")},m(e,r){x(e,t,r),o.m(t,null),w(t,n)},p(e,s){i===(i=r(s))&&o?o.p(e,s):(o.d(1),(o=i(s))&&(o.c(),o.m(t,n)))},d(e){e&&_(t),o.d()}}}function Or(e){var t,n,r;return{c(){t=$("button"),n=A(e.$_title),S(t,"class","active-dash-title svelte-zdbq2n"),r=E(t,"click",e.click_handler_1)},m(e,r){x(e,t,r),w(t,n)},p(e,t){e.$_title&&O(n,t.$_title)},d(e){e&&_(t),r()}}}function Dr(e){var t,n;return{c(){S(t=$("input"),"type","text"),t.autofocus=!0,S(t,"class","svelte-zdbq2n"),n=[E(t,"input",e.input_input_handler),E(t,"blur",e.closeEditingTitle),E(t,"keypress",xr)]},m(n,r){x(n,t,r),t.value=e.$_title,t.focus()},p(e,n){e.$_title&&t.value!==n.$_title&&(t.value=n.$_title)},d(e){e&&_(t),o(n)}}}function Ir(e){var t;function n(e){return e.dashIndex===e.$_activeDashIndex?Sr:Er}var r=n(e),i=r(e);return{c(){i.c(),t=T()},m(e,n){i.m(e,n),x(e,t,n)},p(e,o){r===(r=n(o))&&i?i.p(e,o):(i.d(1),(i=r(o))&&(i.c(),i.m(t.parentNode,t)))},d(e){i.d(e),e&&_(t)}}}function zr(e){var t,n,r,i,o,s,a,c=u(e.dash._title);function l(){return e.click_handler(e)}return{c(){t=$("button"),n=$("h3"),r=A(c),i=P(),o=$("img"),s=P(),S(n,"class","svelte-zdbq2n"),S(o,"src","/images/trashIcon.svg"),S(o,"alt","-"),S(o,"class","svelte-zdbq2n"),S(t,"class","svelte-zdbq2n"),a=E(t,"click",l)},m(e,a){x(e,t,a),w(t,n),w(n,r),w(t,i),w(t,o),w(t,s)},p(t,n){e=n},d(e){e&&_(t),a()}}}function Cr(e){var t,n,r,i,o,s,a,c=new ur({});c.$on("left",e.left_handler);var u=new mr({props:{active:e.trashIsOpen,cancelPos:"right"}});function l(e){return Vn.length>0?Ar:$r}u.$on("trash",e.trash.toggle);var h=l(),f=h(e),d=new br({});d.$on("add",e.addNewDash);var p=new fr({});return p.$on("right",e.right_handler),{c(){t=$("nav"),c.$$.fragment.c(),n=P(),u.$$.fragment.c(),r=P(),i=$("div"),f.c(),o=P(),d.$$.fragment.c(),s=P(),p.$$.fragment.c(),S(i,"class","container svelte-zdbq2n"),S(t,"class","svelte-zdbq2n")},m(e,l){x(e,t,l),he(c,t,null),w(t,n),he(u,t,null),w(t,r),w(t,i),f.m(i,null),w(t,o),he(d,t,null),w(t,s),he(p,t,null),a=!0},p(e,t){var n={};e.trashIsOpen&&(n.active=t.trashIsOpen),u.$set(n),h===(h=l())&&f?f.p(e,t):(f.d(1),(f=h(t))&&(f.c(),f.m(i,null)))},i(e){a||(oe(c.$$.fragment,e),oe(u.$$.fragment,e),oe(d.$$.fragment,e),oe(p.$$.fragment,e),a=!0)},o(e){se(c.$$.fragment,e),se(u.$$.fragment,e),se(d.$$.fragment,e),se(p.$$.fragment,e),a=!1},d(e){e&&_(t),fe(c),fe(u),f.d(),fe(d),fe(p)}}}function Mr(t,n,r){let i,o,s=e;l(t,Gn,e=>{i=e,r("$_activeDashIndex",i)}),t.$$.on_destroy.push(()=>s());const a=B();let u=!1;const h=new wr(e=>{const t=u=e;return r("trashIsOpen",u),t});let f=!1;let d="";const p=e=>{const t=(Vn.length+i+e)%Vn.length;0!==e&&t!==i&&(a("changingDash"),r("animationClass",d=e>0?"forward-animation":"backward-animation"),setTimeout(()=>{Yn(t),r("animationClass",d="")},500))};let g=i;const m=e=>{sr(e),Yn((Vn.length+i-1)%Vn.length)};let v,y;return t.$$.update=(e={$_activeDashIndex:1})=>{e.$_activeDashIndex&&r("navIndexArray",v=(e=>{let t=[];for(let n=0;n<7;n++)if(Vn.length<5)t.push(e+n-3);else{const r=(Vn.length+e+n-3)%Vn.length;t.push(r)}return t})(i)),e.$_activeDashIndex&&(y=Vn[i]?Vn[i]._title:ve(""),s(),s=c(y,e=>{o=e,r("$_title",o)}),r("_title",y))},{trashIsOpen:u,trash:h,editingTitle:f,animationClass:d,setActiveDash:p,addNewDash:()=>{g=i,rr(""),r("editingTitle",f=!0),Yn(Vn.length-1)},closeEditingTitle:()=>{r("editingTitle",f=!1),""===event.target.value&&(sr(Vn.length-1),Yn(g))},deleteDash:m,navIndexArray:v,$_activeDashIndex:i,_title:y,$_title:o,left_handler:function(){return p(-1)},click_handler:function({i:e}){return m(e)},input_input_handler:function(){y.set(this.value)},click_handler_1:function(){const e=f=!0;return r("editingTitle",f),e},click_handler_2:function({i:e}){return p(e>3?1:-1)},right_handler:function(){return p(1)}}}wr.prototype.close=function(){setTimeout(()=>{this.isOpen&&(this.isOpen=!1,this.update(this.isOpen))},0),window.removeEventListener("click",this.close,{capture:!0})},wr.prototype.open=function(){this.isOpen=!0,window.addEventListener("click",this.close,{capture:!0}),this.update(this.isOpen)},wr.prototype.toggle=function(){this.isOpen?this.close():this.open()};class jr extends ge{constructor(e){super(),pe(this,e,Mr,Cr,a,[])}}function Rr(e){return--e*e*e*e*e+1}"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;function Lr(e,t){return e(t={exports:{}},t.exports),t.exports}var Nr=Lr((function(e){function t(){return{baseUrl:null,breaks:!1,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,xhtml:!1}}e.exports={defaults:{baseUrl:null,breaks:!1,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,xhtml:!1},getDefaults:t,changeDefaults:function(t){e.exports.defaults=t}}}));Nr.defaults,Nr.getDefaults,Nr.changeDefaults;const Fr=/[&<>"']/,Wr=/[&<>"']/g,qr=/[<>"']|&(?!#?\w+;)/,Br=/[<>"']|&(?!#?\w+;)/g,Kr={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Hr=e=>Kr[e];const Ur=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/gi;function Zr(e){return e.replace(Ur,(e,t)=>"colon"===(t=t.toLowerCase())?":":"#"===t.charAt(0)?"x"===t.charAt(1)?String.fromCharCode(parseInt(t.substring(2),16)):String.fromCharCode(+t.substring(1)):"")}const Vr=/(^|[^\[])\^/g;const Gr=/[^\w:]/g,Yr=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;const Xr={},Qr=/^[^:]+:\/*[^/]*$/,Jr=/^([^:]+:)[\s\S]*$/,ei=/^([^:]+:\/*[^/]*)[\s\S]*$/;function ti(e,t){Xr[" "+e]||(Qr.test(e)?Xr[" "+e]=e+"/":Xr[" "+e]=ni(e,"/",!0));const n=-1===(e=Xr[" "+e]).indexOf(":");return"//"===t.substring(0,2)?n?t:e.replace(Jr,"$1")+t:"/"===t.charAt(0)?n?t:e.replace(ei,"$1")+t:e+t}function ni(e,t,n){const r=e.length;if(0===r)return"";let i=0;for(;i<r;){const o=e.charAt(r-i-1);if(o!==t||n){if(o===t||!n)break;i++}else i++}return e.substr(0,r-i)}var ri={escape:function(e,t){if(t){if(Fr.test(e))return e.replace(Wr,Hr)}else if(qr.test(e))return e.replace(Br,Hr);return e},unescape:Zr,edit:function(e,t){e=e.source||e,t=t||"";const n={replace:(t,r)=>(r=(r=r.source||r).replace(Vr,"$1"),e=e.replace(t,r),n),getRegex:()=>new RegExp(e,t)};return n},cleanUrl:function(e,t,n){if(e){let e;try{e=decodeURIComponent(Zr(n)).replace(Gr,"").toLowerCase()}catch(e){return null}if(0===e.indexOf("javascript:")||0===e.indexOf("vbscript:")||0===e.indexOf("data:"))return null}t&&!Yr.test(n)&&(n=ti(t,n));try{n=encodeURI(n).replace(/%25/g,"%")}catch(e){return null}return n},resolveUrl:ti,noopTest:{exec:function(){}},merge:function(e){let t,n,r=1;for(;r<arguments.length;r++)for(n in t=arguments[r],t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},splitCells:function(e,t){const n=e.replace(/\|/g,(e,t,n)=>{let r=!1,i=t;for(;--i>=0&&"\\"===n[i];)r=!r;return r?"|":" |"}).split(/ \|/);let r=0;if(n.length>t)n.splice(t);else for(;n.length<t;)n.push("");for(;r<n.length;r++)n[r]=n[r].trim().replace(/\\\|/g,"|");return n},rtrim:ni,findClosingBracket:function(e,t){if(-1===e.indexOf(t[1]))return-1;const n=e.length;let r=0,i=0;for(;i<n;i++)if("\\"===e[i])i++;else if(e[i]===t[0])r++;else if(e[i]===t[1]&&(r--,r<0))return i;return-1},checkSanitizeDeprecation:function(e){e&&e.sanitize&&!e.silent&&console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options")}};const{noopTest:ii,edit:oi,merge:si}=ri,ai={newline:/^\n+/,code:/^( {4}[^\n]+\n*)+/,fences:/^ {0,3}(`{3,}|~{3,})([^`~\n]*)\n(?:|([\s\S]*?)\n)(?: {0,3}\1[~`]* *(?:\n+|$)|$)/,hr:/^ {0,3}((?:- *){3,}|(?:_ *){3,}|(?:\* *){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6}) +([^\n]*?)(?: +#+)? *(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3})(bull) [\s\S]+?(?:hr|def|\n{2,}(?! )(?!\1bull )\n*|\s*$)/,html:"^ {0,3}(?:<(script|pre|style)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?\\?>\\n*|<![A-Z][\\s\\S]*?>\\n*|<!\\[CDATA\\[[\\s\\S]*?\\]\\]>\\n*|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:\\n{2,}|$)|<(?!script|pre|style)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:\\n{2,}|$)|</(?!script|pre|style)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:\\n{2,}|$))",def:/^ {0,3}\[(label)\]: *\n? *<?([^\s>]+)>?(?:(?: +\n? *| *\n *)(title))? *(?:\n+|$)/,nptable:ii,table:ii,lheading:/^([^\n]+)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html)[^\n]+)*)/,text:/^[^\n]+/,_label:/(?!\s*\])(?:\\[\[\]]|[^\[\]])+/,_title:/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/};ai.def=oi(ai.def).replace("label",ai._label).replace("title",ai._title).getRegex(),ai.bullet=/(?:[*+-]|\d{1,9}\.)/,ai.item=/^( *)(bull) ?[^\n]*(?:\n(?!\1bull ?)[^\n]*)*/,ai.item=oi(ai.item,"gm").replace(/bull/g,ai.bullet).getRegex(),ai.list=oi(ai.list).replace(/bull/g,ai.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+ai.def.source+")").getRegex(),ai._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",ai._comment=/<!--(?!-?>)[\s\S]*?-->/,ai.html=oi(ai.html,"i").replace("comment",ai._comment).replace("tag",ai._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),ai.paragraph=oi(ai._paragraph).replace("hr",ai.hr).replace("heading"," {0,3}#{1,6} +").replace("|lheading","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}|~{3,})[^`\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|!--)").replace("tag",ai._tag).getRegex(),ai.blockquote=oi(ai.blockquote).replace("paragraph",ai.paragraph).getRegex(),ai.normal=si({},ai),ai.gfm=si({},ai.normal,{nptable:/^ *([^|\n ].*\|.*)\n *([-:]+ *\|[-| :]*)(?:\n((?:.*[^>\n ].*(?:\n|$))*)\n*|$)/,table:/^ *\|(.+)\n *\|?( *[-:]+[-| :]*)(?:\n((?: *[^>\n ].*(?:\n|$))*)\n*|$)/}),ai.pedantic=si({},ai.normal,{html:oi("^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:\"[^\"]*\"|'[^']*'|\\s[^'\"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))").replace("comment",ai._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^ *(#{1,6}) *([^\n]+?) *(?:#+ *)?(?:\n+|$)/,fences:ii,paragraph:oi(ai.normal._paragraph).replace("hr",ai.hr).replace("heading"," *#{1,6} *[^\n]").replace("lheading",ai.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()});const ci={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:ii,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(?!\s*\])((?:\\[\[\]]?|[^\[\]\\])+)\]/,nolink:/^!?\[(?!\s*\])((?:\[[^\[\]]*\]|\\[\[\]]|[^\[\]])*)\](?:\[\])?/,strong:/^__([^\s_])__(?!_)|^\*\*([^\s*])\*\*(?!\*)|^__([^\s][\s\S]*?[^\s])__(?!_)|^\*\*([^\s][\s\S]*?[^\s])\*\*(?!\*)/,em:/^_([^\s_])_(?!_)|^\*([^\s*<\[])\*(?!\*)|^_([^\s<][\s\S]*?[^\s_])_(?!_|[^\spunctuation])|^_([^\s_<][\s\S]*?[^\s])_(?!_|[^\spunctuation])|^\*([^\s<"][\s\S]*?[^\s\*])\*(?!\*|[^\spunctuation])|^\*([^\s*"<\[][\s\S]*?[^\s])\*(?!\*)/,code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:ii,text:/^(`+|[^`])(?:[\s\S]*?(?:(?=[\\<!\[`*]|\b_|$)|[^ ](?= {2,}\n))|(?= {2,}\n))/,_punctuation:"!\"#$%&'()*+,\\-./:;<=>?@\\[^_{|}~"};ci.em=oi(ci.em).replace(/punctuation/g,ci._punctuation).getRegex(),ci._escapes=/\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/g,ci._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/,ci._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/,ci.autolink=oi(ci.autolink).replace("scheme",ci._scheme).replace("email",ci._email).getRegex(),ci._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/,ci.tag=oi(ci.tag).replace("comment",ai._comment).replace("attribute",ci._attribute).getRegex(),ci._label=/(?:\[[^\[\]]*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,ci._href=/<(?:\\[<>]?|[^\s<>\\])*>|[^\s\x00-\x1f]*/,ci._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/,ci.link=oi(ci.link).replace("label",ci._label).replace("href",ci._href).replace("title",ci._title).getRegex(),ci.reflink=oi(ci.reflink).replace("label",ci._label).getRegex(),ci.normal=si({},ci),ci.pedantic=si({},ci.normal,{strong:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,em:/^_(?=\S)([\s\S]*?\S)_(?!_)|^\*(?=\S)([\s\S]*?\S)\*(?!\*)/,link:oi(/^!?\[(label)\]\((.*?)\)/).replace("label",ci._label).getRegex(),reflink:oi(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",ci._label).getRegex()}),ci.gfm=si({},ci.normal,{escape:oi(ci.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_~)]+(?!$))+/,del:/^~+(?=\S)([\s\S]*?\S)~+/,text:/^(`+|[^`])(?:[\s\S]*?(?:(?=[\\<!\[`*~]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@))|(?= {2,}\n|[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@))/}),ci.gfm.url=oi(ci.gfm.url,"i").replace("email",ci.gfm._extended_email).getRegex(),ci.breaks=si({},ci.gfm,{br:oi(ci.br).replace("{2,}","*").getRegex(),text:oi(ci.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()});var ui={block:ai,inline:ci};const{defaults:li}=Nr,{block:hi}=ui,{rtrim:fi,splitCells:di,escape:pi}=ri;var gi=class e{constructor(e){this.tokens=[],this.tokens.links=Object.create(null),this.options=e||li,this.rules=hi.normal,this.options.pedantic?this.rules=hi.pedantic:this.options.gfm&&(this.rules=hi.gfm)}static get rules(){return hi}static lex(t,n){return new e(n).lex(t)}lex(e){return e=e.replace(/\r\n|\r/g,"\n").replace(/\t/g,"    "),this.token(e,!0)}token(e,t){let n,r,i,o,s,a,c,u,l,h,f,d,p,g,m,v;for(e=e.replace(/^ +$/gm,"");e;)if((i=this.rules.newline.exec(e))&&(e=e.substring(i[0].length),i[0].length>1&&this.tokens.push({type:"space"})),i=this.rules.code.exec(e)){const t=this.tokens[this.tokens.length-1];e=e.substring(i[0].length),t&&"paragraph"===t.type?t.text+="\n"+i[0].trimRight():(i=i[0].replace(/^ {4}/gm,""),this.tokens.push({type:"code",codeBlockStyle:"indented",text:this.options.pedantic?i:fi(i,"\n")}))}else if(i=this.rules.fences.exec(e))e=e.substring(i[0].length),this.tokens.push({type:"code",lang:i[2]?i[2].trim():i[2],text:i[3]||""});else if(i=this.rules.heading.exec(e))e=e.substring(i[0].length),this.tokens.push({type:"heading",depth:i[1].length,text:i[2]});else if((i=this.rules.nptable.exec(e))&&(a={type:"table",header:di(i[1].replace(/^ *| *\| *$/g,"")),align:i[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:i[3]?i[3].replace(/\n$/,"").split("\n"):[]},a.header.length===a.align.length)){for(e=e.substring(i[0].length),f=0;f<a.align.length;f++)/^ *-+: *$/.test(a.align[f])?a.align[f]="right":/^ *:-+: *$/.test(a.align[f])?a.align[f]="center":/^ *:-+ *$/.test(a.align[f])?a.align[f]="left":a.align[f]=null;for(f=0;f<a.cells.length;f++)a.cells[f]=di(a.cells[f],a.header.length);this.tokens.push(a)}else if(i=this.rules.hr.exec(e))e=e.substring(i[0].length),this.tokens.push({type:"hr"});else if(i=this.rules.blockquote.exec(e))e=e.substring(i[0].length),this.tokens.push({type:"blockquote_start"}),i=i[0].replace(/^ *> ?/gm,""),this.token(i,t),this.tokens.push({type:"blockquote_end"});else if(i=this.rules.list.exec(e)){for(e=e.substring(i[0].length),o=i[2],g=o.length>1,c={type:"list_start",ordered:g,start:g?+o:"",loose:!1},this.tokens.push(c),i=i[0].match(this.rules.item),u=[],n=!1,p=i.length,f=0;f<p;f++)a=i[f],h=a.length,a=a.replace(/^ *([*+-]|\d+\.) */,""),~a.indexOf("\n ")&&(h-=a.length,a=this.options.pedantic?a.replace(/^ {1,4}/gm,""):a.replace(new RegExp("^ {1,"+h+"}","gm"),"")),f!==p-1&&(s=hi.bullet.exec(i[f+1])[0],(o.length>1?1===s.length:s.length>1||this.options.smartLists&&s!==o)&&(e=i.slice(f+1).join("\n")+e,f=p-1)),r=n||/\n\n(?!\s*$)/.test(a),f!==p-1&&(n="\n"===a.charAt(a.length-1),r||(r=n)),r&&(c.loose=!0),m=/^\[[ xX]\] /.test(a),v=void 0,m&&(v=" "!==a[1],a=a.replace(/^\[[ xX]\] +/,"")),l={type:"list_item_start",task:m,checked:v,loose:r},u.push(l),this.tokens.push(l),this.token(a,!1),this.tokens.push({type:"list_item_end"});if(c.loose)for(p=u.length,f=0;f<p;f++)u[f].loose=!0;this.tokens.push({type:"list_end"})}else if(i=this.rules.html.exec(e))e=e.substring(i[0].length),this.tokens.push({type:this.options.sanitize?"paragraph":"html",pre:!this.options.sanitizer&&("pre"===i[1]||"script"===i[1]||"style"===i[1]),text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(i[0]):pi(i[0]):i[0]});else if(t&&(i=this.rules.def.exec(e)))e=e.substring(i[0].length),i[3]&&(i[3]=i[3].substring(1,i[3].length-1)),d=i[1].toLowerCase().replace(/\s+/g," "),this.tokens.links[d]||(this.tokens.links[d]={href:i[2],title:i[3]});else if((i=this.rules.table.exec(e))&&(a={type:"table",header:di(i[1].replace(/^ *| *\| *$/g,"")),align:i[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:i[3]?i[3].replace(/\n$/,"").split("\n"):[]},a.header.length===a.align.length)){for(e=e.substring(i[0].length),f=0;f<a.align.length;f++)/^ *-+: *$/.test(a.align[f])?a.align[f]="right":/^ *:-+: *$/.test(a.align[f])?a.align[f]="center":/^ *:-+ *$/.test(a.align[f])?a.align[f]="left":a.align[f]=null;for(f=0;f<a.cells.length;f++)a.cells[f]=di(a.cells[f].replace(/^ *\| *| *\| *$/g,""),a.header.length);this.tokens.push(a)}else if(i=this.rules.lheading.exec(e))e=e.substring(i[0].length),this.tokens.push({type:"heading",depth:"="===i[2].charAt(0)?1:2,text:i[1]});else if(t&&(i=this.rules.paragraph.exec(e)))e=e.substring(i[0].length),this.tokens.push({type:"paragraph",text:"\n"===i[1].charAt(i[1].length-1)?i[1].slice(0,-1):i[1]});else if(i=this.rules.text.exec(e))e=e.substring(i[0].length),this.tokens.push({type:"text",text:i[0]});else if(e)throw new Error("Infinite loop on byte: "+e.charCodeAt(0));return this.tokens}};const{defaults:mi}=Nr,{cleanUrl:vi,escape:yi}=ri;var bi=class{constructor(e){this.options=e||mi}code(e,t,n){const r=(t||"").match(/\S*/)[0];if(this.options.highlight){const t=this.options.highlight(e,r);null!=t&&t!==e&&(n=!0,e=t)}return r?'<pre><code class="'+this.options.langPrefix+yi(r,!0)+'">'+(n?e:yi(e,!0))+"</code></pre>\n":"<pre><code>"+(n?e:yi(e,!0))+"</code></pre>"}blockquote(e){return"<blockquote>\n"+e+"</blockquote>\n"}html(e){return e}heading(e,t,n,r){return this.options.headerIds?"<h"+t+' id="'+this.options.headerPrefix+r.slug(n)+'">'+e+"</h"+t+">\n":"<h"+t+">"+e+"</h"+t+">\n"}hr(){return this.options.xhtml?"<hr/>\n":"<hr>\n"}list(e,t,n){const r=t?"ol":"ul";return"<"+r+(t&&1!==n?' start="'+n+'"':"")+">\n"+e+"</"+r+">\n"}listitem(e){return"<li>"+e+"</li>\n"}checkbox(e){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "}paragraph(e){return"<p>"+e+"</p>\n"}table(e,t){return t&&(t="<tbody>"+t+"</tbody>"),"<table>\n<thead>\n"+e+"</thead>\n"+t+"</table>\n"}tablerow(e){return"<tr>\n"+e+"</tr>\n"}tablecell(e,t){const n=t.header?"th":"td";return(t.align?"<"+n+' align="'+t.align+'">':"<"+n+">")+e+"</"+n+">\n"}strong(e){return"<strong>"+e+"</strong>"}em(e){return"<em>"+e+"</em>"}codespan(e){return"<code>"+e+"</code>"}br(){return this.options.xhtml?"<br/>":"<br>"}del(e){return"<del>"+e+"</del>"}link(e,t,n){if(null===(e=vi(this.options.sanitize,this.options.baseUrl,e)))return n;let r='<a href="'+yi(e)+'"';return t&&(r+=' title="'+t+'"'),r+=">"+n+"</a>",r}image(e,t,n){if(null===(e=vi(this.options.sanitize,this.options.baseUrl,e)))return n;let r='<img src="'+e+'" alt="'+n+'"';return t&&(r+=' title="'+t+'"'),r+=this.options.xhtml?"/>":">",r}text(e){return e}},wi=class{constructor(){this.seen={}}slug(e){let t=e.toLowerCase().trim().replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-");if(this.seen.hasOwnProperty(t)){const e=t;do{this.seen[e]++,t=e+"-"+this.seen[e]}while(this.seen.hasOwnProperty(t))}return this.seen[t]=0,t}};const{defaults:xi}=Nr,{inline:_i}=ui,{findClosingBracket:ki,escape:$i}=ri;var Ai=class e{constructor(e,t){if(this.options=t||xi,this.links=e,this.rules=_i.normal,this.options.renderer=this.options.renderer||new bi,this.renderer=this.options.renderer,this.renderer.options=this.options,!this.links)throw new Error("Tokens array requires a `links` property.");this.options.pedantic?this.rules=_i.pedantic:this.options.gfm&&(this.options.breaks?this.rules=_i.breaks:this.rules=_i.gfm)}static get rules(){return _i}static output(t,n,r){return new e(n,r).output(t)}output(t){let n,r,i,o,s,a,c="";for(;t;)if(s=this.rules.escape.exec(t))t=t.substring(s[0].length),c+=$i(s[1]);else if(s=this.rules.tag.exec(t))!this.inLink&&/^<a /i.test(s[0])?this.inLink=!0:this.inLink&&/^<\/a>/i.test(s[0])&&(this.inLink=!1),!this.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(s[0])?this.inRawBlock=!0:this.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(s[0])&&(this.inRawBlock=!1),t=t.substring(s[0].length),c+=this.options.sanitize?this.options.sanitizer?this.options.sanitizer(s[0]):$i(s[0]):s[0];else if(s=this.rules.link.exec(t)){const r=ki(s[2],"()");if(r>-1){const e=(0===s[0].indexOf("!")?5:4)+s[1].length+r;s[2]=s[2].substring(0,r),s[0]=s[0].substring(0,e).trim(),s[3]=""}t=t.substring(s[0].length),this.inLink=!0,i=s[2],this.options.pedantic?(n=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(i),n?(i=n[1],o=n[3]):o=""):o=s[3]?s[3].slice(1,-1):"",i=i.trim().replace(/^<([\s\S]*)>$/,"$1"),c+=this.outputLink(s,{href:e.escapes(i),title:e.escapes(o)}),this.inLink=!1}else if((s=this.rules.reflink.exec(t))||(s=this.rules.nolink.exec(t))){if(t=t.substring(s[0].length),n=(s[2]||s[1]).replace(/\s+/g," "),n=this.links[n.toLowerCase()],!n||!n.href){c+=s[0].charAt(0),t=s[0].substring(1)+t;continue}this.inLink=!0,c+=this.outputLink(s,n),this.inLink=!1}else if(s=this.rules.strong.exec(t))t=t.substring(s[0].length),c+=this.renderer.strong(this.output(s[4]||s[3]||s[2]||s[1]));else if(s=this.rules.em.exec(t))t=t.substring(s[0].length),c+=this.renderer.em(this.output(s[6]||s[5]||s[4]||s[3]||s[2]||s[1]));else if(s=this.rules.code.exec(t))t=t.substring(s[0].length),c+=this.renderer.codespan($i(s[2].trim(),!0));else if(s=this.rules.br.exec(t))t=t.substring(s[0].length),c+=this.renderer.br();else if(s=this.rules.del.exec(t))t=t.substring(s[0].length),c+=this.renderer.del(this.output(s[1]));else if(s=this.rules.autolink.exec(t))t=t.substring(s[0].length),"@"===s[2]?(r=$i(this.mangle(s[1])),i="mailto:"+r):(r=$i(s[1]),i=r),c+=this.renderer.link(i,null,r);else if(this.inLink||!(s=this.rules.url.exec(t))){if(s=this.rules.text.exec(t))t=t.substring(s[0].length),this.inRawBlock?c+=this.renderer.text(this.options.sanitize?this.options.sanitizer?this.options.sanitizer(s[0]):$i(s[0]):s[0]):c+=this.renderer.text($i(this.smartypants(s[0])));else if(t)throw new Error("Infinite loop on byte: "+t.charCodeAt(0))}else{if("@"===s[2])r=$i(s[0]),i="mailto:"+r;else{do{a=s[0],s[0]=this.rules._backpedal.exec(s[0])[0]}while(a!==s[0]);r=$i(s[0]),i="www."===s[1]?"http://"+r:r}t=t.substring(s[0].length),c+=this.renderer.link(i,null,r)}return c}static escapes(t){return t?t.replace(e.rules._escapes,"$1"):t}outputLink(e,t){const n=t.href,r=t.title?$i(t.title):null;return"!"!==e[0].charAt(0)?this.renderer.link(n,r,this.output(e[1])):this.renderer.image(n,r,$i(e[1]))}smartypants(e){return this.options.smartypants?e.replace(/---/g,"—").replace(/--/g,"–").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1‘").replace(/'/g,"’").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1“").replace(/"/g,"”").replace(/\.{3}/g,"…"):e}mangle(e){if(!this.options.mangle)return e;const t=e.length;let n,r="",i=0;for(;i<t;i++)n=e.charCodeAt(i),Math.random()>.5&&(n="x"+n.toString(16)),r+="&#"+n+";";return r}},Pi=class{strong(e){return e}em(e){return e}codespan(e){return e}del(e){return e}text(e){return e}link(e,t,n){return""+n}image(e,t,n){return""+n}br(){return""}};const{defaults:Ti}=Nr,{merge:Ei,unescape:Si}=ri;var Oi=class e{constructor(e){this.tokens=[],this.token=null,this.options=e||Ti,this.options.renderer=this.options.renderer||new bi,this.renderer=this.options.renderer,this.renderer.options=this.options,this.slugger=new wi}static parse(t,n){return new e(n).parse(t)}parse(e){this.inline=new Ai(e.links,this.options),this.inlineText=new Ai(e.links,Ei({},this.options,{renderer:new Pi})),this.tokens=e.reverse();let t="";for(;this.next();)t+=this.tok();return t}next(){return this.token=this.tokens.pop(),this.token}peek(){return this.tokens[this.tokens.length-1]||0}parseText(){let e=this.token.text;for(;"text"===this.peek().type;)e+="\n"+this.next().text;return this.inline.output(e)}tok(){let e="";switch(this.token.type){case"space":return"";case"hr":return this.renderer.hr();case"heading":return this.renderer.heading(this.inline.output(this.token.text),this.token.depth,Si(this.inlineText.output(this.token.text)),this.slugger);case"code":return this.renderer.code(this.token.text,this.token.lang,this.token.escaped);case"table":{let t,n,r,i,o="";for(r="",t=0;t<this.token.header.length;t++)r+=this.renderer.tablecell(this.inline.output(this.token.header[t]),{header:!0,align:this.token.align[t]});for(o+=this.renderer.tablerow(r),t=0;t<this.token.cells.length;t++){for(n=this.token.cells[t],r="",i=0;i<n.length;i++)r+=this.renderer.tablecell(this.inline.output(n[i]),{header:!1,align:this.token.align[i]});e+=this.renderer.tablerow(r)}return this.renderer.table(o,e)}case"blockquote_start":for(e="";"blockquote_end"!==this.next().type;)e+=this.tok();return this.renderer.blockquote(e);case"list_start":{e="";const t=this.token.ordered,n=this.token.start;for(;"list_end"!==this.next().type;)e+=this.tok();return this.renderer.list(e,t,n)}case"list_item_start":{e="";const t=this.token.loose,n=this.token.checked,r=this.token.task;if(this.token.task)if(t)if("text"===this.peek().type){const e=this.peek();e.text=this.renderer.checkbox(n)+" "+e.text}else this.tokens.push({type:"text",text:this.renderer.checkbox(n)});else e+=this.renderer.checkbox(n);for(;"list_item_end"!==this.next().type;)e+=t||"text"!==this.token.type?this.tok():this.parseText();return this.renderer.listitem(e,r,n)}case"html":return this.renderer.html(this.token.text);case"paragraph":return this.renderer.paragraph(this.inline.output(this.token.text));case"text":return this.renderer.paragraph(this.parseText());default:{const e='Token with "'+this.token.type+'" type was not found.';if(!this.options.silent)throw new Error(e);console.log(e)}}}};const{merge:Di,checkSanitizeDeprecation:Ii,escape:zi}=ri,{getDefaults:Ci,changeDefaults:Mi,defaults:ji}=Nr;function Ri(e,t,n){if(null==e)throw new Error("marked(): input parameter is undefined or null");if("string"!=typeof e)throw new Error("marked(): input parameter is of type "+Object.prototype.toString.call(e)+", string expected");if(n||"function"==typeof t){n||(n=t,t=null),t=Di({},Ri.defaults,t||{}),Ii(t);const r=t.highlight;let i,o,s=0;try{i=gi.lex(e,t)}catch(e){return n(e)}o=i.length;const a=function(e){if(e)return t.highlight=r,n(e);let o;try{o=Oi.parse(i,t)}catch(t){e=t}return t.highlight=r,e?n(e):n(null,o)};if(!r||r.length<3)return a();if(delete t.highlight,!o)return a();for(;s<i.length;s++)!function(e){"code"!==e.type?--o||a():r(e.text,e.lang,(function(t,n){return t?a(t):null==n||n===e.text?--o||a():(e.text=n,e.escaped=!0,void(--o||a()))}))}(i[s])}else try{return t=Di({},Ri.defaults,t||{}),Ii(t),Oi.parse(gi.lex(e,t),t)}catch(e){if(e.message+="\nPlease report this to https://github.com/markedjs/marked.",(t||Ri.defaults).silent)return"<p>An error occurred:</p><pre>"+zi(e.message+"",!0)+"</pre>";throw e}}Ri.options=Ri.setOptions=function(e){return Di(Ri.defaults,e),Mi(Ri.defaults),Ri},Ri.getDefaults=Ci,Ri.defaults=ji,Ri.Parser=Oi,Ri.parser=Oi.parse,Ri.Renderer=bi,Ri.TextRenderer=Pi,Ri.Lexer=gi,Ri.lexer=gi.lex,Ri.InlineLexer=Ai,Ri.inlineLexer=Ai.output,Ri.Slugger=wi,Ri.parse=Ri;var Li=Ri;const Ni=Lr((function(e,t){e.exports=function(){var e=Object.hasOwnProperty,t=Object.setPrototypeOf,n=Object.isFrozen,r=Object.keys,i=Object.freeze,o=Object.seal,s="undefined"!=typeof Reflect&&Reflect,a=s.apply,c=s.construct;a||(a=function(e,t,n){return e.apply(t,n)}),i||(i=function(e){return e}),o||(o=function(e){return e}),c||(c=function(e,t){return new(Function.prototype.bind.apply(e,[null].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(t))))});var u=k(Array.prototype.forEach),l=k(Array.prototype.indexOf),h=k(Array.prototype.join),f=k(Array.prototype.pop),d=k(Array.prototype.push),p=k(Array.prototype.slice),g=k(String.prototype.toLowerCase),m=k(String.prototype.match),v=k(String.prototype.replace),y=k(String.prototype.indexOf),b=k(String.prototype.trim),w=k(RegExp.prototype.test),x=$(RegExp),_=$(TypeError);function k(e){return function(t){for(var n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return a(e,t,r)}}function $(e){return function(){for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];return c(e,n)}}function A(e,r){t&&t(e,null);for(var i=r.length;i--;){var o=r[i];if("string"==typeof o){var s=g(o);s!==o&&(n(r)||(r[i]=s),o=s)}e[o]=!0}return e}function P(t){var n={},r=void 0;for(r in t)a(e,t,[r])&&(n[r]=t[r]);return n}var T=i(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),E=i(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","audio","canvas","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","video","view","vkern"]),S=i(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),O=i(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),D=i(["#text"]),I=i(["accept","action","align","alt","autocomplete","background","bgcolor","border","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","coords","crossorigin","datetime","default","dir","disabled","download","enctype","face","for","headers","height","hidden","high","href","hreflang","id","integrity","ismap","label","lang","list","loop","low","max","maxlength","media","method","min","minlength","multiple","name","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","type","usemap","valign","value","width","xmlns"]),z=i(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","tabindex","targetx","targety","transform","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),C=i(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),M=i(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),j=o(/\{\{[\s\S]*|[\s\S]*\}\}/gm),R=o(/<%[\s\S]*|[\s\S]*%>/gm),L=o(/^data-[\-\w.\u00B7-\uFFFF]/),N=o(/^aria-[\-\w]+$/),F=o(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),W=o(/^(?:\w+script|data):/i),q=o(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g),B="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function K(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var H=function(){return"undefined"==typeof window?null:window},U=function(e,t){if("object"!==(void 0===e?"undefined":B(e))||"function"!=typeof e.createPolicy)return null;var n=null;t.currentScript&&t.currentScript.hasAttribute("data-tt-policy-suffix")&&(n=t.currentScript.getAttribute("data-tt-policy-suffix"));var r="dompurify"+(n?"#"+n:"");try{return e.createPolicy(r,{createHTML:function(e){return e}})}catch(e){return console.warn("TrustedTypes policy "+r+" could not be created."),null}};return function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:H(),n=function(t){return e(t)};if(n.version="2.0.8",n.removed=[],!t||!t.document||9!==t.document.nodeType)return n.isSupported=!1,n;var o=t.document,s=!1,a=!1,c=t.document,k=t.DocumentFragment,$=t.HTMLTemplateElement,Z=t.Node,V=t.NodeFilter,G=t.NamedNodeMap,Y=void 0===G?t.NamedNodeMap||t.MozNamedAttrMap:G,X=t.Text,Q=t.Comment,J=t.DOMParser,ee=t.trustedTypes;if("function"==typeof $){var te=c.createElement("template");te.content&&te.content.ownerDocument&&(c=te.content.ownerDocument)}var ne=U(ee,o),re=ne?ne.createHTML(""):"",ie=c,oe=ie.implementation,se=ie.createNodeIterator,ae=ie.getElementsByTagName,ce=ie.createDocumentFragment,ue=o.importNode,le={};n.isSupported=oe&&void 0!==oe.createHTMLDocument&&9!==c.documentMode;var he=j,fe=R,de=L,pe=N,ge=W,me=q,ve=F,ye=null,be=A({},[].concat(K(T),K(E),K(S),K(O),K(D))),we=null,xe=A({},[].concat(K(I),K(z),K(C),K(M))),_e=null,ke=null,$e=!0,Ae=!0,Pe=!1,Te=!1,Ee=!1,Se=!1,Oe=!1,De=!1,Ie=!1,ze=!1,Ce=!1,Me=!1,je=!0,Re=!0,Le=!1,Ne={},Fe=A({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","plaintext","script","style","svg","template","thead","title","video","xmp"]),We=A({},["audio","video","img","source","image"]),qe=null,Be=A({},["alt","class","for","id","label","name","pattern","placeholder","summary","title","value","style","xmlns"]),Ke=null,He=c.createElement("form"),Ue=function(e){Ke&&Ke===e||(e&&"object"===(void 0===e?"undefined":B(e))||(e={}),ye="ALLOWED_TAGS"in e?A({},e.ALLOWED_TAGS):be,we="ALLOWED_ATTR"in e?A({},e.ALLOWED_ATTR):xe,qe="ADD_URI_SAFE_ATTR"in e?A(P(Be),e.ADD_URI_SAFE_ATTR):Be,_e="FORBID_TAGS"in e?A({},e.FORBID_TAGS):{},ke="FORBID_ATTR"in e?A({},e.FORBID_ATTR):{},Ne="USE_PROFILES"in e&&e.USE_PROFILES,$e=!1!==e.ALLOW_ARIA_ATTR,Ae=!1!==e.ALLOW_DATA_ATTR,Pe=e.ALLOW_UNKNOWN_PROTOCOLS||!1,Te=e.SAFE_FOR_JQUERY||!1,Ee=e.SAFE_FOR_TEMPLATES||!1,Se=e.WHOLE_DOCUMENT||!1,Ie=e.RETURN_DOM||!1,ze=e.RETURN_DOM_FRAGMENT||!1,Ce=e.RETURN_DOM_IMPORT||!1,Me=e.RETURN_TRUSTED_TYPE||!1,De=e.FORCE_BODY||!1,je=!1!==e.SANITIZE_DOM,Re=!1!==e.KEEP_CONTENT,Le=e.IN_PLACE||!1,ve=e.ALLOWED_URI_REGEXP||ve,Ee&&(Ae=!1),ze&&(Ie=!0),Ne&&(ye=A({},[].concat(K(D))),we=[],!0===Ne.html&&(A(ye,T),A(we,I)),!0===Ne.svg&&(A(ye,E),A(we,z),A(we,M)),!0===Ne.svgFilters&&(A(ye,S),A(we,z),A(we,M)),!0===Ne.mathMl&&(A(ye,O),A(we,C),A(we,M))),e.ADD_TAGS&&(ye===be&&(ye=P(ye)),A(ye,e.ADD_TAGS)),e.ADD_ATTR&&(we===xe&&(we=P(we)),A(we,e.ADD_ATTR)),e.ADD_URI_SAFE_ATTR&&A(qe,e.ADD_URI_SAFE_ATTR),Re&&(ye["#text"]=!0),Se&&A(ye,["html","head","body"]),ye.table&&(A(ye,["tbody"]),delete _e.tbody),i&&i(e),Ke=e)},Ze=function(e){d(n.removed,{element:e});try{e.parentNode.removeChild(e)}catch(t){e.outerHTML=re}},Ve=function(e,t){try{d(n.removed,{attribute:t.getAttributeNode(e),from:t})}catch(e){d(n.removed,{attribute:null,from:t})}t.removeAttribute(e)},Ge=function(e){var t=void 0,n=void 0;if(De)e="<remove></remove>"+e;else{var r=m(e,/^[\s]+/);n=r&&r[0]}var i=ne?ne.createHTML(e):e;if(s)try{t=(new J).parseFromString(i,"text/html")}catch(e){}if(a&&A(_e,["title"]),!t||!t.documentElement){var o=(t=oe.createHTMLDocument("")).body;o.parentNode.removeChild(o.parentNode.firstElementChild),o.outerHTML=i}return e&&n&&t.body.insertBefore(c.createTextNode(n),t.body.childNodes[0]||null),ae.call(t,Se?"html":"body")[0]};n.isSupported&&(function(){try{Ge('<svg><p><textarea><img src="</textarea><img src=x abc=1//">').querySelector("svg img")&&(s=!0)}catch(e){}}(),function(){try{var e=Ge("<x/><title>&lt;/title&gt;&lt;img&gt;");w(/<\/title/,e.querySelector("title").innerHTML)&&(a=!0)}catch(e){}}());var Ye=function(e){return se.call(e.ownerDocument||e,e,V.SHOW_ELEMENT|V.SHOW_COMMENT|V.SHOW_TEXT,(function(){return V.FILTER_ACCEPT}),!1)},Xe=function(e){return!(e instanceof X||e instanceof Q||"string"==typeof e.nodeName&&"string"==typeof e.textContent&&"function"==typeof e.removeChild&&e.attributes instanceof Y&&"function"==typeof e.removeAttribute&&"function"==typeof e.setAttribute&&"string"==typeof e.namespaceURI)},Qe=function(e){return"object"===(void 0===Z?"undefined":B(Z))?e instanceof Z:e&&"object"===(void 0===e?"undefined":B(e))&&"number"==typeof e.nodeType&&"string"==typeof e.nodeName},Je=function(e,t,r){le[e]&&u(le[e],(function(e){e.call(n,t,r,Ke)}))},et=function(e){var t=void 0;if(Je("beforeSanitizeElements",e,null),Xe(e))return Ze(e),!0;var r=g(e.nodeName);if(Je("uponSanitizeElement",e,{tagName:r,allowedTags:ye}),("svg"===r||"math"===r)&&0!==e.querySelectorAll("p, br").length)return Ze(e),!0;if(!ye[r]||_e[r]){if(Re&&!Fe[r]&&"function"==typeof e.insertAdjacentHTML)try{var i=e.innerHTML;e.insertAdjacentHTML("AfterEnd",ne?ne.createHTML(i):i)}catch(e){}return Ze(e),!0}return"noscript"===r&&w(/<\/noscript/i,e.innerHTML)?(Ze(e),!0):"noembed"===r&&w(/<\/noembed/i,e.innerHTML)?(Ze(e),!0):(!Te||e.firstElementChild||e.content&&e.content.firstElementChild||!w(/</g,e.textContent)||(d(n.removed,{element:e.cloneNode()}),e.innerHTML?e.innerHTML=v(e.innerHTML,/</g,"&lt;"):e.innerHTML=v(e.textContent,/</g,"&lt;")),Ee&&3===e.nodeType&&(t=e.textContent,t=v(t,he," "),t=v(t,fe," "),e.textContent!==t&&(d(n.removed,{element:e.cloneNode()}),e.textContent=t)),Je("afterSanitizeElements",e,null),!1)},tt=function(e,t,n){if(je&&("id"===t||"name"===t)&&(n in c||n in He))return!1;if(Ae&&w(de,t));else if($e&&w(pe,t));else{if(!we[t]||ke[t])return!1;if(qe[t]);else if(w(ve,v(n,me,"")));else if("src"!==t&&"xlink:href"!==t&&"href"!==t||"script"===e||0!==y(n,"data:")||!We[e])if(Pe&&!w(ge,v(n,me,"")));else if(n)return!1}return!0},nt=function(e){var t=void 0,i=void 0,o=void 0,s=void 0,a=void 0;Je("beforeSanitizeAttributes",e,null);var c=e.attributes;if(c){var u={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:we};for(a=c.length;a--;){var d=t=c[a],m=d.name,y=d.namespaceURI;if(i=b(t.value),o=g(m),u.attrName=o,u.attrValue=i,u.keepAttr=!0,u.forceKeepAttr=void 0,Je("uponSanitizeAttribute",e,u),i=u.attrValue,!u.forceKeepAttr){if("name"===o&&"IMG"===e.nodeName&&c.id)s=c.id,c=p(c,[]),Ve("id",e),Ve(m,e),l(c,s)>a&&e.setAttribute("id",s.value);else{if("INPUT"===e.nodeName&&"type"===o&&"file"===i&&u.keepAttr&&(we[o]||!ke[o]))continue;"id"===m&&e.setAttribute(m,""),Ve(m,e)}if(u.keepAttr)if(Te&&w(/\/>/i,i))Ve(m,e);else if(w(/svg|math/i,e.namespaceURI)&&w(x("</("+h(r(Fe),"|")+")","i"),i))Ve(m,e);else{Ee&&(i=v(i,he," "),i=v(i,fe," "));var _=e.nodeName.toLowerCase();if(tt(_,o,i))try{y?e.setAttributeNS(y,m,i):e.setAttribute(m,i),f(n.removed)}catch(e){}}}}Je("afterSanitizeAttributes",e,null)}},rt=function e(t){var n=void 0,r=Ye(t);for(Je("beforeSanitizeShadowDOM",t,null);n=r.nextNode();)Je("uponSanitizeShadowNode",n,null),et(n)||(n.content instanceof k&&e(n.content),nt(n));Je("afterSanitizeShadowDOM",t,null)};return n.sanitize=function(e,r){var i=void 0,s=void 0,a=void 0,c=void 0,u=void 0;if(e||(e="\x3c!--\x3e"),"string"!=typeof e&&!Qe(e)){if("function"!=typeof e.toString)throw _("toString is not a function");if("string"!=typeof(e=e.toString()))throw _("dirty is not a string, aborting")}if(!n.isSupported){if("object"===B(t.toStaticHTML)||"function"==typeof t.toStaticHTML){if("string"==typeof e)return t.toStaticHTML(e);if(Qe(e))return t.toStaticHTML(e.outerHTML)}return e}if(Oe||Ue(r),n.removed=[],"string"==typeof e&&(Le=!1),Le);else if(e instanceof Z)1===(s=(i=Ge("\x3c!--\x3e")).ownerDocument.importNode(e,!0)).nodeType&&"BODY"===s.nodeName?i=s:"HTML"===s.nodeName?i=s:i.appendChild(s);else{if(!Ie&&!Ee&&!Se&&Me&&-1===e.indexOf("<"))return ne?ne.createHTML(e):e;if(!(i=Ge(e)))return Ie?null:re}i&&De&&Ze(i.firstChild);for(var l=Ye(Le?e:i);a=l.nextNode();)3===a.nodeType&&a===c||et(a)||(a.content instanceof k&&rt(a.content),nt(a),c=a);if(c=null,Le)return e;if(Ie){if(ze)for(u=ce.call(i.ownerDocument);i.firstChild;)u.appendChild(i.firstChild);else u=i;return Ce&&(u=ue.call(o,u,!0)),u}var h=Se?i.outerHTML:i.innerHTML;return Ee&&(h=v(h,he," "),h=v(h,fe," ")),ne&&Me?ne.createHTML(h):h},n.setConfig=function(e){Ue(e),Oe=!0},n.clearConfig=function(){Ke=null,Oe=!1},n.isValidAttribute=function(e,t,n){Ke||Ue({});var r=g(e),i=g(t);return tt(r,i,n)},n.addHook=function(e,t){"function"==typeof t&&(le[e]=le[e]||[],d(le[e],t))},n.removeHook=function(e){le[e]&&f(le[e])},n.removeHooks=function(e){le[e]&&(le[e]=[])},n.removeAllHooks=function(){le={}},n}()}()}))(window);function Fi(e){return Li(Ni.sanitize(e))}function Wi(e){var t,n,r=Fi(e.$_data);return{c(){S(t=$("article"),"class","svelte-1ovrvdo"),n=E(t,"click",e.click_handler)},m(e,n){x(e,t,n),t.innerHTML=r},p(e,n){e.$_data&&r!==(r=Fi(n.$_data))&&(t.innerHTML=r)},d(e){e&&_(t),n()}}}function qi(e){var t,n;return{c(){(t=$("textarea")).autofocus=!0,S(t,"class","svelte-1ovrvdo"),n=[E(t,"input",e.textarea_input_handler),E(t,"change",e.disableEditIfNoFocus),E(t,"blur",e.blur_handler)]},m(n,r){x(n,t,r),t.value=e.$_data,t.focus()},p(e,n){e.$_data&&(t.value=n.$_data)},d(e){e&&_(t),o(n)}}}function Bi(t){var n;function r(e){return e.editing?qi:Wi}var i=r(t),o=i(t);return{c(){o.c(),n=T()},m(e,t){o.m(e,t),x(e,n,t)},p(e,t){i===(i=r(t))&&o?o.p(e,t):(o.d(1),(o=i(t))&&(o.c(),o.m(n.parentNode,n)))},i:e,o:e,d(e){o.d(e),e&&_(n)}}}function Ki(e,t,n){let r,{_data:i}=t;l(e,i,e=>{r=e,n("$_data",r)});let o=!0;return e.$set=e=>{"_data"in e&&n("_data",i=e._data)},{_data:i,editing:o,disableEditIfNoFocus:()=>{this!==document.activeElement&&n("editing",o=!1)},$_data:r,textarea_input_handler:function(){i.set(this.value)},blur_handler:function(){const e=o=!1;return n("editing",o),e},click_handler:function(){const e=o=!0;return n("editing",o),e}}}class Hi extends ge{constructor(e){super(),pe(this,e,Ki,Bi,a,["_data"])}}function Ui(t){var n,r;return{c(){S(n=$("textarea"),"class","svelte-19wb5tu"),r=E(n,"input",t.textarea_input_handler)},m(e,r){x(e,n,r),n.value=t.$_data},p(e,t){e.$_data&&(n.value=t.$_data)},i:e,o:e,d(e){e&&_(n),r()}}}function Zi(e){var t,n=new Hi({props:{_data:e._data}});return{c(){n.$$.fragment.c()},m(e,r){he(n,e,r),t=!0},p(e,t){var r={};e._data&&(r._data=t._data),n.$set(r)},i(e){t||(oe(n.$$.fragment,e),t=!0)},o(e){se(n.$$.fragment,e),t=!1},d(e){fe(n,e)}}}function Vi(e){var t,n,r,i,o=[Zi,Ui],s=[];function a(e){return"Text"===e.type?0:1}return t=a(e),n=s[t]=o[t](e),{c(){n.c(),r=T()},m(e,n){s[t].m(e,n),x(e,r,n),i=!0},p(e,i){var c=t;(t=a(i))===c?s[t].p(e,i):(re(),se(s[c],1,1,()=>{s[c]=null}),ie(),(n=s[t])||(n=s[t]=o[t](i)).c(),oe(n,1),n.m(r.parentNode,r))},i(e){i||(oe(n),i=!0)},o(e){se(n),i=!1},d(e){s[t].d(e),e&&_(r)}}}function Gi(e,t,n){let r,i,{_data:o}=t;return l(e,o,e=>{r=e,n("$_data",r)}),W(()=>{var e;n("type",i=(e=r)&&e.length>0?"Text":void 0)}),e.$set=e=>{"_data"in e&&n("_data",o=e._data)},{_data:o,type:i,$_data:r,textarea_input_handler:function(){o.set(this.value)}}}class Yi extends ge{constructor(e){super(),pe(this,e,Gi,Vi,a,["_data"])}}function Xi(e){var t,n,r;return{c(){t=$("h2"),n=A(e.$_title),S(t,"class","svelte-1raairv"),r=E(t,"click",e.click_handler)},m(e,r){x(e,t,r),w(t,n)},p(e,t){e.$_title&&O(n,t.$_title)},d(e){e&&_(t),r()}}}function Qi(e){var t,n;return{c(){S(t=$("input"),"type","text"),t.autofocus=!0,S(t,"class","svelte-1raairv"),n=[E(t,"input",e.input_input_handler),E(t,"blur",e.blur_handler),E(t,"keypress",xr)]},m(n,r){x(n,t,r),t.value=e.$_title,t.focus()},p(e,n){e.$_title&&t.value!==n.$_title&&(t.value=n.$_title)},d(e){e&&_(t),o(n)}}}function Ji(t){var n,r,i;return{c(){n=$("div"),r=A(t.type),i=A(" Widget type not yet implemented"),S(n,"class","svelte-1raairv")},m(e,t){x(e,n,t),w(n,r),w(n,i)},p:e,i:e,o:e,d(e){e&&_(n)}}}function eo(e){var t,n=new Yi({props:{_data:e._data}});return{c(){n.$$.fragment.c()},m(e,r){he(n,e,r),t=!0},p(e,t){var r={};e._data&&(r._data=t._data),n.$set(r)},i(e){t||(oe(n.$$.fragment,e),t=!0)},o(e){se(n.$$.fragment,e),t=!1},d(e){fe(n,e)}}}function to(e){var t,n,r,i,o,s,a,c;function u(e){return e.editingTitle?Qi:Xi}var l=u(e),h=l(e),f=[eo,Ji],d=[];function p(e){return"Sticky"===e.type?0:1}r=p(e),i=d[r]=f[r](e);var g=new mr({});return g.$on("trash",e.removeSelf),{c(){t=$("div"),h.c(),n=P(),i.c(),o=P(),s=$("span"),g.$$.fragment.c(),S(s,"class","svelte-1raairv"),S(t,"class","svelte-1raairv")},m(e,i){x(e,t,i),h.m(t,null),w(t,n),d[r].m(t,null),w(t,o),w(t,s),he(g,s,null),c=!0},p(e,s){l===(l=u(s))&&h?h.p(e,s):(h.d(1),(h=l(s))&&(h.c(),h.m(t,n)));var a=r;(r=p(s))===a?d[r].p(e,s):(re(),se(d[a],1,1,()=>{d[a]=null}),ie(),(i=d[r])||(i=d[r]=f[r](s)).c(),oe(i,1),i.m(t,o))},i(e){c||(oe(i),oe(g.$$.fragment,e),X(()=>{a||(a=ce(t,no,{duration:300,easing:Rr},!0)),a.run(1)}),c=!0)},o(e){se(i),se(g.$$.fragment,e),a||(a=ce(t,no,{duration:300,easing:Rr},!1)),a.run(0),c=!1},d(e){e&&_(t),h.d(),d[r].d(),fe(g),e&&a&&a.end()}}}function no(e,{delay:t=0,duration:n=400,easing:r=easing.cubicOut}){const i=getComputedStyle(e),o=+i.opacity;parseFloat(i.width);return{delay:t,duration:n,easing:r,css:e=>"overflow: hidden;"+`opacity: ${Math.min(20*e,1)*o};`+`transform: rotateY(${90*(e-1)}deg)`}}function ro(e,t,n){let r,{ref:i}=t,{_title:o,_data:s,type:a}=Qn(i);l(e,o,e=>{r=e,n("$_title",r)});let c=!1;return e.$set=e=>{"ref"in e&&n("ref",i=e.ref)},{ref:i,_title:o,_data:s,type:a,editingTitle:c,removeSelf:()=>{((e,t=u(Gn))=>{try{Vn[t].widgets.delete(e)&&(Jn.widgets.delete(e),Vn[t]._widgetsCount.update(e=>e-1),Jn.dashes.update(Vn[t].ref,{widgets:Array.from(Vn[t].widgets.keys())}))}catch(e){console.error(e)}})(i)},$_title:r,input_input_handler:function(){o.set(this.value)},blur_handler:function(){const e=c=!1;return n("editingTitle",c),e},click_handler:function(){const e=c=!0;return n("editingTitle",c),e}}}class io extends ge{constructor(e){super(),pe(this,e,ro,to,a,["ref"])}}const oo=(e,t=0)=>{let n;return function(...r){clearTimeout(n),n=setTimeout(()=>e.apply(this,r),t)}};function so(e){return{pageX:e.changedTouches?e.changedTouches[0].pageX:e.pageX,pageY:e.changedTouches?e.changedTouches[0].pageY:e.pageY}}function ao(e){return Math.max(...e.map(e=>e.y+e.h),1)}const co=(e,t,n,r)=>{var i=!1,o=n;if(e)for(var s=e.length-1;s>=0;s--){const[n,r]=e[s];if(t<=n){i=!0,o=r;break}}return i||(o=r),o},uo=(e,t)=>Array.from(Array(e),()=>new Array(t));function lo(e,t,n,r){let i=uo(n,r);for(var o=0;o<e.length;o++){const n=e[o],{x:r,y:c,w:u,h:l,id:h,responsive:{valueW:f}}=n;if(-1===t.indexOf(h))for(var s=c;s<c+l;s++){const e=i[s];if(e)for(var a=r;a<r+(u-f);a++)e[a]=n}}return i}function ho(e,t,n=ao(e)){let r=uo(n,t);return e.forEach((n,i)=>{let o=e.slice(i+1).map(e=>e.id),s=function(e,t,n=[],r){const{w:i}=t;let o=t.responsive.valueW;for(var s=0;s<e.length;s++){const t=e[s];for(var a=0;a<t.length;a++){const e=t.findIndex(e=>void 0===e);if(-1!==e){for(var c=t.slice(e),u=c.length,l=0;l<c.length;l++)if(void 0!==c[l]){u=l;break}return o=Math.max(i-u,0),{y:s,x:e,responsive:{valueW:o}}}}}return o=Math.max(i-r,0),{y:ao(n),x:0,responsive:{valueW:o}}}(r,n,e,t);e=e.map(e=>e.id===n.id?{...n,...s}:e),r=lo(e,o,ao(e),t)}),e}function fo(e,t){const n=t.findIndex(t=>t.id===e);return{index:n,item:t[n]}}function po(e,t,n=[]){let r=e[0].length-(t.w-t.responsive.valueW);for(var i=0;i<e.length;i++){const n=e[i];for(var o=0;o<r+1;o++){if(n.slice(o,o+(t.w-t.responsive.valueW)).every(e=>void 0===e)){if(e.slice(i,i+t.h).every(e=>e.slice(o,o+(t.w-t.responsive.valueW)).every(e=>void 0===e)))return{y:i,x:o}}}}return{y:ao(n),x:0}}function go(e,t,n){return n.id===e.id?{...e,...t}:n}const mo=(e,t,n)=>n.id===e.id?t:n;function vo(e,t){return Math.max(ao(e),2)*t}const{window:yo}=ue,bo=({item:e,items:t,i:n})=>({item:t,index:t}),wo=({item:e,items:t,i:n})=>({item:e,index:n});function xo(e,t,n){const r=Object.create(e);return r.item=t[n],r.i=n,r}function _o(e){var t,n;return{c(){S(t=$("div"),"class","svlt-grid-resizer svelte-14tbpr7"),n=[E(t,"touchstart",e.resizeOnMouseDown.bind(this,e.item.id)),E(t,"mousedown",e.resizeOnMouseDown.bind(this,e.item.id))]},m(e,n){x(e,t,n)},p(t,n){e=n},d(e){e&&_(t),o(n)}}}function ko(e,t){var r,i,s,a,c;const u=t.$$slots.default,l=function(e,t,n){if(e){const r=h(e,t,n);return e[0](r)}}(u,t,wo);var f=t.item.resizable&&_o(t);return{key:e,first:null,c(){r=$("div"),l&&l.c(),i=P(),f&&f.c(),S(r,"class","svlt-grid-item svelte-14tbpr7"),S(r,"style",s=(t.useTransform?`transform: translate(${t.item.drag.dragging?t.item.drag.left:t.item.x*t.xPerPx+t.gap}px, ${t.item.drag.dragging?t.item.drag.top:t.item.y*t.yPerPx+t.gap}px);`:"")+";\n        "+(t.useTransform?"":`top: ${t.item.drag.dragging?t.item.drag.top:t.item.y*t.yPerPx+t.gap}px`)+";\n        "+(t.useTransform?"":`left: ${t.item.drag.dragging?t.item.drag.left:t.item.x*t.xPerPx+t.gap}px`)+";\n        width: "+(t.item.resize.resizing?t.item.resize.width:t.item.w*t.xPerPx-2*t.gap-t.item.responsive.valueW*t.xPerPx)+"px;\n        height: "+(t.item.resize.resizing?t.item.resize.height:t.item.h*t.yPerPx-2*t.gap)+"px;\n        z-index: "+(t.item.drag.dragging||t.item.resize.resizing?3:1)+";\n        opacity: "+(t.item.resize.resizing?.5:1)),c=[E(r,"mousedown",t.item.draggable?t.dragOnMouseDown.bind(this,t.item.id):null),E(r,"touchstart",t.item.draggable?t.dragOnMouseDown.bind(this,t.item.id):null)],this.first=r},l(e){l&&l.l(div_nodes)},m(e,t){x(e,r,t),l&&l.m(r,null),w(r,i),f&&f.m(r,null),a=!0},p(e,i){t=i,l&&l.p&&(e.$$scope||e.items)&&l.p(function(e,t,r,i){return e[1]?n({},n(t.$$scope.changed||{},e[1](i?i(r):{}))):t.$$scope.changed||{}}(u,t,e,bo),h(u,t,wo)),t.item.resizable?f||((f=_o(t)).c(),f.m(r,null)):f&&(f.d(1),f=null),(!a||e.useTransform||e.items||e.xPerPx||e.gap)&&s!==(s=(t.useTransform?`transform: translate(${t.item.drag.dragging?t.item.drag.left:t.item.x*t.xPerPx+t.gap}px, ${t.item.drag.dragging?t.item.drag.top:t.item.y*t.yPerPx+t.gap}px);`:"")+";\n        "+(t.useTransform?"":`top: ${t.item.drag.dragging?t.item.drag.top:t.item.y*t.yPerPx+t.gap}px`)+";\n        "+(t.useTransform?"":`left: ${t.item.drag.dragging?t.item.drag.left:t.item.x*t.xPerPx+t.gap}px`)+";\n        width: "+(t.item.resize.resizing?t.item.resize.width:t.item.w*t.xPerPx-2*t.gap-t.item.responsive.valueW*t.xPerPx)+"px;\n        height: "+(t.item.resize.resizing?t.item.resize.height:t.item.h*t.yPerPx-2*t.gap)+"px;\n        z-index: "+(t.item.drag.dragging||t.item.resize.resizing?3:1)+";\n        opacity: "+(t.item.resize.resizing?.5:1))&&S(r,"style",s)},i(e){a||(oe(l,e),a=!0)},o(e){se(l,e),a=!1},d(e){e&&_(r),l&&l.d(e),f&&f.d(),o(c)}}}function $o(e){var t,n;return{c(){S(t=$("div"),"class","svlt-grid-shadow svelte-14tbpr7"),S(t,"style",n=(e.useTransform?`transform: translate(${e.shadow.drag.dragging?e.shadow.drag.left:e.shadow.x*e.xPerPx+e.gap}px, ${e.shadow.drag.dragging?e.shadow.drag.top:e.shadow.y*e.yPerPx+e.gap}px);`:"")+";\n        "+(e.useTransform?"":`top: ${e.shadow.drag.dragging?e.shadow.drag.top:e.shadow.y*e.yPerPx+e.gap}px`)+";\n        "+(e.useTransform?"":`left: ${e.shadow.drag.dragging?e.shadow.drag.left:e.shadow.x*e.xPerPx+e.gap}px`)+";\n    width:"+(e.shadow.w*e.xPerPx-2*e.gap-e.shadow.responsive.valueW*e.xPerPx)+"px;\n    height:"+(e.shadow.h*e.yPerPx-2*e.gap)+"px;")},m(e,n){x(e,t,n)},p(e,r){(e.useTransform||e.shadow||e.xPerPx||e.gap)&&n!==(n=(r.useTransform?`transform: translate(${r.shadow.drag.dragging?r.shadow.drag.left:r.shadow.x*r.xPerPx+r.gap}px, ${r.shadow.drag.dragging?r.shadow.drag.top:r.shadow.y*r.yPerPx+r.gap}px);`:"")+";\n        "+(r.useTransform?"":`top: ${r.shadow.drag.dragging?r.shadow.drag.top:r.shadow.y*r.yPerPx+r.gap}px`)+";\n        "+(r.useTransform?"":`left: ${r.shadow.drag.dragging?r.shadow.drag.left:r.shadow.x*r.xPerPx+r.gap}px`)+";\n    width:"+(r.shadow.w*r.xPerPx-2*r.gap-r.shadow.responsive.valueW*r.xPerPx)+"px;\n    height:"+(r.shadow.h*r.yPerPx-2*r.gap)+"px;")&&S(t,"style",n)},d(e){e&&_(t)}}}function Ao(e){var t,n,r,i,o=[],s=new Map,a=e.items;const c=e=>e.item.id;for(var u=0;u<a.length;u+=1){let t=xo(e,a,u),n=c(t);s.set(n,o[u]=ko(n,t))}var l=e.shadow.active&&$o(e);return{c(){for(t=$("div"),u=0;u<o.length;u+=1)o[u].c();n=P(),l&&l.c(),S(t,"class","svlt-grid-container svelte-14tbpr7"),D(t,"height",e.ch+"px"),I(t,"svlt-grid-transition",!e.focuesdItem),i=E(yo,"resize",oo(e.onResize,300))},m(i,s){for(x(i,t,s),u=0;u<o.length;u+=1)o[u].m(t,null);w(t,n),l&&l.m(t,null),e.div_binding(t),r=!0},p(e,i){const a=i.items;re(),o=function(e,t,n,r,i,o,s,a,c,u,l,h){let f=e.length,d=o.length,p=f;const g={};for(;p--;)g[e[p].key]=p;const m=[],v=new Map,y=new Map;for(p=d;p--;){const e=h(i,o,p),a=n(e);let c=s.get(a);c?r&&c.p(t,e):(c=u(a,e),c.c()),v.set(a,m[p]=c),a in g&&y.set(a,Math.abs(p-g[a]))}const b=new Set,w=new Set;function x(e){oe(e,1),e.m(a,l),s.set(e.key,e),l=e.first,d--}for(;f&&d;){const t=m[d-1],n=e[f-1],r=t.key,i=n.key;t===n?(l=t.first,f--,d--):v.has(i)?!s.has(r)||b.has(r)?x(t):w.has(i)?f--:y.get(r)>y.get(i)?(w.add(r),x(t)):(b.add(i),f--):(c(n,s),f--)}for(;f--;){const t=e[f];v.has(t.key)||c(t,s)}for(;d;)x(m[d-1]);return m}(o,e,c,1,i,a,s,t,le,ko,n,xo),ie(),i.shadow.active?l?l.p(e,i):((l=$o(i)).c(),l.m(t,null)):l&&(l.d(1),l=null),r&&!e.ch||D(t,"height",i.ch+"px"),e.focuesdItem&&I(t,"svlt-grid-transition",!i.focuesdItem)},i(e){if(!r){for(var t=0;t<a.length;t+=1)oe(o[t]);r=!0}},o(e){for(u=0;u<o.length;u+=1)se(o[u]);r=!1},d(n){for(n&&_(t),u=0;u<o.length;u+=1)o[u].d();l&&l.d(),e.div_binding(null),i()}}}function Po(e,t,n){let r,i,o,s,a,c,u,l,{useTransform:h=!1,items:f=[],cols:d=0,dragDebounceMs:p=350,gap:g=0,rowHeight:m=150,breakpoints:v,fillEmpty:y=!0}=t,b=m,w=d,x={w:0,h:0,x:0,y:0,active:!1,id:null,responsive:{valueW:0},min:{},max:{}},_=vo(f,b);const k=B(),$=()=>document.documentElement.clientWidth;let A,P,T,E;function S(e){let{pageX:t,pageY:r}=so(e);t-=o.x,r-=o.y;const u=E+r-P,h=T+(t-A),{responsive:{valueW:d}}=i;let p=Math.round(h/s)+d;const{h:g=1,w:m=1}=i.min,{h:v,w:y=c-i.x+d}=i.max;p=Math.min(Math.max(p,m),y);let w=Math.round(u/b);v&&(w=Math.min(w,v)),w=Math.max(w,g),n("shadow",x={...x,w:p,h:w});let _=f[a];f[a]={..._,resize:{resizing:!0,width:h,height:u},w:p,h:w},n("items",f),l||z()}function O(e){e.stopPropagation();let t=f[a];f[a]={...t,resize:{resizing:!1,width:0,height:0}},n("items",f),window.removeEventListener("mousemove",S,!1),window.removeEventListener("touchmove",S,!1),window.removeEventListener("mouseup",O,!1),window.removeEventListener("touchend",O,!1),n("shadow",x={...x,w:0,h:0,x:0,y:0,active:!1,id:null,responsive:{valueW:0},min:{},max:{}}),R(),n("focuesdItem",i=void 0),l=!1}q(()=>{o=r.getBoundingClientRect();let e=co(v,$(),d,w);c=e,u=document.documentElement.clientWidth,v&&n("items",f=ho(f,e)),n("xPerPx",s=o.width/e),k("mount",{cols:e,xPerPx:s,yPerPx:b})});let D=0,I=0;const z=oo(R,p);let C={};function M(e){e.stopPropagation();let{pageX:t,pageY:r}=so(e);const u=r-o.y,l=t-o.x;let h=Math.round((l-D)/s),d=Math.round((u-I)/b);h=Math.max(Math.min(h,c-(i.w-i.responsive.valueW)),0),d=Math.max(d,0);let p=f[a];f[a]={...p,drag:{dragging:!0,top:u-I,left:l-D},x:h,y:d},n("items",f),n("shadow",x={...x,x:h,y:d}),z()}function j(e){window.removeEventListener("mousemove",M,!1),window.removeEventListener("touchmove",M,!1),window.removeEventListener("mouseup",j,!1),window.removeEventListener("touchend",j,!1);let t=f[a];f[a]={...t,drag:{dragging:!1,top:0,left:0}},n("items",f),D=0,I=0,n("shadow",x={...x,w:0,h:0,x:0,y:0,active:!1,id:null}),R(),n("focuesdItem",i=void 0)}function R(e){const t=f[a];let r=co(v,$(),d,w),i=function(e,t,n,r){let i=lo(t,[e.id],ao(t),n);const o=function(e,t,n){const{w:r,h:i,x:o,y:s,responsive:{valueW:a}}=n,c=t.slice(s,s+i);let u=[];for(var l=0;l<c.length;l++){let e=c[l].slice(o,o+(r-a));u=[...u,...e.map(e=>e&&e.id).filter(e=>e)]}return[...u.filter((e,t)=>u.indexOf(e)==t)]}(0,i,e);let s=function(e,t){return t.filter(t=>-1!==e.indexOf(t.id))}(o,t);if(s.find(e=>e.static)&&r)return t.map(mo.bind(null,e,r));i=lo(t,o,ao(t),n);let a=t,c=o,u=[];return s.forEach(e=>{let r=po(i,e,a);if(u.push(e.id),r){a=a.map(go.bind(null,e,r));let o=c.filter(e=>-1===u.indexOf(e));i=lo(a,o,ao(t),n)}}),a}(t,f,r,C);y&&i.forEach(e=>{e.id!==t.id&&(i=i.map(t=>t.id===e.id?{...t,...po(lo(i,[e.id],ao(i),r),e,i)}:t))}),n("items",f=i),k("adjust",{focuesdItem:t})}W(()=>{i||(n("ch",_=vo(f,b)),d!==w&&o&&(n("xPerPx",s=o.width/d),w=d))});let{$$slots:L={},$$scope:N}=t;return e.$set=e=>{"useTransform"in e&&n("useTransform",h=e.useTransform),"items"in e&&n("items",f=e.items),"cols"in e&&n("cols",d=e.cols),"dragDebounceMs"in e&&n("dragDebounceMs",p=e.dragDebounceMs),"gap"in e&&n("gap",g=e.gap),"rowHeight"in e&&n("rowHeight",m=e.rowHeight),"breakpoints"in e&&n("breakpoints",v=e.breakpoints),"fillEmpty"in e&&n("fillEmpty",y=e.fillEmpty),"$$scope"in e&&n("$$scope",N=e.$$scope)},{useTransform:h,items:f,cols:d,dragDebounceMs:p,gap:g,rowHeight:m,breakpoints:v,fillEmpty:y,container:r,focuesdItem:i,xPerPx:s,yPerPx:b,shadow:x,ch:_,onResize:function(){let e=document.documentElement.clientWidth;if(e!==u){u=e,o=r.getBoundingClientRect();let t=co(v,e,d,w);c=t,n("xPerPx",s=o.width/t),k("resize",{cols:t,xPerPx:s,yPerPx:b}),v&&n("items",f=ho(f,t))}},resizeOnMouseDown:function(e,t){t.stopPropagation();let{pageX:r,pageY:u}=so(t);const{item:h,index:p}=fo(e,f);a=p,n("focuesdItem",i=h),C={...h},l=h.h+h.y===ao(f),n("shadow",x={...x,...i,active:!0}),A=r-o.x,P=u-o.y,T=h.w*s-2*g-i.responsive.valueW*s,E=h.h*b-2*g,c=co(v,$(),d,w),window.addEventListener("mousemove",S,!1),window.addEventListener("touchmove",S,!1),window.addEventListener("mouseup",O,!1),window.addEventListener("touchend",O,!1)},dragOnMouseDown:function(e,t){t.stopPropagation();let{pageX:r,pageY:s}=so(t);const{item:u,index:l}=fo(e,f);a=l,n("focuesdItem",i=u),C={...u},n("shadow",x={...x,...u,active:!0});let p,g,{currentTarget:m}=t;if(h){const{x:e,y:t}=(y=m.style.transform,b=(y=y.slice(10,-3)).indexOf("px, "),{x:+y.slice(0,b),y:+y.slice(b+4)});p=e,g=t}else p=m.offsetLeft,g=m.offsetTop;var y,b;r-=o.x,s-=o.y,D=r-p,I=s-g,c=co(v,$(),d,w),u?(window.addEventListener("mousemove",M,!1),window.addEventListener("touchmove",M,!1),window.addEventListener("mouseup",j,!1),window.addEventListener("touchend",j,!1)):console.warn("Can not get item")},div_binding:function(e){H[e?"unshift":"push"](()=>{n("container",r=e)})},$$slots:L,$$scope:N}}class To extends ge{constructor(e){super(),pe(this,e,Po,Ao,a,["useTransform","items","cols","dragDebounceMs","gap","rowHeight","breakpoints","fillEmpty"])}}function Eo(e){return Math.max(...e.map(e=>e.y+e.h),1)}const So=(e,t)=>Array.from(Array(e),()=>new Array(t));function Oo(e,t,n,r){let i=So(n,r);for(var o=0;o<e.length;o++){const n=e[o],{x:r,y:c,w:u,h:l,id:h,responsive:{valueW:f}}=n;if(-1===t.indexOf(h))for(var s=c;s<c+l;s++){const e=i[s];if(e)for(var a=r;a<r+(u-f);a++)e[a]=n}}return i}function Do(e,t,n=Eo(e)){let r=So(n,t);return e.forEach((n,i)=>{let o=e.slice(i+1).map(e=>e.id),s=function(e,t,n=[],r){const{w:i}=t;let o=t.responsive.valueW;for(var s=0;s<e.length;s++){const t=e[s];for(var a=0;a<t.length;a++){const e=t.findIndex(e=>void 0===e);if(-1!==e){for(var c=t.slice(e),u=c.length,l=0;l<c.length;l++)if(void 0!==c[l]){u=l;break}return o=Math.max(i-u,0),{y:s,x:e,responsive:{valueW:o}}}}}return o=Math.max(i-r,0),{y:Eo(n),x:0,responsive:{valueW:o}}}(r,n,e,t);e=e.map(e=>e.id===n.id?{...n,...s}:e),r=Oo(e,o,Eo(e),t)}),e}function Io(e,t,n=[]){let r=e[0].length-(t.w-t.responsive.valueW);for(var i=0;i<e.length;i++){const n=e[i];for(var o=0;o<r+1;o++){if(n.slice(o,o+(t.w-t.responsive.valueW)).every(e=>void 0===e)){if(e.slice(i,i+t.h).every(e=>e.slice(o,o+(t.w-t.responsive.valueW)).every(e=>void 0===e)))return{y:i,x:o}}}}return{y:Eo(n),x:0}}function zo(e,t,n){return n.id===e.id?{...e,...t}:n}const Co=(e,t,n)=>n.id===e.id?t:n;const Mo={findSpaceForItem:(e,t,n)=>Io(function(e,t=Eo(e),n){let r=So(t,n);for(var i=0;i<e.length;i++){const t=e[i],{x:n,y:a,w:c,h:u,responsive:{valueW:l}}=t;for(var o=a;o<a+u;o++){const e=r[o];for(var s=n;s<n+(c-l);s++)e[s]=t}}return r}(t,Eo(t),n),e,t),appendItem:(e,t,n)=>function(e,t,n,r){let i=Oo(t,[e.id],Eo(t),n);const o=function(e,t,n){const{w:r,h:i,x:o,y:s,responsive:{valueW:a}}=n,c=t.slice(s,s+i);let u=[];for(var l=0;l<c.length;l++){let e=c[l].slice(o,o+(r-a));u=[...u,...e.map(e=>e&&e.id).filter(e=>e)]}return[...u.filter((e,t)=>u.indexOf(e)==t)]}(0,i,e);let s=function(e,t){return t.filter(t=>-1!==e.indexOf(t.id))}(o,t);if(s.find(e=>e.static)&&r)return t.map(Co.bind(null,e,r));i=Oo(t,o,Eo(t),n);let a=t,c=o,u=[];return s.forEach(e=>{let r=Io(i,e,a);if(u.push(e.id),r){a=a.map(zo.bind(null,e,r));let o=c.filter(e=>-1===u.indexOf(e));i=Oo(a,o,Eo(t),n)}}),a}(e,[...t,e],n),resizeItems:(e,t,n)=>Do(e,t,n),item(e){return{drag:{top:null,left:null,dragging:!1},resize:{width:null,height:null,resizing:!1},responsive:{valueW:0},static:!1,resizable:!(t=e).static,draggable:!t.static,min:{...t.min},max:{...t.max},...t};var t}};function jo(e){var t,n=new io({props:{ref:e.item.id}});return{c(){n.$$.fragment.c()},m(e,r){he(n,e,r),t=!0},p(e,t){var r={};e.item&&(r.ref=t.item.id),n.$set(r)},i(e){t||(oe(n.$$.fragment,e),t=!0)},o(e){se(n.$$.fragment,e),t=!1},d(e){fe(n,e)}}}function Ro(e){var t,n,r;function i(t){var r;e.grid_items_binding.call(null,t),n=!0,r=()=>n=!1,Z.push(r)}let o={fillEmpty:e.fillEmpty,items:e.itemsArr,cols:e.cols,rowHeight:50,gap:20,$$slots:{default:[jo,({item:e})=>({item:e})]},$$scope:{ctx:e}};void 0!==e.itemsArr&&(o.items=e.itemsArr);var s=new To({props:o});return H.push(()=>{return t="items",n=i,void(-1!==(e=s).$$.props.indexOf(t)&&(e.$$.bound[t]=n,n(e.$$.ctx[t])));var e,t,n}),s.$on("adjust",e.handleAdjust),s.$on("resize",e.handleWindowResize),s.$on("mount",e.handleWindowResize),{c(){t=$("div"),s.$$.fragment.c(),S(t,"id","gridContainer"),S(t,"class","grid-container svelte-2daa0q")},m(e,n){x(e,t,n),he(s,t,null),r=!0},p(e,t){var r={};e.fillEmpty&&(r.fillEmpty=t.fillEmpty),e.itemsArr&&(r.items=t.itemsArr),e.cols&&(r.cols=t.cols),e.$$scope&&(r.$$scope={changed:e,ctx:t}),!n&&e.itemsArr&&(r.items=t.itemsArr),s.$set(r)},i(e){r||(oe(s.$$.fragment,e),r=!0)},o(e){se(s.$$.fragment,e),r=!1},d(e){e&&_(t),fe(s)}}}function Lo(e){return Math.max(...e.map(e=>e.x+e.w))}function No(t,n,r){let i,o,s=e;l(t,Gn,e=>{i=e,r("$_activeDashIndex",i)}),t.$$.on_destroy.push(()=>s());let{clearWidgets:a=!1}=n,u=[],h=[],f=i,d=!1;const p=(e,t)=>{let n=[];return e.forEach((e,i)=>{const o=Qn(e);let{w:s,h:a,x:c,y:u}=o.sizeAndPos[v(o.sizeAndPos)];s>t?(s=t,r("fillEmpty",d=!0)):r("fillEmpty",d=!1);let l=Mo.item({w:s,h:a,x:c,y:u,id:e});c+s>t&&(l={...l,...Mo.findSpaceForItem(l,n,t)}),n=Mo.appendItem(l,n,t)}),m(n)};let g={};const m=e=>{const t=Lo(e),n=Math.floor((b-t)/2);return e.map(e=>({...e,x:e.x+n}))};function v(e){return Object.keys(e).sort((e,t)=>Math.abs(b-e)-Math.abs(b-t))[0]}let y,b;return q(()=>{h.forEach(e=>g[e.id]=e)}),t.$set=e=>{"clearWidgets"in e&&r("clearWidgets",a=e.clearWidgets)},t.$$.update=(e={$_activeDashIndex:1,$_widgetsCount:1,widgets:1,prevDashIndex:1,cols:1,clearWidgets:1})=>{e.$_activeDashIndex&&(y=Vn[i]?Vn[i]._widgetsCount:ve(0),s(),s=c(y,e=>{o=e,r("$_widgetsCount",o)}),r("_widgetsCount",y)),(e.$_widgetsCount||e.widgets||e.$_activeDashIndex||e.prevDashIndex||e.cols)&&(o===u.length&&i===f||(r("prevDashIndex",f=i),r("widgets",u=Array.from(Vn[i].widgets.keys())),r("itemsArr",h=p(u,b)))),e.clearWidgets&&a&&r("itemsArr",h=[])},r("cols",b=0),{clearWidgets:a,itemsArr:h,fillEmpty:d,handleWindowResize:()=>{r("cols",b=function(){const e=document.getElementById("gridContainer").clientWidth,t=Math.round(e/50);return t-t%2}()),r("itemsArr",h=p(u,b))},handleAdjust:function(){const e=h.filter(e=>!g[e.id]||!function({x:e,y:t,w:n,h:r},{x:i,y:o,w:s,h:a}){return e===i&&t===o&&n===s&&r===a}(e,g[e.id]));if(e.length>0){const t=Lo(h);e.forEach(e=>{const{w:n,h:r,x:i,y:o}=e;((e,t,n)=>{try{Xn().widgets.get(t).sizeAndPos[e]=n,Jn.widgets.update(t,{sizeAndPos:Xn().widgets.get(t).sizeAndPos})}catch(e){console.error(e)}})(t,e.id,{w:n,h:r,x:i,y:o});const s=v(Qn(e.id).sizeAndPos);s>t&&((e,t)=>{try{delete Xn().widgets.get(e).sizeAndPos[t],Jn.widgets.update(e,{sizeAndPos:Xn().widgets.get(e).sizeAndPos})}catch(e){console.error(e)}})(e.id,s)}),h.forEach(e=>g[e.id]=e)}},_widgetsCount:y,cols:b,grid_items_binding:function(e){h=e,r("itemsArr",h),r("$_widgetsCount",o),r("widgets",u),r("$_activeDashIndex",i),r("prevDashIndex",f),r("cols",b),r("clearWidgets",a)}}}class Fo extends ge{constructor(e){super(),pe(this,e,No,Ro,a,["clearWidgets"])}}function Wo(e){var t,n,r,i,o;return{c(){t=$("img"),n=P(),r=$("div"),(i=$("button")).innerHTML='<h3 class="svelte-1nskkin">Sticky</h3> <img src="/images/addIcon.svg" alt="+">',S(t,"class","cancel svelte-1nskkin"),S(t,"src","/images/cancelIcon.svg"),S(t,"alt","x"),S(i,"class","svelte-1nskkin"),S(r,"class","menu svelte-1nskkin"),o=E(i,"click",e.click_handler)},m(e,o){x(e,t,o),x(e,n,o),x(e,r,o),w(r,i)},d(e){e&&(_(t),_(n),_(r)),o()}}}function qo(e){var t,n,r,i,o,s,a,c=new mr({props:{active:e.trashActive}});c.$on("trash",e.toggleTrash),c.$on("trash",e.trash_handler);var u=e.menuIsOpen&&Wo(e),l=new br({props:{active:e.menuIsOpen}});return l.$on("add",e.menu.toggle),{c(){t=$("div"),n=$("nav"),c.$$.fragment.c(),r=P(),u&&u.c(),i=P(),(o=$("h2")).textContent="Widgets",s=P(),l.$$.fragment.c(),S(o,"class","svelte-1nskkin"),S(n,"class","svelte-1nskkin"),S(t,"class","menuArea svelte-1nskkin")},m(e,h){x(e,t,h),w(t,n),he(c,n,null),w(n,r),u&&u.m(n,null),w(n,i),w(n,o),w(n,s),he(l,n,null),a=!0},p(e,t){var r={};e.trashActive&&(r.active=t.trashActive),c.$set(r),t.menuIsOpen?u||((u=Wo(t)).c(),u.m(n,i)):u&&(u.d(1),u=null);var o={};e.menuIsOpen&&(o.active=t.menuIsOpen),l.$set(o)},i(e){a||(oe(c.$$.fragment,e),oe(l.$$.fragment,e),a=!0)},o(e){se(c.$$.fragment,e),se(l.$$.fragment,e),a=!1},d(e){e&&_(t),fe(c),u&&u.d(),fe(l)}}}function Bo(e,t,n){let r=!1;const i=new wr(e=>{const t=r=e;return n("menuIsOpen",r),t});let o=!1;const s=e=>{or(e)};return{menuIsOpen:r,menu:i,trashActive:o,toggleTrash:()=>{n("trashActive",o=!o)},add:s,trash_handler:function(t){!function(e,t){const n=e.$$.callbacks[t.type];n&&n.slice().forEach(e=>e(t))}(e,t)},click_handler:function(){return s("Sticky")}}}class Ko extends ge{constructor(e){super(),pe(this,e,Bo,qo,a,[])}}function Ho(e){var t,n,r,i,o,s=new jr({});s.$on("changingDash",e.clearDash);var a=new Fo({props:{clearWidgets:e.clearWidgets}}),c=new Ko({});return c.$on("trash",e.activateTrash),{c(){t=$("main"),s.$$.fragment.c(),n=P(),a.$$.fragment.c(),r=P(),c.$$.fragment.c(),S(t,"class",i=f(e.trashActive?"trash":"")+" svelte-1fl743r")},m(e,i){x(e,t,i),he(s,t,null),w(t,n),he(a,t,null),w(t,r),he(c,t,null),o=!0},p(e,n){var r={};e.clearWidgets&&(r.clearWidgets=n.clearWidgets),a.$set(r),o&&!e.trashActive||i===(i=f(n.trashActive?"trash":"")+" svelte-1fl743r")||S(t,"class",i)},i(e){o||(oe(s.$$.fragment,e),oe(a.$$.fragment,e),oe(c.$$.fragment,e),o=!0)},o(e){se(s.$$.fragment,e),se(a.$$.fragment,e),se(c.$$.fragment,e),o=!1},d(e){e&&_(t),fe(s),fe(a),fe(c)}}}function Uo(e,t,n){let r=!1,i=!1;return{trashActive:r,clearWidgets:i,clearDash:e=>{n("clearWidgets",i=!0),setTimeout(()=>{const e=i=!1;return n("clearWidgets",i),e},0)},activateTrash:e=>{n("trashActive",r=e.detail.active)}}}return new class extends ge{constructor(e){super(),pe(this,e,Uo,Ho,a,[])}}({target:document.body,props:{name:"world"}})}();
//# sourceMappingURL=bundle.js.map
