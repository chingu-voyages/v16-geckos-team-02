var app=function(){"use strict";function t(){}const e=t=>t;function n(t,e){for(const n in e)t[n]=e[n];return t}function i(t){return t()}function r(){return Object.create(null)}function a(t){t.forEach(i)}function s(t){return"function"==typeof t}function o(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function c(t,e){const n=t.subscribe(e);return n.unsubscribe?()=>n.unsubscribe():n}function l(t){let e;return c(t,t=>e=t)(),e}function d(t,e,n){t.$$.on_destroy.push(c(e,n))}function u(t,e,i){return t[1]?n({},n(e.$$scope.ctx,t[1](i?i(e):{}))):e.$$scope.ctx}function f(t){return null==t?"":t}const h="undefined"!=typeof window;let g=h?()=>window.performance.now():()=>Date.now(),m=h?t=>requestAnimationFrame(t):t;const p=new Set;let v,$=!1;function w(){p.forEach(t=>{t[0](g())||(p.delete(t),t[1]())}),$=p.size>0,$&&m(w)}function x(t,e){t.appendChild(e)}function y(t,e,n){t.insertBefore(e,n||null)}function _(t){t.parentNode.removeChild(t)}function b(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function P(t){return document.createElement(t)}function I(t){return document.createTextNode(t)}function k(){return I(" ")}function E(){return I("")}function T(t,e,n,i){return t.addEventListener(e,n,i),()=>t.removeEventListener(e,n,i)}function z(t,e,n){null==n?t.removeAttribute(e):t.setAttribute(e,n)}function M(t,e){e=""+e,t.data!==e&&(t.data=e)}function O(t,e,n){t.style.setProperty(e,n)}function W(t,e,n){t.classList[n?"add":"remove"](e)}function A(t,e){const n=document.createEvent("CustomEvent");return n.initCustomEvent(t,!1,!1,e),n}let C,D=0,L={};function S(t,e,n,i,r,a,s,o=0){const c=16.666/i;let l="{\n";for(let t=0;t<=1;t+=c){const i=e+(n-e)*a(t);l+=100*t+`%{${s(i,1-i)}}\n`}const d=l+`100% {${s(n,1-n)}}\n}`,u=`__svelte_${function(t){let e=5381,n=t.length;for(;n--;)e=(e<<5)-e^t.charCodeAt(n);return e>>>0}(d)}_${o}`;if(!L[u]){if(!v){const t=P("style");document.head.appendChild(t),v=t.sheet}L[u]=!0,v.insertRule(`@keyframes ${u} ${d}`,v.cssRules.length)}const f=t.style.animation||"";return t.style.animation=`${f?`${f}, `:""}${u} ${i}ms linear ${r}ms 1 both`,D+=1,u}function j(t,e){t.style.animation=(t.style.animation||"").split(", ").filter(e?t=>t.indexOf(e)<0:t=>-1===t.indexOf("__svelte")).join(", "),e&&!--D&&m(()=>{if(D)return;let t=v.cssRules.length;for(;t--;)v.deleteRule(t);L={}})}function R(t){C=t}function N(){if(!C)throw new Error("Function called outside component initialization");return C}function Y(t){N().$$.before_update.push(t)}function H(){const t=C;return(e,n)=>{const i=t.$$.callbacks[e];if(i){const r=A(e,n);i.slice().forEach(e=>{e.call(t,r)})}}}const F=[],X=[],q=[],B=[],G=Promise.resolve();let J,K=!1;function Q(t){q.push(t)}function U(){const t=new Set;do{for(;F.length;){const t=F.shift();R(t),V(t.$$)}for(;X.length;)X.pop()();for(let e=0;e<q.length;e+=1){const n=q[e];t.has(n)||(n(),t.add(n))}q.length=0}while(F.length);for(;B.length;)B.pop()();K=!1}function V(t){t.fragment&&(t.update(t.dirty),a(t.before_update),t.fragment.p(t.dirty,t.ctx),t.dirty=null,t.after_update.forEach(Q))}function Z(t,e,n){t.dispatchEvent(A(`${e?"intro":"outro"}${n}`))}const tt=new Set;let et;function nt(){et={r:0,c:[],p:et}}function it(){et.r||a(et.c),et=et.p}function rt(t,e){t&&t.i&&(tt.delete(t),t.i(e))}function at(t,e,n,i){if(t&&t.o){if(tt.has(t))return;tt.add(t),et.c.push(()=>{tt.delete(t),i&&(n&&t.d(1),i())}),t.o(e)}}const st={duration:0};function ot(n,i,r,o){let c=i(n,r),l=o?0:1,d=null,u=null,f=null;function h(){f&&j(n,f)}function v(t,e){const n=t.b-l;return e*=Math.abs(n),{a:l,b:t.b,d:n,duration:e,start:t.start,end:t.start+e,group:t.group}}function x(i){const{delay:r=0,duration:s=300,easing:o=e,tick:x=t,css:y}=c||st,_={start:g()+r,b:i};i||(_.group=et,et.r+=1),d?u=_:(y&&(h(),f=S(n,l,i,s,r,o,y)),i&&x(0,1),d=v(_,s),Q(()=>Z(n,i,"start")),function(t){let e;$||($=!0,m(w)),new Promise(n=>{p.add(e=[t,n])})}(t=>{if(u&&t>u.start&&(d=v(u,s),u=null,Z(n,d.b,"start"),y&&(h(),f=S(n,l,d.b,d.duration,0,o,c.css))),d)if(t>=d.end)x(l=d.b,1-l),Z(n,d.b,"end"),u||(d.b?h():--d.group.r||a(d.group.c)),d=null;else if(t>=d.start){const e=t-d.start;l=d.a+d.d*o(e/d.duration),x(l,1-l)}return!(!d&&!u)}))}return{run(t){s(c)?(J||(J=Promise.resolve(),J.then(()=>{J=null})),J).then(()=>{c=c(),x(t)}):x(t)},end(){h(),d=u=null}}}const ct="undefined"!=typeof window?window:global;function lt(t,e){at(t,1,1,()=>{e.delete(t.key)})}function dt(t,e,n){const{fragment:r,on_mount:o,on_destroy:c,after_update:l}=t.$$;r.m(e,n),Q(()=>{const e=o.map(i).filter(s);c?c.push(...e):a(e),t.$$.on_mount=[]}),l.forEach(Q)}function ut(t,e){t.$$.fragment&&(a(t.$$.on_destroy),t.$$.fragment.d(e),t.$$.on_destroy=t.$$.fragment=null,t.$$.ctx={})}function ft(t,e){t.$$.dirty||(F.push(t),K||(K=!0,G.then(U)),t.$$.dirty=r()),t.$$.dirty[e]=!0}function ht(e,n,i,s,o,c){const l=C;R(e);const d=n.props||{},u=e.$$={fragment:null,ctx:null,props:c,update:t,not_equal:o,bound:r(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(l?l.$$.context:[]),callbacks:r(),dirty:null};let f=!1;u.ctx=i?i(e,d,(t,n)=>{u.ctx&&o(u.ctx[t],u.ctx[t]=n)&&(u.bound[t]&&u.bound[t](n),f&&ft(e,t))}):d,u.update(),f=!0,a(u.before_update),u.fragment=s(u.ctx),n.target&&(n.hydrate?u.fragment.l(function(t){return Array.from(t.childNodes)}(n.target)):u.fragment.c(),n.intro&&rt(e.$$.fragment),dt(e,n.target,n.anchor),U()),R(l)}class gt{$destroy(){ut(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(){}}const mt=[];function pt(e,n=t){let i;const r=[];function a(t){if(o(e,t)&&(e=t,i)){const t=!mt.length;for(let t=0;t<r.length;t+=1){const n=r[t];n[1](),mt.push(n,e)}if(t){for(let t=0;t<mt.length;t+=2)mt[t][0](mt[t+1]);mt.length=0}}}return{set:a,update:function(t){a(t(e))},subscribe:function(s,o=t){const c=[s,o];return r.push(c),1===r.length&&(i=n(a)||t),s(e),()=>{const t=r.indexOf(c);-1!==t&&r.splice(t,1),0===r.length&&(i(),i=null)}}}}const vt=[];let $t=pt(2);const wt=t=>$t.update(()=>t),xt=()=>vt[l($t)],yt=t=>xt().widgets.get(t),_t=(t="")=>{try{const e={_title:pt(t),widgets:new Map,_widgetsCount:pt(0)};vt.push(e),wt(vt.length-1)}catch(t){}},bt=(t,e="",n="",i={w:8,h:5,x:1/0,y:0})=>{try{const r={type:t,sizeAndPos:i,_title:pt(e),_data:pt(n)};xt().widgets.set(Symbol(),r),xt()._widgetsCount.update(t=>t+1)}catch(t){}},Pt=t=>{try{vt.splice(t,1)}catch(t){}};function It(e){var n,i;return{c(){(n=P("button")).innerHTML='<img src="/images/arrowRightIcon.svg" alt="prev">',z(n,"class","svelte-1l6716q"),i=T(n,"click",e.left)},m(t,e){y(t,n,e)},p:t,i:t,o:t,d(t){t&&_(n),i()}}}function kt(t){const e=H();return{left:()=>{e("left")}}}_t("one"),_t("two"),_t("three"),_t("four"),_t("five"),bt("Sticky","Welcome","This is currently only a prototype. The concept is a personal dash space for organising activities. At the moment functionality is limited.",{w:8,h:5,x:0,y:0}),bt("Sticky","Widgets","These are the building block. Each has an editiable title. You can resize and drag and drop them.",{w:8,h:6,x:8,y:4}),bt("Sticky","Sticky","A type of Widget. Currently the only type available for the prototype. It accepts a text input. Future versions will accept and automatically convert image urls, dates, links, and todo lists.",{w:8,h:5,x:0,y:6}),bt("Sticky","Add Widget","You may add more widgets using the widgets menu in the bottom right corner.",{w:8,h:5,x:0,y:8}),bt("Sticky","Delete Widgets","You can remove widgets by activating the trash from the widgets menu and clicking the trash icon within each widget to be removed.",{w:8,h:5,x:16,y:8});class Et extends gt{constructor(t){super(),ht(this,t,kt,It,o,[])}}function Tt(e){var n,i;return{c(){(n=P("button")).innerHTML='<img src="/images/arrowRightIcon.svg" alt="next">',z(n,"class","svelte-1bwa45r"),i=T(n,"click",e.right)},m(t,e){y(t,n,e)},p:t,i:t,o:t,d(t){t&&_(n),i()}}}function zt(t){const e=H();return{right:()=>{e("right")}}}class Mt extends gt{constructor(t){super(),ht(this,t,zt,Tt,o,[])}}function Ot(t){var e,n,i;return{c(){z(e=P("img"),"class",n="cancel "+t.cancelPos+" svelte-1gmxc8e"),z(e,"src","/images/cancelIcon.svg"),z(e,"alt","x"),i=T(e,"click",t.trash)},m(t,n){y(t,e,n)},p(t,i){t.cancelPos&&n!==(n="cancel "+i.cancelPos+" svelte-1gmxc8e")&&z(e,"class",n)},d(t){t&&_(e),i()}}}function Wt(e){var n,i,r,a,s,o=e.active&&Ot(e);return{c(){n=P("button"),o&&o.c(),i=k(),z(r=P("img"),"src","/images/TrashIcon.svg"),z(r,"alt","-"),z(n,"class",a=f(e.active?"active":"")+" svelte-1gmxc8e"),s=T(n,"click",e.trash)},m(t,e){y(t,n,e),o&&o.m(n,null),x(n,i),x(n,r)},p(t,e){e.active?o?o.p(t,e):((o=Ot(e)).c(),o.m(n,i)):o&&(o.d(1),o=null),t.active&&a!==(a=f(e.active?"active":"")+" svelte-1gmxc8e")&&z(n,"class",a)},i:t,o:t,d(t){t&&_(n),o&&o.d(),s()}}}function At(t,e,n){let{active:i=!1,cancelPos:r="top"}=e;const a=H();return t.$set=t=>{"active"in t&&n("active",i=t.active),"cancelPos"in t&&n("cancelPos",r=t.cancelPos)},{active:i,cancelPos:r,trash:()=>{a("trash",{active:!i})}}}class Ct extends gt{constructor(t){super(),ht(this,t,At,Wt,o,["active","cancelPos"])}}function Dt(e){var n,i,r,a;return{c(){n=P("button"),z(i=P("img"),"src","/images/addIcon.svg"),z(i,"alt","+"),z(n,"class",r=f(e.active?"active":"")+" svelte-9b9csn"),a=T(n,"click",e.add)},m(t,e){y(t,n,e),x(n,i)},p(t,e){t.active&&r!==(r=f(e.active?"active":"")+" svelte-9b9csn")&&z(n,"class",r)},i:t,o:t,d(t){t&&_(n),a()}}}function Lt(t,e,n){let{active:i}=e;const r=H();return t.$set=t=>{"active"in t&&n("active",i=t.active)},{active:i,add:()=>r("add")}}class St extends gt{constructor(t){super(),ht(this,t,Lt,Dt,o,["active"])}}function jt(t,e=!1){this.isOpen=e,this.update=t,this.close=this.close.bind(this),this.open=this.open.bind(this),this.toggle=this.toggle.bind(this)}function Rt(t,e,n){const i=Object.create(t);return i.dashIndex=e[n],i.i=n,i}function Nt(t,e,n){const i=Object.create(t);return i.dash=e[n],i.i=n,i}function Yt(e){var n;return{c(){z(n=P("div"),"class","carousel svelte-168pawr")},m(t,e){y(t,n,e)},p:t,d(t){t&&_(n)}}}function Ht(t){var e;function n(t){return t.trashIsOpen?Xt:Ft}var i=n(t),r=i(t);return{c(){r.c(),e=E()},m(t,n){r.m(t,n),y(t,e,n)},p(t,a){i===(i=n(a))&&r?r.p(t,a):(r.d(1),(r=i(a))&&(r.c(),r.m(e.parentNode,e)))},d(t){r.d(t),t&&_(e)}}}function Ft(t){for(var e,n,i=t.navIndexArray,r=[],a=0;a<i.length;a+=1)r[a]=Kt(Rt(t,i,a));return{c(){e=P("div");for(var i=0;i<r.length;i+=1)r[i].c();z(e,"class",n="carousel "+t.animationClass+" svelte-168pawr")},m(t,n){y(t,e,n);for(var i=0;i<r.length;i+=1)r[i].m(e,null)},p(t,a){if(t.navIndexArray||t.$_activeDashIndex||t.editingTitle||t.$_title||t.dashboards||t.get){i=a.navIndexArray;for(var s=0;s<i.length;s+=1){const n=Rt(a,i,s);r[s]?r[s].p(t,n):(r[s]=Kt(n),r[s].c(),r[s].m(e,null))}for(;s<r.length;s+=1)r[s].d(1);r.length=i.length}t.animationClass&&n!==(n="carousel "+a.animationClass+" svelte-168pawr")&&z(e,"class",n)},d(t){t&&_(e),b(r,t)}}}function Xt(t){for(var e,n=vt,i=[],r=0;r<n.length;r+=1)i[r]=Qt(Nt(t,n,r));return{c(){e=P("div");for(var t=0;t<i.length;t+=1)i[t].c();z(e,"class","trashMenu svelte-168pawr")},m(t,n){y(t,e,n);for(var r=0;r<i.length;r+=1)i[r].m(e,null)},p(t,r){if(t.get||t.dashboards){n=vt;for(var a=0;a<n.length;a+=1){const s=Nt(r,n,a);i[a]?i[a].p(t,s):(i[a]=Qt(s),i[a].c(),i[a].m(e,null))}for(;a<i.length;a+=1)i[a].d(1);i.length=n.length}},d(t){t&&_(e),b(i,t)}}}function qt(t){var e,n,i,r=vt[t.dashIndex]?l(vt[t.dashIndex]._title):"";function a(){return t.click_handler_2(t)}return{c(){e=P("button"),n=I(r),z(e,"class","nav-button-"+t.i+" svelte-168pawr"),i=T(e,"click",a)},m(t,i){y(t,e,i),x(e,n)},p(e,i){t=i,e.navIndexArray&&r!==(r=vt[t.dashIndex]?l(vt[t.dashIndex]._title):"")&&M(n,r)},d(t){t&&_(e),i()}}}function Bt(t){var e,n;function i(t){return t.editingTitle?Jt:Gt}var r=i(t),a=r(t);return{c(){e=P("div"),a.c(),n=k(),z(e,"class","current svelte-168pawr")},m(t,i){y(t,e,i),a.m(e,null),x(e,n)},p(t,s){r===(r=i(s))&&a?a.p(t,s):(a.d(1),(a=r(s))&&(a.c(),a.m(e,n)))},d(t){t&&_(e),a.d()}}}function Gt(t){var e,n,i;return{c(){e=P("button"),n=I(t.$_title),z(e,"class","active-dash-title svelte-168pawr"),i=T(e,"click",t.click_handler_1)},m(t,i){y(t,e,i),x(e,n)},p(t,e){t.$_title&&M(n,e.$_title)},d(t){t&&_(e),i()}}}function Jt(t){var e,n;return{c(){z(e=P("input"),"type","text"),e.autofocus=!0,z(e,"class","svelte-168pawr"),n=[T(e,"input",t.input_input_handler),T(e,"blur",t.closeEditingTitle)]},m(n,i){y(n,e,i),e.value=t.$_title,e.focus()},p(t,n){t.$_title&&e.value!==n.$_title&&(e.value=n.$_title)},d(t){t&&_(e),a(n)}}}function Kt(t){var e;function n(t){return t.dashIndex===t.$_activeDashIndex?Bt:qt}var i=n(t),r=i(t);return{c(){r.c(),e=E()},m(t,n){r.m(t,n),y(t,e,n)},p(t,a){i===(i=n(a))&&r?r.p(t,a):(r.d(1),(r=i(a))&&(r.c(),r.m(e.parentNode,e)))},d(t){r.d(t),t&&_(e)}}}function Qt(t){var e,n,i,r,a,s,o,c=l(t.dash._title);function d(){return t.click_handler(t)}return{c(){e=P("button"),n=P("h3"),i=I(c),r=k(),a=P("img"),s=k(),z(n,"class","svelte-168pawr"),z(a,"src","/images/trashIcon.svg"),z(a,"alt","-"),z(a,"class","svelte-168pawr"),z(e,"class","svelte-168pawr"),o=T(e,"click",d)},m(t,o){y(t,e,o),x(e,n),x(n,i),x(e,r),x(e,a),x(e,s)},p(e,n){t=n},d(t){t&&_(e),o()}}}function Ut(t){var e,n,i,r,a,s,o,c=new Et({});c.$on("left",t.left_handler);var l=new Ct({props:{active:t.trashIsOpen,cancelPos:"right"}});function d(t){return vt.length>0?Ht:Yt}l.$on("trash",t.trash.toggle);var u=d(),f=u(t),h=new St({});h.$on("add",t.addNewDash);var g=new Mt({});return g.$on("right",t.right_handler),{c(){e=P("nav"),c.$$.fragment.c(),n=k(),l.$$.fragment.c(),i=k(),r=P("div"),f.c(),a=k(),h.$$.fragment.c(),s=k(),g.$$.fragment.c(),z(r,"class","container svelte-168pawr"),z(e,"class","svelte-168pawr")},m(t,d){y(t,e,d),dt(c,e,null),x(e,n),dt(l,e,null),x(e,i),x(e,r),f.m(r,null),x(e,a),dt(h,e,null),x(e,s),dt(g,e,null),o=!0},p(t,e){var n={};t.trashIsOpen&&(n.active=e.trashIsOpen),l.$set(n),u===(u=d())&&f?f.p(t,e):(f.d(1),(f=u(e))&&(f.c(),f.m(r,null)))},i(t){o||(rt(c.$$.fragment,t),rt(l.$$.fragment,t),rt(h.$$.fragment,t),rt(g.$$.fragment,t),o=!0)},o(t){at(c.$$.fragment,t),at(l.$$.fragment,t),at(h.$$.fragment,t),at(g.$$.fragment,t),o=!1},d(t){t&&_(e),ut(c),ut(l),f.d(),ut(h),ut(g)}}}function Vt(e,n,i){let r,a,s=t;d(e,$t,t=>{r=t,i("$_activeDashIndex",r)}),e.$$.on_destroy.push(()=>s());let o=!1;const l=new jt(t=>{const e=o=t;return i("trashIsOpen",o),e});let u=!1;let f="";const h=t=>{const e=(vt.length+r+t)%vt.length;0!==t&&e!==r&&(i("animationClass",f=t>0?"forward-animation":"backward-animation"),setTimeout(()=>{wt(e),i("animationClass",f="")},500))};let g=r;const m=t=>{Pt(t),wt((vt.length+r-1)%vt.length)};let p,v;return e.$$.update=(t={$_activeDashIndex:1})=>{t.$_activeDashIndex&&i("navIndexArray",p=(t=>{let e=[];for(let n=0;n<7;n++)if(vt.length<5)e.push(t+n-3);else{const i=(vt.length+t+n-3)%vt.length;e.push(i)}return e})(r)),t.$_activeDashIndex&&(v=vt[r]?vt[r]._title:pt(""),s(),s=c(v,t=>{a=t,i("$_title",a)}),i("_title",v))},{trashIsOpen:o,trash:l,editingTitle:u,animationClass:f,setActiveDash:h,addNewDash:()=>{g=r,_t(""),i("editingTitle",u=!0),wt(vt.length-1)},closeEditingTitle:()=>{i("editingTitle",u=!1),""===event.target.value&&(Pt(vt.length-1),wt(g))},deleteDash:m,navIndexArray:p,$_activeDashIndex:r,_title:v,$_title:a,left_handler:function(){return h(-1)},click_handler:function({i:t}){return m(t)},input_input_handler:function(){v.set(this.value)},click_handler_1:function(){const t=u=!0;return i("editingTitle",u),t},click_handler_2:function({i:t}){return h(t>3?1:-1)},right_handler:function(){return h(1)}}}jt.prototype.close=function(){setTimeout(()=>{this.isOpen&&(this.isOpen=!1,this.update(this.isOpen))},0),window.removeEventListener("click",this.close,{capture:!0})},jt.prototype.open=function(){this.isOpen=!0,window.addEventListener("click",this.close,{capture:!0}),this.update(this.isOpen)},jt.prototype.toggle=function(){this.isOpen?this.close():this.open()};class Zt extends gt{constructor(t){super(),ht(this,t,Vt,Ut,o,[])}}function te(t){return--t*t*t*t*t+1}function ee(t){var e,n,i;return{c(){e=P("article"),n=I(t.$_data),z(e,"class","svelte-1ovrvdo"),i=T(e,"click",t.click_handler)},m(t,i){y(t,e,i),x(e,n)},p(t,e){t.$_data&&M(n,e.$_data)},d(t){t&&_(e),i()}}}function ne(t){var e,n;return{c(){(e=P("textarea")).autofocus=!0,z(e,"class","svelte-1ovrvdo"),n=[T(e,"input",t.textarea_input_handler),T(e,"change",t.disableEditIfNoFocus),T(e,"blur",t.blur_handler)]},m(n,i){y(n,e,i),e.value=t.$_data,e.focus()},p(t,n){t.$_data&&(e.value=n.$_data)},d(t){t&&_(e),a(n)}}}function ie(e){var n;function i(t){return t.editing?ne:ee}var r=i(e),a=r(e);return{c(){a.c(),n=E()},m(t,e){a.m(t,e),y(t,n,e)},p(t,e){r===(r=i(e))&&a?a.p(t,e):(a.d(1),(a=r(e))&&(a.c(),a.m(n.parentNode,n)))},i:t,o:t,d(t){a.d(t),t&&_(n)}}}function re(t,e,n){let i,{_data:r}=e;d(t,r,t=>{i=t,n("$_data",i)});let a=!0;return t.$set=t=>{"_data"in t&&n("_data",r=t._data)},{_data:r,editing:a,disableEditIfNoFocus:()=>{this!==document.activeElement&&n("editing",a=!1)},$_data:i,textarea_input_handler:function(){r.set(this.value)},blur_handler:function(){const t=a=!1;return n("editing",a),t},click_handler:function(){const t=a=!0;return n("editing",a),t}}}class ae extends gt{constructor(t){super(),ht(this,t,re,ie,o,["_data"])}}function se(e){var n,i;return{c(){z(n=P("textarea"),"class","svelte-1jhz1zv"),i=T(n,"input",e.textarea_input_handler)},m(t,i){y(t,n,i),n.value=e.$_data},p(t,e){t.$_data&&(n.value=e.$_data)},i:t,o:t,d(t){t&&_(n),i()}}}function oe(t){var e,n=new ae({props:{_data:t._data}});return{c(){n.$$.fragment.c()},m(t,i){dt(n,t,i),e=!0},p(t,e){var i={};t._data&&(i._data=e._data),n.$set(i)},i(t){e||(rt(n.$$.fragment,t),e=!0)},o(t){at(n.$$.fragment,t),e=!1},d(t){ut(n,t)}}}function ce(t){var e,n,i,r,a=[oe,se],s=[];function o(t){return"Text"===t.type?0:1}return e=o(t),n=s[e]=a[e](t),{c(){n.c(),i=E()},m(t,n){s[e].m(t,n),y(t,i,n),r=!0},p(t,r){var c=e;(e=o(r))===c?s[e].p(t,r):(nt(),at(s[c],1,1,()=>{s[c]=null}),it(),(n=s[e])||(n=s[e]=a[e](r)).c(),rt(n,1),n.m(i.parentNode,i))},i(t){r||(rt(n),r=!0)},o(t){at(n),r=!1},d(t){s[e].d(t),t&&_(i)}}}function le(t,e,n){let i,r,{_data:a}=e;return d(t,a,t=>{i=t,n("$_data",i)}),Y(()=>{var t;n("type",r=(t=i)&&t.length>0?"Text":void 0)}),t.$set=t=>{"_data"in t&&n("_data",a=t._data)},{_data:a,type:r,$_data:i,textarea_input_handler:function(){a.set(this.value)}}}class de extends gt{constructor(t){super(),ht(this,t,le,ce,o,["_data"])}}function ue(t){var e,n,i;return{c(){e=P("h2"),n=I(t.$_title),z(e,"class","svelte-1w89jgw"),i=T(e,"click",t.click_handler)},m(t,i){y(t,e,i),x(e,n)},p(t,e){t.$_title&&M(n,e.$_title)},d(t){t&&_(e),i()}}}function fe(t){var e,n;return{c(){z(e=P("input"),"type","text"),e.autofocus=!0,z(e,"class","svelte-1w89jgw"),n=[T(e,"input",t.input_input_handler),T(e,"blur",t.blur_handler)]},m(n,i){y(n,e,i),e.value=t.$_title,e.focus()},p(t,n){t.$_title&&e.value!==n.$_title&&(e.value=n.$_title)},d(t){t&&_(e),a(n)}}}function he(e){var n,i,r;return{c(){n=P("div"),i=I(e.type),r=I(" Widget type not yet implemented"),z(n,"class","svelte-1w89jgw")},m(t,e){y(t,n,e),x(n,i),x(n,r)},p:t,i:t,o:t,d(t){t&&_(n)}}}function ge(t){var e,n=new de({props:{_data:t._data}});return{c(){n.$$.fragment.c()},m(t,i){dt(n,t,i),e=!0},p(t,e){var i={};t._data&&(i._data=e._data),n.$set(i)},i(t){e||(rt(n.$$.fragment,t),e=!0)},o(t){at(n.$$.fragment,t),e=!1},d(t){ut(n,t)}}}function me(t){var e,n,i,r,a,s,o,c;function l(t){return t.editingTitle?fe:ue}var d=l(t),u=d(t),f=[ge,he],h=[];function g(t){return"Sticky"===t.type?0:1}i=g(t),r=h[i]=f[i](t);var m=new Ct({});return m.$on("trash",t.removeSelf),{c(){e=P("div"),u.c(),n=k(),r.c(),a=k(),s=P("span"),m.$$.fragment.c(),z(s,"class","svelte-1w89jgw"),z(e,"class","svelte-1w89jgw")},m(t,r){y(t,e,r),u.m(e,null),x(e,n),h[i].m(e,null),x(e,a),x(e,s),dt(m,s,null),c=!0},p(t,s){d===(d=l(s))&&u?u.p(t,s):(u.d(1),(u=d(s))&&(u.c(),u.m(e,n)));var o=i;(i=g(s))===o?h[i].p(t,s):(nt(),at(h[o],1,1,()=>{h[o]=null}),it(),(r=h[i])||(r=h[i]=f[i](s)).c(),rt(r,1),r.m(e,a))},i(t){c||(rt(r),rt(m.$$.fragment,t),Q(()=>{o||(o=ot(e,pe,{duration:300,easing:te},!0)),o.run(1)}),c=!0)},o(t){at(r),at(m.$$.fragment,t),o||(o=ot(e,pe,{duration:300,easing:te},!1)),o.run(0),c=!1},d(t){t&&_(e),u.d(),h[i].d(),ut(m),t&&o&&o.end()}}}function pe(t,{delay:e=0,duration:n=400,easing:i=easing.cubicOut}){const r=getComputedStyle(t),a=+r.opacity;parseFloat(r.width);return{delay:e,duration:n,easing:i,css:t=>"overflow: hidden;"+`opacity: ${Math.min(20*t,1)*a};`+`transform: rotateY(${90*(t-1)}deg)`}}function ve(t,e,n){let i,{ref:r}=e,{_title:a,_data:s,type:o}=yt(r);d(t,a,t=>{i=t,n("$_title",i)});let c=!1;return t.$set=t=>{"ref"in t&&n("ref",r=t.ref)},{ref:r,_title:a,_data:s,type:o,editingTitle:c,removeSelf:()=>{((t,e=l($t))=>{try{vt[e].widgets.delete(t)&&vt[e]._widgetsCount.update(t=>t-1)}catch(t){}})(r)},$_title:i,input_input_handler:function(){a.set(this.value)},blur_handler:function(){const t=c=!1;return n("editingTitle",c),t},click_handler:function(){const t=c=!0;return n("editingTitle",c),t}}}class $e extends gt{constructor(t){super(),ht(this,t,ve,me,o,["ref"])}}const we=(t,e=0)=>{let n;return function(...i){clearTimeout(n),n=setTimeout(()=>t.apply(this,i),e)}};function xe(t){return{pageX:t.changedTouches?t.changedTouches[0].pageX:t.pageX,pageY:t.changedTouches?t.changedTouches[0].pageY:t.pageY}}function ye(t){return Math.max(...t.map(t=>t.y+t.h),1)}const _e=(t,e,n,i)=>{var r=!1,a=n;if(t)for(var s=t.length-1;s>=0;s--){const[n,i]=t[s];if(e<=n){r=!0,a=i;break}}return r||(a=i),a},be=(t,e)=>Array.from(Array(t),()=>new Array(e));function Pe(t,e,n,i){let r=be(n,i);for(var a=0;a<t.length;a++){const n=t[a],{x:i,y:c,w:l,h:d,id:u,responsive:{valueW:f}}=n;if(-1===e.indexOf(u))for(var s=c;s<c+d;s++){const t=r[s];if(t)for(var o=i;o<i+(l-f);o++)t[o]=n}}return r}function Ie(t,e,n=ye(t)){let i=be(n,e);return t.forEach((n,r)=>{let a=t.slice(r+1).map(t=>t.id),s=function(t,e,n=[],i){const{w:r}=e;let a=e.responsive.valueW;for(var s=0;s<t.length;s++){const e=t[s];for(var o=0;o<e.length;o++){const t=e.findIndex(t=>void 0===t);if(-1!==t){for(var c=e.slice(t),l=c.length,d=0;d<c.length;d++)if(void 0!==c[d]){l=d;break}return a=Math.max(r-l,0),{y:s,x:t,responsive:{valueW:a}}}}}return a=Math.max(r-i,0),{y:ye(n),x:0,responsive:{valueW:a}}}(i,n,t,e);t=t.map(t=>t.id===n.id?{...n,...s}:t),i=Pe(t,a,ye(t),e)}),t}function ke(t,e){const n=e.findIndex(e=>e.id===t);return{index:n,item:e[n]}}function Ee(t,e,n=[]){let i=t[0].length-(e.w-e.responsive.valueW);for(var r=0;r<t.length;r++){const n=t[r];for(var a=0;a<i+1;a++){if(n.slice(a,a+(e.w-e.responsive.valueW)).every(t=>void 0===t)){if(t.slice(r,r+e.h).every(t=>t.slice(a,a+(e.w-e.responsive.valueW)).every(t=>void 0===t)))return{y:r,x:a}}}}return{y:ye(n),x:0}}function Te(t,e,n){return n.id===t.id?{...t,...e}:n}const ze=(t,e,n)=>n.id===t.id?e:n;function Me(t,e){return Math.max(ye(t),2)*e}const{window:Oe}=ct,We=({item:t,items:e,i:n})=>({item:e,index:e}),Ae=({item:t,items:e,i:n})=>({item:t,index:n});function Ce(t,e,n){const i=Object.create(t);return i.item=e[n],i.i=n,i}function De(t){var e,n;return{c(){z(e=P("div"),"class","svlt-grid-resizer svelte-14tbpr7"),n=[T(e,"touchstart",t.resizeOnMouseDown.bind(this,t.item.id)),T(e,"mousedown",t.resizeOnMouseDown.bind(this,t.item.id))]},m(t,n){y(t,e,n)},p(e,n){t=n},d(t){t&&_(e),a(n)}}}function Le(t,e){var i,r,s,o,c;const l=e.$$slots.default,d=function(t,e,n){if(t){const i=u(t,e,n);return t[0](i)}}(l,e,Ae);var f=e.item.resizable&&De(e);return{key:t,first:null,c(){i=P("div"),d&&d.c(),r=k(),f&&f.c(),z(i,"class","svlt-grid-item svelte-14tbpr7"),z(i,"style",s=(e.useTransform?`transform: translate(${e.item.drag.dragging?e.item.drag.left:e.item.x*e.xPerPx+e.gap}px, ${e.item.drag.dragging?e.item.drag.top:e.item.y*e.yPerPx+e.gap}px);`:"")+";\n        "+(e.useTransform?"":`top: ${e.item.drag.dragging?e.item.drag.top:e.item.y*e.yPerPx+e.gap}px`)+";\n        "+(e.useTransform?"":`left: ${e.item.drag.dragging?e.item.drag.left:e.item.x*e.xPerPx+e.gap}px`)+";\n        width: "+(e.item.resize.resizing?e.item.resize.width:e.item.w*e.xPerPx-2*e.gap-e.item.responsive.valueW*e.xPerPx)+"px;\n        height: "+(e.item.resize.resizing?e.item.resize.height:e.item.h*e.yPerPx-2*e.gap)+"px;\n        z-index: "+(e.item.drag.dragging||e.item.resize.resizing?3:1)+";\n        opacity: "+(e.item.resize.resizing?.5:1)),c=[T(i,"mousedown",e.item.draggable?e.dragOnMouseDown.bind(this,e.item.id):null),T(i,"touchstart",e.item.draggable?e.dragOnMouseDown.bind(this,e.item.id):null)],this.first=i},l(t){d&&d.l(div_nodes)},m(t,e){y(t,i,e),d&&d.m(i,null),x(i,r),f&&f.m(i,null),o=!0},p(t,r){e=r,d&&d.p&&(t.$$scope||t.items)&&d.p(function(t,e,i,r){return t[1]?n({},n(e.$$scope.changed||{},t[1](r?r(i):{}))):e.$$scope.changed||{}}(l,e,t,We),u(l,e,Ae)),e.item.resizable?f||((f=De(e)).c(),f.m(i,null)):f&&(f.d(1),f=null),(!o||t.useTransform||t.items||t.xPerPx||t.gap)&&s!==(s=(e.useTransform?`transform: translate(${e.item.drag.dragging?e.item.drag.left:e.item.x*e.xPerPx+e.gap}px, ${e.item.drag.dragging?e.item.drag.top:e.item.y*e.yPerPx+e.gap}px);`:"")+";\n        "+(e.useTransform?"":`top: ${e.item.drag.dragging?e.item.drag.top:e.item.y*e.yPerPx+e.gap}px`)+";\n        "+(e.useTransform?"":`left: ${e.item.drag.dragging?e.item.drag.left:e.item.x*e.xPerPx+e.gap}px`)+";\n        width: "+(e.item.resize.resizing?e.item.resize.width:e.item.w*e.xPerPx-2*e.gap-e.item.responsive.valueW*e.xPerPx)+"px;\n        height: "+(e.item.resize.resizing?e.item.resize.height:e.item.h*e.yPerPx-2*e.gap)+"px;\n        z-index: "+(e.item.drag.dragging||e.item.resize.resizing?3:1)+";\n        opacity: "+(e.item.resize.resizing?.5:1))&&z(i,"style",s)},i(t){o||(rt(d,t),o=!0)},o(t){at(d,t),o=!1},d(t){t&&_(i),d&&d.d(t),f&&f.d(),a(c)}}}function Se(t){var e,n;return{c(){z(e=P("div"),"class","svlt-grid-shadow svelte-14tbpr7"),z(e,"style",n=(t.useTransform?`transform: translate(${t.shadow.drag.dragging?t.shadow.drag.left:t.shadow.x*t.xPerPx+t.gap}px, ${t.shadow.drag.dragging?t.shadow.drag.top:t.shadow.y*t.yPerPx+t.gap}px);`:"")+";\n        "+(t.useTransform?"":`top: ${t.shadow.drag.dragging?t.shadow.drag.top:t.shadow.y*t.yPerPx+t.gap}px`)+";\n        "+(t.useTransform?"":`left: ${t.shadow.drag.dragging?t.shadow.drag.left:t.shadow.x*t.xPerPx+t.gap}px`)+";\n    width:"+(t.shadow.w*t.xPerPx-2*t.gap-t.shadow.responsive.valueW*t.xPerPx)+"px;\n    height:"+(t.shadow.h*t.yPerPx-2*t.gap)+"px;")},m(t,n){y(t,e,n)},p(t,i){(t.useTransform||t.shadow||t.xPerPx||t.gap)&&n!==(n=(i.useTransform?`transform: translate(${i.shadow.drag.dragging?i.shadow.drag.left:i.shadow.x*i.xPerPx+i.gap}px, ${i.shadow.drag.dragging?i.shadow.drag.top:i.shadow.y*i.yPerPx+i.gap}px);`:"")+";\n        "+(i.useTransform?"":`top: ${i.shadow.drag.dragging?i.shadow.drag.top:i.shadow.y*i.yPerPx+i.gap}px`)+";\n        "+(i.useTransform?"":`left: ${i.shadow.drag.dragging?i.shadow.drag.left:i.shadow.x*i.xPerPx+i.gap}px`)+";\n    width:"+(i.shadow.w*i.xPerPx-2*i.gap-i.shadow.responsive.valueW*i.xPerPx)+"px;\n    height:"+(i.shadow.h*i.yPerPx-2*i.gap)+"px;")&&z(e,"style",n)},d(t){t&&_(e)}}}function je(t){var e,n,i,r,a=[],s=new Map,o=t.items;const c=t=>t.item.id;for(var l=0;l<o.length;l+=1){let e=Ce(t,o,l),n=c(e);s.set(n,a[l]=Le(n,e))}var d=t.shadow.active&&Se(t);return{c(){for(e=P("div"),l=0;l<a.length;l+=1)a[l].c();n=k(),d&&d.c(),z(e,"class","svlt-grid-container svelte-14tbpr7"),O(e,"height",t.ch+"px"),W(e,"svlt-grid-transition",!t.focuesdItem),r=T(Oe,"resize",we(t.onResize,300))},m(r,s){for(y(r,e,s),l=0;l<a.length;l+=1)a[l].m(e,null);x(e,n),d&&d.m(e,null),t.div_binding(e),i=!0},p(t,r){const o=r.items;nt(),a=function(t,e,n,i,r,a,s,o,c,l,d,u){let f=t.length,h=a.length,g=f;const m={};for(;g--;)m[t[g].key]=g;const p=[],v=new Map,$=new Map;for(g=h;g--;){const t=u(r,a,g),o=n(t);let c=s.get(o);c?i&&c.p(e,t):(c=l(o,t),c.c()),v.set(o,p[g]=c),o in m&&$.set(o,Math.abs(g-m[o]))}const w=new Set,x=new Set;function y(t){rt(t,1),t.m(o,d),s.set(t.key,t),d=t.first,h--}for(;f&&h;){const e=p[h-1],n=t[f-1],i=e.key,r=n.key;e===n?(d=e.first,f--,h--):v.has(r)?!s.has(i)||w.has(i)?y(e):x.has(r)?f--:$.get(i)>$.get(r)?(x.add(i),y(e)):(w.add(r),f--):(c(n,s),f--)}for(;f--;){const e=t[f];v.has(e.key)||c(e,s)}for(;h;)y(p[h-1]);return p}(a,t,c,1,r,o,s,e,lt,Le,n,Ce),it(),r.shadow.active?d?d.p(t,r):((d=Se(r)).c(),d.m(e,null)):d&&(d.d(1),d=null),i&&!t.ch||O(e,"height",r.ch+"px"),t.focuesdItem&&W(e,"svlt-grid-transition",!r.focuesdItem)},i(t){if(!i){for(var e=0;e<o.length;e+=1)rt(a[e]);i=!0}},o(t){for(l=0;l<a.length;l+=1)at(a[l]);i=!1},d(n){for(n&&_(e),l=0;l<a.length;l+=1)a[l].d();d&&d.d(),t.div_binding(null),r()}}}function Re(t,e,n){let i,r,a,s,o,c,l,d,{useTransform:u=!1,items:f=[],cols:h=0,dragDebounceMs:g=350,gap:m=0,rowHeight:p=150,breakpoints:v,fillEmpty:$=!0}=e,w=p,x=h,y={w:0,h:0,x:0,y:0,active:!1,id:null,responsive:{valueW:0},min:{},max:{}},_=Me(f,w);const b=H(),P=()=>document.documentElement.clientWidth;var I;let k,E,T,z;function M(t){let{pageX:e,pageY:i}=xe(t);e-=a.x,i-=a.y;const l=z+i-E,u=T+(e-k),{responsive:{valueW:h}}=r;let g=Math.round(u/s)+h;const{h:m=1,w:p=1}=r.min,{h:v,w:$=c-r.x+h}=r.max;g=Math.min(Math.max(g,p),$);let x=Math.round(l/w);v&&(x=Math.min(x,v)),x=Math.max(x,m),n("shadow",y={...y,w:g,h:x});let _=f[o];f[o]={..._,resize:{resizing:!0,width:u,height:l},w:g,h:x},n("items",f),d||C()}function O(t){t.stopPropagation();let e=f[o];f[o]={...e,resize:{resizing:!1,width:0,height:0}},n("items",f),window.removeEventListener("mousemove",M,!1),window.removeEventListener("touchmove",M,!1),window.removeEventListener("mouseup",O,!1),window.removeEventListener("touchend",O,!1),n("shadow",y={...y,w:0,h:0,x:0,y:0,active:!1,id:null,responsive:{valueW:0},min:{},max:{}}),j(),n("focuesdItem",r=void 0),d=!1}I=()=>{a=i.getBoundingClientRect();let t=_e(v,P(),h,x);c=t,l=document.documentElement.clientWidth,v&&n("items",f=Ie(f,t)),n("xPerPx",s=a.width/t),b("mount",{cols:t,xPerPx:s,yPerPx:w})},N().$$.on_mount.push(I);let W=0,A=0;const C=we(j,g);let D={};function L(t){t.stopPropagation();let{pageX:e,pageY:i}=xe(t);const l=i-a.y,d=e-a.x;let u=Math.round((d-W)/s),h=Math.round((l-A)/w);u=Math.max(Math.min(u,c-(r.w-r.responsive.valueW)),0),h=Math.max(h,0);let g=f[o];f[o]={...g,drag:{dragging:!0,top:l-A,left:d-W},x:u,y:h},n("items",f),n("shadow",y={...y,x:u,y:h}),C()}function S(t){window.removeEventListener("mousemove",L,!1),window.removeEventListener("touchmove",L,!1),window.removeEventListener("mouseup",S,!1),window.removeEventListener("touchend",S,!1);let e=f[o];f[o]={...e,drag:{dragging:!1,top:0,left:0}},n("items",f),W=0,A=0,n("shadow",y={...y,w:0,h:0,x:0,y:0,active:!1,id:null}),j(),n("focuesdItem",r=void 0)}function j(t){const e=f[o];let i=_e(v,P(),h,x),r=function(t,e,n,i){let r=Pe(e,[t.id],ye(e),n);const a=function(t,e,n){const{w:i,h:r,x:a,y:s,responsive:{valueW:o}}=n,c=e.slice(s,s+r);let l=[];for(var d=0;d<c.length;d++){let t=c[d].slice(a,a+(i-o));l=[...l,...t.map(t=>t&&t.id).filter(t=>t)]}return[...l.filter((t,e)=>l.indexOf(t)==e)]}(0,r,t);let s=function(t,e){return e.filter(e=>-1!==t.indexOf(e.id))}(a,e);if(s.find(t=>t.static)&&i)return e.map(ze.bind(null,t,i));r=Pe(e,a,ye(e),n);let o=e,c=a,l=[];return s.forEach(t=>{let i=Ee(r,t,o);if(l.push(t.id),i){o=o.map(Te.bind(null,t,i));let a=c.filter(t=>-1===l.indexOf(t));r=Pe(o,a,ye(e),n)}}),o}(e,f,i,D);$&&r.forEach(t=>{t.id!==e.id&&(r=r.map(e=>e.id===t.id?{...e,...Ee(Pe(r,[t.id],ye(r),i),t,r)}:e))}),n("items",f=r),b("adjust",{focuesdItem:e})}Y(()=>{r||(n("ch",_=Me(f,w)),h!==x&&a&&(n("xPerPx",s=a.width/h),x=h))});let{$$slots:R={},$$scope:F}=e;return t.$set=t=>{"useTransform"in t&&n("useTransform",u=t.useTransform),"items"in t&&n("items",f=t.items),"cols"in t&&n("cols",h=t.cols),"dragDebounceMs"in t&&n("dragDebounceMs",g=t.dragDebounceMs),"gap"in t&&n("gap",m=t.gap),"rowHeight"in t&&n("rowHeight",p=t.rowHeight),"breakpoints"in t&&n("breakpoints",v=t.breakpoints),"fillEmpty"in t&&n("fillEmpty",$=t.fillEmpty),"$$scope"in t&&n("$$scope",F=t.$$scope)},{useTransform:u,items:f,cols:h,dragDebounceMs:g,gap:m,rowHeight:p,breakpoints:v,fillEmpty:$,container:i,focuesdItem:r,xPerPx:s,yPerPx:w,shadow:y,ch:_,onResize:function(){let t=document.documentElement.clientWidth;if(t!==l){l=t,a=i.getBoundingClientRect();let e=_e(v,t,h,x);c=e,n("xPerPx",s=a.width/e),b("resize",{cols:e,xPerPx:s,yPerPx:w}),v&&n("items",f=Ie(f,e))}},resizeOnMouseDown:function(t,e){e.stopPropagation();let{pageX:i,pageY:l}=xe(e);const{item:u,index:g}=ke(t,f);o=g,n("focuesdItem",r=u),D={...u},d=u.h+u.y===ye(f),n("shadow",y={...y,...r,active:!0}),k=i-a.x,E=l-a.y,T=u.w*s-2*m-r.responsive.valueW*s,z=u.h*w-2*m,c=_e(v,P(),h,x),window.addEventListener("mousemove",M,!1),window.addEventListener("touchmove",M,!1),window.addEventListener("mouseup",O,!1),window.addEventListener("touchend",O,!1)},dragOnMouseDown:function(t,e){e.stopPropagation();let{pageX:i,pageY:s}=xe(e);const{item:l,index:d}=ke(t,f);o=d,n("focuesdItem",r=l),D={...l},n("shadow",y={...y,...l,active:!0});let g,m,{currentTarget:p}=e;if(u){const{x:t,y:e}=($=p.style.transform,w=($=$.slice(10,-3)).indexOf("px, "),{x:+$.slice(0,w),y:+$.slice(w+4)});g=t,m=e}else g=p.offsetLeft,m=p.offsetTop;var $,w;i-=a.x,s-=a.y,W=i-g,A=s-m,c=_e(v,P(),h,x),l?(window.addEventListener("mousemove",L,!1),window.addEventListener("touchmove",L,!1),window.addEventListener("mouseup",S,!1),window.addEventListener("touchend",S,!1)):console.warn("Can not get item")},div_binding:function(t){X[t?"unshift":"push"](()=>{n("container",i=t)})},$$slots:R,$$scope:F}}class Ne extends gt{constructor(t){super(),ht(this,t,Re,je,o,["useTransform","items","cols","dragDebounceMs","gap","rowHeight","breakpoints","fillEmpty"])}}function Ye(t){return Math.max(...t.map(t=>t.y+t.h),1)}const He=(t,e)=>Array.from(Array(t),()=>new Array(e));function Fe(t,e,n,i){let r=He(n,i);for(var a=0;a<t.length;a++){const n=t[a],{x:i,y:c,w:l,h:d,id:u,responsive:{valueW:f}}=n;if(-1===e.indexOf(u))for(var s=c;s<c+d;s++){const t=r[s];if(t)for(var o=i;o<i+(l-f);o++)t[o]=n}}return r}function Xe(t,e,n=Ye(t)){let i=He(n,e);return t.forEach((n,r)=>{let a=t.slice(r+1).map(t=>t.id),s=function(t,e,n=[],i){const{w:r}=e;let a=e.responsive.valueW;for(var s=0;s<t.length;s++){const e=t[s];for(var o=0;o<e.length;o++){const t=e.findIndex(t=>void 0===t);if(-1!==t){for(var c=e.slice(t),l=c.length,d=0;d<c.length;d++)if(void 0!==c[d]){l=d;break}return a=Math.max(r-l,0),{y:s,x:t,responsive:{valueW:a}}}}}return a=Math.max(r-i,0),{y:Ye(n),x:0,responsive:{valueW:a}}}(i,n,t,e);t=t.map(t=>t.id===n.id?{...n,...s}:t),i=Fe(t,a,Ye(t),e)}),t}function qe(t,e,n=[]){let i=t[0].length-(e.w-e.responsive.valueW);for(var r=0;r<t.length;r++){const n=t[r];for(var a=0;a<i+1;a++){if(n.slice(a,a+(e.w-e.responsive.valueW)).every(t=>void 0===t)){if(t.slice(r,r+e.h).every(t=>t.slice(a,a+(e.w-e.responsive.valueW)).every(t=>void 0===t)))return{y:r,x:a}}}}return{y:Ye(n),x:0}}function Be(t,e,n){return n.id===t.id?{...t,...e}:n}const Ge=(t,e,n)=>n.id===t.id?e:n;const Je={findSpaceForItem:(t,e,n)=>qe(function(t,e=Ye(t),n){let i=He(e,n);for(var r=0;r<t.length;r++){const e=t[r],{x:n,y:o,w:c,h:l,responsive:{valueW:d}}=e;for(var a=o;a<o+l;a++){const t=i[a];for(var s=n;s<n+(c-d);s++)t[s]=e}}return i}(e,Ye(e),n),t,e),appendItem:(t,e,n)=>function(t,e,n,i){let r=Fe(e,[t.id],Ye(e),n);const a=function(t,e,n){const{w:i,h:r,x:a,y:s,responsive:{valueW:o}}=n,c=e.slice(s,s+r);let l=[];for(var d=0;d<c.length;d++){let t=c[d].slice(a,a+(i-o));l=[...l,...t.map(t=>t&&t.id).filter(t=>t)]}return[...l.filter((t,e)=>l.indexOf(t)==e)]}(0,r,t);let s=function(t,e){return e.filter(e=>-1!==t.indexOf(e.id))}(a,e);if(s.find(t=>t.static)&&i)return e.map(Ge.bind(null,t,i));r=Fe(e,a,Ye(e),n);let o=e,c=a,l=[];return s.forEach(t=>{let i=qe(r,t,o);if(l.push(t.id),i){o=o.map(Be.bind(null,t,i));let a=c.filter(t=>-1===l.indexOf(t));r=Fe(o,a,Ye(e),n)}}),o}(t,[...e,t],n),resizeItems:(t,e,n)=>Xe(t,e,n),item(t){return{drag:{top:null,left:null,dragging:!1},resize:{width:null,height:null,resizing:!1},responsive:{valueW:0},static:!1,resizable:!(e=t).static,draggable:!e.static,min:{...e.min},max:{...e.max},...e};var e}};function Ke(t){var e,n=new $e({props:{ref:t.item.id}});return{c(){n.$$.fragment.c()},m(t,i){dt(n,t,i),e=!0},p(t,e){var i={};t.item&&(i.ref=e.item.id),n.$set(i)},i(t){e||(rt(n.$$.fragment,t),e=!0)},o(t){at(n.$$.fragment,t),e=!1},d(t){ut(n,t)}}}function Qe(t){var e,n,i;function r(e){var i;t.grid_items_binding.call(null,e),n=!0,i=()=>n=!1,B.push(i)}let a={fillEmpty:t.fillEmpty,items:t.items_arr,cols:t.$cols,rowHeight:50,gap:20,$$slots:{default:[Ke,({item:t})=>({item:t})]},$$scope:{ctx:t}};void 0!==t.items_arr&&(a.items=t.items_arr);var s=new Ne({props:a});return X.push(()=>{return e="items",n=r,void(-1!==(t=s).$$.props.indexOf(e)&&(t.$$.bound[e]=n,n(t.$$.ctx[e])));var t,e,n}),s.$on("adjust",t.adjust_handler),s.$on("resize",t.handleWindowResize),s.$on("mount",t.handleWindowResize),{c(){e=P("div"),s.$$.fragment.c(),z(e,"id","gridContainer"),z(e,"class","grid-container svelte-2daa0q")},m(t,n){y(t,e,n),dt(s,e,null),i=!0},p(t,e){var i={};t.fillEmpty&&(i.fillEmpty=e.fillEmpty),t.items_arr&&(i.items=e.items_arr),t.$cols&&(i.cols=e.$cols),t.$$scope&&(i.$$scope={changed:t,ctx:e}),!n&&t.items_arr&&(i.items=e.items_arr),s.$set(i)},i(t){i||(rt(s.$$.fragment,t),i=!0)},o(t){at(s.$$.fragment,t),i=!1},d(t){t&&_(e),ut(s)}}}function Ue(e,n,i){let r,a,s,o=t;d(e,$t,t=>{r=t,i("$_activeDashIndex",r)}),e.$$.on_destroy.push(()=>o());let l=[],u=[];const f=pt(40);d(e,f,t=>{s=t,i("$cols",s)});let h=!1;const g=()=>{const t=document.getElementById("gridContainer").clientWidth,e=Math.round(t/50);return e-e%2},m=t=>{const{w:e,h:n,x:i,y:r}=t;((t,e)=>{try{xt().widgets.get(t).sizeAndPos=e}catch(t){}})(t.id,{w:e,h:n,x:i,y:r})},p=(t,e)=>{let n=[];return t.forEach((t,r)=>{let{w:a,h:s,x:o,y:c}=yt(t).sizeAndPos;a>e?(a=e,i("fillEmpty",h=!0)):i("fillEmpty",h=!1);let l=Je.item({w:a,h:s,x:o,y:c,id:t});o+a>=e&&(l={...l,...Je.findSpaceForItem(l,n,e)}),n=Je.appendItem(l,n,e)}),(t=>{const e=Math.max(...t.map(t=>t.x+t.w)),n=Math.floor((s-e)/2);return t.map(t=>({...t,x:t.x+n}))})(n)};let v;return e.$$.update=(t={$_activeDashIndex:1,$_widgetsCount:1,widgets:1,$cols:1})=>{t.$_activeDashIndex&&(v=vt[r]?vt[r]._widgetsCount:pt(0),o(),o=c(v,t=>{a=t,i("$_widgetsCount",a)}),i("_widgetsCount",v)),(t.$_widgetsCount||t.widgets||t.$_activeDashIndex||t.$cols)&&a!==l.length&&(i("widgets",l=Array.from(vt[r].widgets.keys())),i("items_arr",u=p(l,s)))},{items_arr:u,cols:f,fillEmpty:h,storeWidgetSizeAndPos:m,handleWindowResize:()=>{f.update(g),i("items_arr",u=p(l,s))},_widgetsCount:v,$cols:s,grid_items_binding:function(t){u=t,i("items_arr",u),i("$_widgetsCount",a),i("widgets",l),i("$_activeDashIndex",r),i("$cols",s)},adjust_handler:function(t){return m(t.detail.focuesdItem)}}}class Ve extends gt{constructor(t){super(),ht(this,t,Ue,Qe,o,[])}}function Ze(t){var e,n,i,r,a;return{c(){e=P("img"),n=k(),i=P("div"),(r=P("button")).innerHTML='<h3 class="svelte-hyummf">Sticky</h3> <img src="/images/addIcon.svg" alt="+">',z(e,"class","cancel svelte-hyummf"),z(e,"src","/images/cancelIcon.svg"),z(e,"alt","x"),z(r,"class","svelte-hyummf"),z(i,"class","menu svelte-hyummf"),a=T(r,"click",t.click_handler)},m(t,a){y(t,e,a),y(t,n,a),y(t,i,a),x(i,r)},d(t){t&&(_(e),_(n),_(i)),a()}}}function tn(t){var e,n,i,r,a,s,o,c=new Ct({props:{active:t.trashActive}});c.$on("trash",t.toggleTrash),c.$on("trash",t.trash_handler);var l=t.menuIsOpen&&Ze(t),d=new St({props:{active:t.menuIsOpen}});return d.$on("add",t.menu.toggle),{c(){e=P("div"),n=P("nav"),c.$$.fragment.c(),i=k(),l&&l.c(),r=k(),(a=P("h2")).textContent="Widgets",s=k(),d.$$.fragment.c(),z(a,"class","svelte-hyummf"),z(n,"class","svelte-hyummf"),z(e,"class","menuArea svelte-hyummf")},m(t,u){y(t,e,u),x(e,n),dt(c,n,null),x(n,i),l&&l.m(n,null),x(n,r),x(n,a),x(n,s),dt(d,n,null),o=!0},p(t,e){var i={};t.trashActive&&(i.active=e.trashActive),c.$set(i),e.menuIsOpen?l||((l=Ze(e)).c(),l.m(n,r)):l&&(l.d(1),l=null);var a={};t.menuIsOpen&&(a.active=e.menuIsOpen),d.$set(a)},i(t){o||(rt(c.$$.fragment,t),rt(d.$$.fragment,t),o=!0)},o(t){at(c.$$.fragment,t),at(d.$$.fragment,t),o=!1},d(t){t&&_(e),ut(c),l&&l.d(),ut(d)}}}function en(t,e,n){let i=!1;const r=new jt(t=>{const e=i=t;return n("menuIsOpen",i),e});let a=!1;const s=t=>{bt(t)};return{menuIsOpen:i,menu:r,trashActive:a,toggleTrash:()=>{n("trashActive",a=!a)},add:s,trash_handler:function(e){!function(t,e){const n=t.$$.callbacks[e.type];n&&n.slice().forEach(t=>t(e))}(t,e)},click_handler:function(){return s("Sticky")}}}class nn extends gt{constructor(t){super(),ht(this,t,en,tn,o,[])}}function rn(t){var e,n,i,r,a,s=new Zt({}),o=new Ve({}),c=new nn({});return c.$on("trash",t.activateTrash),{c(){e=P("main"),s.$$.fragment.c(),n=k(),o.$$.fragment.c(),i=k(),c.$$.fragment.c(),z(e,"class",r=f(t.trashActive?"trash":"")+" svelte-1y72nzg")},m(t,r){y(t,e,r),dt(s,e,null),x(e,n),dt(o,e,null),x(e,i),dt(c,e,null),a=!0},p(t,n){a&&!t.trashActive||r===(r=f(n.trashActive?"trash":"")+" svelte-1y72nzg")||z(e,"class",r)},i(t){a||(rt(s.$$.fragment,t),rt(o.$$.fragment,t),rt(c.$$.fragment,t),a=!0)},o(t){at(s.$$.fragment,t),at(o.$$.fragment,t),at(c.$$.fragment,t),a=!1},d(t){t&&_(e),ut(s),ut(o),ut(c)}}}function an(t,e,n){let i=!1;return{trashActive:i,activateTrash:t=>{n("trashActive",i=t.detail.active)}}}return new class extends gt{constructor(t){super(),ht(this,t,an,rn,o,[])}}({target:document.body,props:{name:"world"}})}();
//# sourceMappingURL=bundle.js.map
