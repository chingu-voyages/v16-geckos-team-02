var app=function(){"use strict";function e(){}function t(e,t){for(const n in t)e[n]=t[n];return e}function n(e){return e()}function i(){return Object.create(null)}function r(e){e.forEach(n)}function a(e){return"function"==typeof e}function s(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}function o(e,t){const n=e.subscribe(t);return n.unsubscribe?()=>n.unsubscribe():n}function c(e){let t;return o(e,e=>t=e)(),t}function l(e,t,n){e.$$.on_destroy.push(o(t,n))}function d(e,n,i){return e[1]?t({},t(n.$$scope.ctx,e[1](i?i(n):{}))):n.$$scope.ctx}function u(e){return null==e?"":e}function f(e,t){e.appendChild(t)}function h(e,t,n){e.insertBefore(t,n||null)}function g(e){e.parentNode.removeChild(e)}function m(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function p(e){return document.createElement(e)}function v(e){return document.createTextNode(e)}function $(){return v(" ")}function x(){return v("")}function w(e,t,n,i){return e.addEventListener(t,n,i),()=>e.removeEventListener(t,n,i)}function y(e,t,n){null==n?e.removeAttribute(t):e.setAttribute(t,n)}function _(e,t){t=""+t,e.data!==t&&(e.data=t)}function b(e,t,n){e.style.setProperty(t,n)}function P(e,t,n){e.classList[n?"add":"remove"](t)}let I;function z(e){I=e}function k(){if(!I)throw new Error("Function called outside component initialization");return I}function E(e){k().$$.before_update.push(e)}function T(){const e=I;return(t,n)=>{const i=e.$$.callbacks[t];if(i){const r=function(e,t){const n=document.createEvent("CustomEvent");return n.initCustomEvent(e,!1,!1,t),n}(t,n);i.slice().forEach(t=>{t.call(e,r)})}}}const M=[],O=[],W=[],A=[],C=Promise.resolve();let D=!1;function L(e){W.push(e)}function S(){const e=new Set;do{for(;M.length;){const e=M.shift();z(e),j(e.$$)}for(;O.length;)O.pop()();for(let t=0;t<W.length;t+=1){const n=W[t];e.has(n)||(n(),e.add(n))}W.length=0}while(M.length);for(;A.length;)A.pop()();D=!1}function j(e){e.fragment&&(e.update(e.dirty),r(e.before_update),e.fragment.p(e.dirty,e.ctx),e.dirty=null,e.after_update.forEach(L))}const H=new Set;let Y;function R(){Y={r:0,c:[],p:Y}}function N(){Y.r||r(Y.c),Y=Y.p}function X(e,t){e&&e.i&&(H.delete(e),e.i(t))}function F(e,t,n,i){if(e&&e.o){if(H.has(e))return;H.add(e),Y.c.push(()=>{H.delete(e),i&&(n&&e.d(1),i())}),e.o(t)}}const B="undefined"!=typeof window?window:global;function q(e,t){F(e,1,1,()=>{t.delete(e.key)})}function G(e,t,i){const{fragment:s,on_mount:o,on_destroy:c,after_update:l}=e.$$;s.m(t,i),L(()=>{const t=o.map(n).filter(a);c?c.push(...t):r(t),e.$$.on_mount=[]}),l.forEach(L)}function J(e,t){e.$$.fragment&&(r(e.$$.on_destroy),e.$$.fragment.d(t),e.$$.on_destroy=e.$$.fragment=null,e.$$.ctx={})}function K(e,t){e.$$.dirty||(M.push(e),D||(D=!0,C.then(S)),e.$$.dirty=i()),e.$$.dirty[t]=!0}function Q(t,n,a,s,o,c){const l=I;z(t);const d=n.props||{},u=t.$$={fragment:null,ctx:null,props:c,update:e,not_equal:o,bound:i(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(l?l.$$.context:[]),callbacks:i(),dirty:null};let f=!1;u.ctx=a?a(t,d,(e,n)=>{u.ctx&&o(u.ctx[e],u.ctx[e]=n)&&(u.bound[e]&&u.bound[e](n),f&&K(t,e))}):d,u.update(),f=!0,r(u.before_update),u.fragment=s(u.ctx),n.target&&(n.hydrate?u.fragment.l(function(e){return Array.from(e.childNodes)}(n.target)):u.fragment.c(),n.intro&&X(t.$$.fragment),G(t,n.target,n.anchor),S()),z(l)}class U{$destroy(){J(this,1),this.$destroy=e}$on(e,t){const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}$set(){}}const V=[];function Z(t,n=e){let i;const r=[];function a(e){if(s(t,e)&&(t=e,i)){const e=!V.length;for(let e=0;e<r.length;e+=1){const n=r[e];n[1](),V.push(n,t)}if(e){for(let e=0;e<V.length;e+=2)V[e][0](V[e+1]);V.length=0}}}return{set:a,update:function(e){a(e(t))},subscribe:function(s,o=e){const c=[s,o];return r.push(c),1===r.length&&(i=n(a)||e),s(t),()=>{const e=r.indexOf(c);-1!==e&&r.splice(e,1),0===r.length&&(i(),i=null)}}}}const ee=[];let te=Z(2);const ne=()=>ee[c(te)],ie=e=>ne().widgets.get(e),re=(e="")=>{try{const t={_title:Z(e),widgets:new Map,_widgetsCount:Z(0)};ee.push(t)}catch(e){}},ae=(e,t="",n="",i={w:8,h:5,x:1/0,y:0})=>{try{const r={type:e,sizeAndPos:i,_title:Z(t),_data:Z(n)};ne().widgets.set(Symbol(),r),ne()._widgetsCount.update(e=>e+1)}catch(e){}};function se(t){var n,i;return{c(){(n=p("button")).innerHTML='<img src="/images/arrowRightIcon.svg" alt="prev">',y(n,"class","svelte-1l6716q"),i=w(n,"click",t.left)},m(e,t){h(e,n,t)},p:e,i:e,o:e,d(e){e&&g(n),i()}}}function oe(e){const t=T();return{left:()=>{t("left")}}}re("one"),re("two"),re("Prototype"),ae("Sticky","Welcome","This is currently only a prototype. The concept is a personal dash space for organising activities. At the moment functionality is limited.",{w:8,h:5,x:0,y:0}),ae("Sticky","Widgets","These are the building block. Each has an editiable title. You can resize and drag and drop them.",{w:8,h:6,x:8,y:4}),ae("Sticky","Sticky","A type of Widget. Currently the only type available for the prototype. It accepts a text input. Future versions will accept and automatically convert image urls, dates, links, and todo lists.",{w:8,h:5,x:0,y:6}),ae("Sticky","Add Widget","You may add more widgets using the widgets menu in the bottom right corner.",{w:8,h:5,x:0,y:8}),ae("Sticky","Delete Widgets","You can remove widgets by activating the trash from the widgets menu and clicking the trash icon within each widget to be removed.",{w:8,h:5,x:16,y:8}),re("three"),re("four"),re("five");class ce extends U{constructor(e){super(),Q(this,e,oe,se,s,[])}}function le(t){var n,i;return{c(){(n=p("button")).innerHTML='<img src="/images/arrowRightIcon.svg" alt="next">',y(n,"class","svelte-1bwa45r"),i=w(n,"click",t.right)},m(e,t){h(e,n,t)},p:e,i:e,o:e,d(e){e&&g(n),i()}}}function de(e){const t=T();return{right:()=>{t("right")}}}class ue extends U{constructor(e){super(),Q(this,e,de,le,s,[])}}function fe(e){var t,n,i;return{c(){y(t=p("img"),"class",n="cancel "+e.cancelPos+" svelte-1gmxc8e"),y(t,"src","/images/cancelIcon.svg"),y(t,"alt","x"),i=w(t,"click",e.trash)},m(e,n){h(e,t,n)},p(e,i){e.cancelPos&&n!==(n="cancel "+i.cancelPos+" svelte-1gmxc8e")&&y(t,"class",n)},d(e){e&&g(t),i()}}}function he(t){var n,i,r,a,s,o=t.active&&fe(t);return{c(){n=p("button"),o&&o.c(),i=$(),y(r=p("img"),"src","/images/TrashIcon.svg"),y(r,"alt","-"),y(n,"class",a=u(t.active?"active":"")+" svelte-1gmxc8e"),s=w(n,"click",t.trash)},m(e,t){h(e,n,t),o&&o.m(n,null),f(n,i),f(n,r)},p(e,t){t.active?o?o.p(e,t):((o=fe(t)).c(),o.m(n,i)):o&&(o.d(1),o=null),e.active&&a!==(a=u(t.active?"active":"")+" svelte-1gmxc8e")&&y(n,"class",a)},i:e,o:e,d(e){e&&g(n),o&&o.d(),s()}}}function ge(e,t,n){let{active:i=!1,cancelPos:r="top"}=t;const a=T();return e.$set=e=>{"active"in e&&n("active",i=e.active),"cancelPos"in e&&n("cancelPos",r=e.cancelPos)},{active:i,cancelPos:r,trash:()=>{a("trash",{active:!i})}}}class me extends U{constructor(e){super(),Q(this,e,ge,he,s,["active","cancelPos"])}}function pe(t){var n,i,r,a;return{c(){n=p("button"),y(i=p("img"),"src","/images/addIcon.svg"),y(i,"alt","+"),y(n,"class",r=u(t.active?"active":"")+" svelte-9b9csn"),a=w(n,"click",t.add)},m(e,t){h(e,n,t),f(n,i)},p(e,t){e.active&&r!==(r=u(t.active?"active":"")+" svelte-9b9csn")&&y(n,"class",r)},i:e,o:e,d(e){e&&g(n),a()}}}function ve(e,t,n){let{active:i}=t;const r=T();return e.$set=e=>{"active"in e&&n("active",i=e.active)},{active:i,add:()=>r("add")}}class $e extends U{constructor(e){super(),Q(this,e,ve,pe,s,["active"])}}function xe(e,t=!1){this.isOpen=t,this.update=e,this.close=this.close.bind(this),this.open=this.open.bind(this),this.toggle=this.toggle.bind(this)}function we(e,t,n){const i=Object.create(e);return i.dashIndex=t[n],i.i=n,i}function ye(e,t,n){const i=Object.create(e);return i.dash=t[n],i.i=n,i}function _e(e){for(var t,n,i=e.navIndexArray,r=[],a=0;a<i.length;a+=1)r[a]=Ee(we(e,i,a));return{c(){t=p("div");for(var i=0;i<r.length;i+=1)r[i].c();y(t,"class",n="carousel "+e.animationClass+" svelte-122z4wc")},m(e,n){h(e,t,n);for(var i=0;i<r.length;i+=1)r[i].m(t,null)},p(e,a){if(e.navIndexArray||e.$activeDashIndex||e.editingTitle||e.$_title||e.dashboards||e.get){i=a.navIndexArray;for(var s=0;s<i.length;s+=1){const n=we(a,i,s);r[s]?r[s].p(e,n):(r[s]=Ee(n),r[s].c(),r[s].m(t,null))}for(;s<r.length;s+=1)r[s].d(1);r.length=i.length}e.animationClass&&n!==(n="carousel "+a.animationClass+" svelte-122z4wc")&&y(t,"class",n)},d(e){e&&g(t),m(r,e)}}}function be(e){for(var t,n=ee,i=[],r=0;r<n.length;r+=1)i[r]=Te(ye(e,n,r));return{c(){t=p("div");for(var e=0;e<i.length;e+=1)i[e].c();y(t,"class","trashMenu svelte-122z4wc")},m(e,n){h(e,t,n);for(var r=0;r<i.length;r+=1)i[r].m(t,null)},p(e,r){if(e.get||e.dashboards){n=ee;for(var a=0;a<n.length;a+=1){const s=ye(r,n,a);i[a]?i[a].p(e,s):(i[a]=Te(s),i[a].c(),i[a].m(t,null))}for(;a<i.length;a+=1)i[a].d(1);i.length=n.length}},d(e){e&&g(t),m(i,e)}}}function Pe(e){var t,n,i,r=ee[e.dashIndex]?c(ee[e.dashIndex]._title):"";function a(){return e.click_handler_2(e)}return{c(){t=p("button"),n=v(r),y(t,"class","nav-button-"+e.i+" svelte-122z4wc"),i=w(t,"click",a)},m(e,i){h(e,t,i),f(t,n)},p(t,i){e=i,t.navIndexArray&&r!==(r=ee[e.dashIndex]?c(ee[e.dashIndex]._title):"")&&_(n,r)},d(e){e&&g(t),i()}}}function Ie(e){var t,n;function i(e){return e.editingTitle?ke:ze}var r=i(e),a=r(e);return{c(){t=p("div"),a.c(),n=$(),y(t,"class","current svelte-122z4wc")},m(e,i){h(e,t,i),a.m(t,null),f(t,n)},p(e,s){r===(r=i(s))&&a?a.p(e,s):(a.d(1),(a=r(s))&&(a.c(),a.m(t,n)))},d(e){e&&g(t),a.d()}}}function ze(e){var t,n,i;return{c(){t=p("button"),n=v(e.$_title),y(t,"class","active-dash-title svelte-122z4wc"),i=w(t,"click",e.click_handler_1)},m(e,i){h(e,t,i),f(t,n)},p(e,t){e.$_title&&_(n,t.$_title)},d(e){e&&g(t),i()}}}function ke(e){var t,n;return{c(){y(t=p("input"),"type","text"),t.autofocus=!0,y(t,"class","svelte-122z4wc"),n=[w(t,"input",e.input_input_handler),w(t,"blur",e.blur_handler)]},m(n,i){h(n,t,i),t.value=e.$_title,t.focus()},p(e,n){e.$_title&&t.value!==n.$_title&&(t.value=n.$_title)},d(e){e&&g(t),r(n)}}}function Ee(e){var t;function n(e){return e.dashIndex===e.$activeDashIndex?Ie:Pe}var i=n(e),r=i(e);return{c(){r.c(),t=x()},m(e,n){r.m(e,n),h(e,t,n)},p(e,a){i===(i=n(a))&&r?r.p(e,a):(r.d(1),(r=i(a))&&(r.c(),r.m(t.parentNode,t)))},d(e){r.d(e),e&&g(t)}}}function Te(e){var t,n,i,r,a,s,o,l=c(e.dash._title);function d(){return e.click_handler(e)}return{c(){t=p("button"),n=p("h3"),i=v(l),r=$(),a=p("img"),s=$(),y(n,"class","svelte-122z4wc"),y(a,"src","/images/trashIcon.svg"),y(a,"alt","-"),y(a,"class","svelte-122z4wc"),y(t,"class","svelte-122z4wc"),o=w(t,"click",d)},m(e,o){h(e,t,o),f(t,n),f(n,i),f(t,r),f(t,a),f(t,s)},p(t,n){e=n},d(e){e&&g(t),o()}}}function Me(e){var t,n,i,r,a,s,o,c=new ce({});c.$on("left",e.left_handler);var l=new me({props:{active:e.trashIsOpen,cancelPos:"right"}});function d(e){return e.trashIsOpen?be:_e}l.$on("trash",e.trash.toggle);var u=d(e),m=u(e),v=new $e({});v.$on("add",re);var x=new ue({});return x.$on("right",e.right_handler),{c(){t=p("nav"),c.$$.fragment.c(),n=$(),l.$$.fragment.c(),i=$(),r=p("div"),m.c(),a=$(),v.$$.fragment.c(),s=$(),x.$$.fragment.c(),y(r,"class","container svelte-122z4wc"),y(t,"class","svelte-122z4wc")},m(e,d){h(e,t,d),G(c,t,null),f(t,n),G(l,t,null),f(t,i),f(t,r),m.m(r,null),f(t,a),G(v,t,null),f(t,s),G(x,t,null),o=!0},p(e,t){var n={};e.trashIsOpen&&(n.active=t.trashIsOpen),l.$set(n),u===(u=d(t))&&m?m.p(e,t):(m.d(1),(m=u(t))&&(m.c(),m.m(r,null)))},i(e){o||(X(c.$$.fragment,e),X(l.$$.fragment,e),X(v.$$.fragment,e),X(x.$$.fragment,e),o=!0)},o(e){F(c.$$.fragment,e),F(l.$$.fragment,e),F(v.$$.fragment,e),F(x.$$.fragment,e),o=!1},d(e){e&&g(t),J(c),J(l),m.d(),J(v),J(x)}}}function Oe(t,n,i){let r,a,s=e;l(t,te,e=>{r=e,i("$activeDashIndex",r)}),t.$$.on_destroy.push(()=>s());let c=!1;const d=new xe(e=>{const t=c=e;return i("trashIsOpen",c),t});let u=!1;let f="";const h=e=>{0!==e&&(i("animationClass",f=e>0?"forward-animation":"backward-animation"),setTimeout(()=>{var t;t=(ee.length+r+e)%ee.length,te.update(()=>t),i("animationClass",f="")},500))};let g,m;return t.$$.update=(e={$activeDashIndex:1})=>{e.$activeDashIndex&&(g=ee[r]._title,s(),s=o(g,e=>{a=e,i("$_title",a)}),i("_title",g)),e.$activeDashIndex&&i("navIndexArray",m=(e=>{let t=[];for(let n=0;n<7;n++)if(ee.length<5)t.push(n-3-ee.length);else{const i=(ee.length+e+n-3)%ee.length;t.push(i)}return t})(r))},{trashIsOpen:c,trash:d,editingTitle:u,animationClass:f,setActiveDash:h,_title:g,$activeDashIndex:r,navIndexArray:m,$_title:a,left_handler:function(){return h(-1)},click_handler:function({i:e}){return(e=>{try{ee.splice(e,1)}catch(e){}})(e)},input_input_handler:function(){g.set(this.value)},blur_handler:function(){const e=u=!1;return i("editingTitle",u),e},click_handler_1:function(){const e=u=!0;return i("editingTitle",u),e},click_handler_2:function({i:e}){return h(e>3?1:-1)},right_handler:function(){return h(1)}}}xe.prototype.close=function(){setTimeout(()=>{this.isOpen&&(this.isOpen=!1,this.update(this.isOpen))},0),window.removeEventListener("click",this.close,{capture:!0})},xe.prototype.open=function(){this.isOpen=!0,window.addEventListener("click",this.close,{capture:!0}),this.update(this.isOpen)},xe.prototype.toggle=function(){this.isOpen?this.close():this.open()};class We extends U{constructor(e){super(),Q(this,e,Oe,Me,s,[])}}function Ae(e){var t,n,i;return{c(){t=p("article"),n=v(e.$_data),y(t,"class","svelte-1ovrvdo"),i=w(t,"click",e.click_handler)},m(e,i){h(e,t,i),f(t,n)},p(e,t){e.$_data&&_(n,t.$_data)},d(e){e&&g(t),i()}}}function Ce(e){var t,n;return{c(){(t=p("textarea")).autofocus=!0,y(t,"class","svelte-1ovrvdo"),n=[w(t,"input",e.textarea_input_handler),w(t,"change",e.disableEditIfNoFocus),w(t,"blur",e.blur_handler)]},m(n,i){h(n,t,i),t.value=e.$_data,t.focus()},p(e,n){e.$_data&&(t.value=n.$_data)},d(e){e&&g(t),r(n)}}}function De(t){var n;function i(e){return e.editing?Ce:Ae}var r=i(t),a=r(t);return{c(){a.c(),n=x()},m(e,t){a.m(e,t),h(e,n,t)},p(e,t){r===(r=i(t))&&a?a.p(e,t):(a.d(1),(a=r(t))&&(a.c(),a.m(n.parentNode,n)))},i:e,o:e,d(e){a.d(e),e&&g(n)}}}function Le(e,t,n){let i,{_data:r}=t;l(e,r,e=>{i=e,n("$_data",i)});let a=!0;return e.$set=e=>{"_data"in e&&n("_data",r=e._data)},{_data:r,editing:a,disableEditIfNoFocus:()=>{this!==document.activeElement&&n("editing",a=!1)},$_data:i,textarea_input_handler:function(){r.set(this.value)},blur_handler:function(){const e=a=!1;return n("editing",a),e},click_handler:function(){const e=a=!0;return n("editing",a),e}}}class Se extends U{constructor(e){super(),Q(this,e,Le,De,s,["_data"])}}function je(t){var n,i;return{c(){y(n=p("textarea"),"class","svelte-1jhz1zv"),i=w(n,"input",t.textarea_input_handler)},m(e,i){h(e,n,i),n.value=t.$_data},p(e,t){e.$_data&&(n.value=t.$_data)},i:e,o:e,d(e){e&&g(n),i()}}}function He(e){var t,n=new Se({props:{_data:e._data}});return{c(){n.$$.fragment.c()},m(e,i){G(n,e,i),t=!0},p(e,t){var i={};e._data&&(i._data=t._data),n.$set(i)},i(e){t||(X(n.$$.fragment,e),t=!0)},o(e){F(n.$$.fragment,e),t=!1},d(e){J(n,e)}}}function Ye(e){var t,n,i,r,a=[He,je],s=[];function o(e){return"Text"===e.type?0:1}return t=o(e),n=s[t]=a[t](e),{c(){n.c(),i=x()},m(e,n){s[t].m(e,n),h(e,i,n),r=!0},p(e,r){var c=t;(t=o(r))===c?s[t].p(e,r):(R(),F(s[c],1,1,()=>{s[c]=null}),N(),(n=s[t])||(n=s[t]=a[t](r)).c(),X(n,1),n.m(i.parentNode,i))},i(e){r||(X(n),r=!0)},o(e){F(n),r=!1},d(e){s[t].d(e),e&&g(i)}}}function Re(e,t,n){let i,r,{_data:a}=t;return l(e,a,e=>{i=e,n("$_data",i)}),E(()=>{var e;n("type",r=(e=i)&&e.length>0?"Text":void 0)}),e.$set=e=>{"_data"in e&&n("_data",a=e._data)},{_data:a,type:r,$_data:i,textarea_input_handler:function(){a.set(this.value)}}}class Ne extends U{constructor(e){super(),Q(this,e,Re,Ye,s,["_data"])}}function Xe(e){var t,n,i;return{c(){t=p("h2"),n=v(e.$_title),y(t,"class","svelte-1w89jgw"),i=w(t,"click",e.click_handler)},m(e,i){h(e,t,i),f(t,n)},p(e,t){e.$_title&&_(n,t.$_title)},d(e){e&&g(t),i()}}}function Fe(e){var t,n;return{c(){y(t=p("input"),"type","text"),t.autofocus=!0,y(t,"class","svelte-1w89jgw"),n=[w(t,"input",e.input_input_handler),w(t,"blur",e.blur_handler)]},m(n,i){h(n,t,i),t.value=e.$_title,t.focus()},p(e,n){e.$_title&&t.value!==n.$_title&&(t.value=n.$_title)},d(e){e&&g(t),r(n)}}}function Be(t){var n,i,r;return{c(){n=p("div"),i=v(t.type),r=v(" Widget type not yet implemented"),y(n,"class","svelte-1w89jgw")},m(e,t){h(e,n,t),f(n,i),f(n,r)},p:e,i:e,o:e,d(e){e&&g(n)}}}function qe(e){var t,n=new Ne({props:{_data:e._data}});return{c(){n.$$.fragment.c()},m(e,i){G(n,e,i),t=!0},p(e,t){var i={};e._data&&(i._data=t._data),n.$set(i)},i(e){t||(X(n.$$.fragment,e),t=!0)},o(e){F(n.$$.fragment,e),t=!1},d(e){J(n,e)}}}function Ge(e){var t,n,i,r,a,s,o;function c(e){return e.editingTitle?Fe:Xe}var l=c(e),d=l(e),u=[qe,Be],m=[];function v(e){return"Sticky"===e.type?0:1}i=v(e),r=m[i]=u[i](e);var x=new me({});return x.$on("trash",e.removeSelf),{c(){t=p("div"),d.c(),n=$(),r.c(),a=$(),s=p("span"),x.$$.fragment.c(),y(s,"class","svelte-1w89jgw"),y(t,"class","svelte-1w89jgw")},m(e,r){h(e,t,r),d.m(t,null),f(t,n),m[i].m(t,null),f(t,a),f(t,s),G(x,s,null),o=!0},p(e,s){l===(l=c(s))&&d?d.p(e,s):(d.d(1),(d=l(s))&&(d.c(),d.m(t,n)));var o=i;(i=v(s))===o?m[i].p(e,s):(R(),F(m[o],1,1,()=>{m[o]=null}),N(),(r=m[i])||(r=m[i]=u[i](s)).c(),X(r,1),r.m(t,a))},i(e){o||(X(r),X(x.$$.fragment,e),o=!0)},o(e){F(r),F(x.$$.fragment,e),o=!1},d(e){e&&g(t),d.d(),m[i].d(),J(x)}}}function Je(e,t,n){let i,{ref:r}=t,{_title:a,_data:s,type:o}=ie(r);l(e,a,e=>{i=e,n("$_title",i)});let d=!1;return e.$set=e=>{"ref"in e&&n("ref",r=e.ref)},{ref:r,_title:a,_data:s,type:o,editingTitle:d,removeSelf:()=>{((e,t=c(te))=>{try{ee[t].widgets.delete(e)&&ee[t]._widgetsCount.update(e=>e-1)}catch(e){}})(r)},$_title:i,input_input_handler:function(){a.set(this.value)},blur_handler:function(){const e=d=!1;return n("editingTitle",d),e},click_handler:function(){const e=d=!0;return n("editingTitle",d),e}}}class Ke extends U{constructor(e){super(),Q(this,e,Je,Ge,s,["ref"])}}const Qe=(e,t=0)=>{let n;return function(...i){clearTimeout(n),n=setTimeout(()=>e.apply(this,i),t)}};function Ue(e){return{pageX:e.changedTouches?e.changedTouches[0].pageX:e.pageX,pageY:e.changedTouches?e.changedTouches[0].pageY:e.pageY}}function Ve(e){return Math.max(...e.map(e=>e.y+e.h),1)}const Ze=(e,t,n,i)=>{var r=!1,a=n;if(e)for(var s=e.length-1;s>=0;s--){const[n,i]=e[s];if(t<=n){r=!0,a=i;break}}return r||(a=i),a},et=(e,t)=>Array.from(Array(e),()=>new Array(t));function tt(e,t,n,i){let r=et(n,i);for(var a=0;a<e.length;a++){const n=e[a],{x:i,y:c,w:l,h:d,id:u,responsive:{valueW:f}}=n;if(-1===t.indexOf(u))for(var s=c;s<c+d;s++){const e=r[s];if(e)for(var o=i;o<i+(l-f);o++)e[o]=n}}return r}function nt(e,t,n=Ve(e)){let i=et(n,t);return e.forEach((n,r)=>{let a=e.slice(r+1).map(e=>e.id),s=function(e,t,n=[],i){const{w:r}=t;let a=t.responsive.valueW;for(var s=0;s<e.length;s++){const t=e[s];for(var o=0;o<t.length;o++){const e=t.findIndex(e=>void 0===e);if(-1!==e){for(var c=t.slice(e),l=c.length,d=0;d<c.length;d++)if(void 0!==c[d]){l=d;break}return a=Math.max(r-l,0),{y:s,x:e,responsive:{valueW:a}}}}}return a=Math.max(r-i,0),{y:Ve(n),x:0,responsive:{valueW:a}}}(i,n,e,t);e=e.map(e=>e.id===n.id?{...n,...s}:e),i=tt(e,a,Ve(e),t)}),e}function it(e,t){const n=t.findIndex(t=>t.id===e);return{index:n,item:t[n]}}function rt(e,t,n=[]){let i=e[0].length-(t.w-t.responsive.valueW);for(var r=0;r<e.length;r++){const n=e[r];for(var a=0;a<i+1;a++){if(n.slice(a,a+(t.w-t.responsive.valueW)).every(e=>void 0===e)){if(e.slice(r,r+t.h).every(e=>e.slice(a,a+(t.w-t.responsive.valueW)).every(e=>void 0===e)))return{y:r,x:a}}}}return{y:Ve(n),x:0}}function at(e,t,n){return n.id===e.id?{...e,...t}:n}const st=(e,t,n)=>n.id===e.id?t:n;function ot(e,t){return Math.max(Ve(e),2)*t}const{window:ct}=B,lt=({item:e,items:t,i:n})=>({item:t,index:t}),dt=({item:e,items:t,i:n})=>({item:e,index:n});function ut(e,t,n){const i=Object.create(e);return i.item=t[n],i.i=n,i}function ft(e){var t,n;return{c(){y(t=p("div"),"class","svlt-grid-resizer svelte-14tbpr7"),n=[w(t,"touchstart",e.resizeOnMouseDown.bind(this,e.item.id)),w(t,"mousedown",e.resizeOnMouseDown.bind(this,e.item.id))]},m(e,n){h(e,t,n)},p(t,n){e=n},d(e){e&&g(t),r(n)}}}function ht(e,n){var i,a,s,o,c;const l=n.$$slots.default,u=function(e,t,n){if(e){const i=d(e,t,n);return e[0](i)}}(l,n,dt);var m=n.item.resizable&&ft(n);return{key:e,first:null,c(){i=p("div"),u&&u.c(),a=$(),m&&m.c(),y(i,"class","svlt-grid-item svelte-14tbpr7"),y(i,"style",s=(n.useTransform?`transform: translate(${n.item.drag.dragging?n.item.drag.left:n.item.x*n.xPerPx+n.gap}px, ${n.item.drag.dragging?n.item.drag.top:n.item.y*n.yPerPx+n.gap}px);`:"")+";\n        "+(n.useTransform?"":`top: ${n.item.drag.dragging?n.item.drag.top:n.item.y*n.yPerPx+n.gap}px`)+";\n        "+(n.useTransform?"":`left: ${n.item.drag.dragging?n.item.drag.left:n.item.x*n.xPerPx+n.gap}px`)+";\n        width: "+(n.item.resize.resizing?n.item.resize.width:n.item.w*n.xPerPx-2*n.gap-n.item.responsive.valueW*n.xPerPx)+"px;\n        height: "+(n.item.resize.resizing?n.item.resize.height:n.item.h*n.yPerPx-2*n.gap)+"px;\n        z-index: "+(n.item.drag.dragging||n.item.resize.resizing?3:1)+";\n        opacity: "+(n.item.resize.resizing?.5:1)),c=[w(i,"mousedown",n.item.draggable?n.dragOnMouseDown.bind(this,n.item.id):null),w(i,"touchstart",n.item.draggable?n.dragOnMouseDown.bind(this,n.item.id):null)],this.first=i},l(e){u&&u.l(div_nodes)},m(e,t){h(e,i,t),u&&u.m(i,null),f(i,a),m&&m.m(i,null),o=!0},p(e,r){n=r,u&&u.p&&(e.$$scope||e.items)&&u.p(function(e,n,i,r){return e[1]?t({},t(n.$$scope.changed||{},e[1](r?r(i):{}))):n.$$scope.changed||{}}(l,n,e,lt),d(l,n,dt)),n.item.resizable?m||((m=ft(n)).c(),m.m(i,null)):m&&(m.d(1),m=null),(!o||e.useTransform||e.items||e.xPerPx||e.gap)&&s!==(s=(n.useTransform?`transform: translate(${n.item.drag.dragging?n.item.drag.left:n.item.x*n.xPerPx+n.gap}px, ${n.item.drag.dragging?n.item.drag.top:n.item.y*n.yPerPx+n.gap}px);`:"")+";\n        "+(n.useTransform?"":`top: ${n.item.drag.dragging?n.item.drag.top:n.item.y*n.yPerPx+n.gap}px`)+";\n        "+(n.useTransform?"":`left: ${n.item.drag.dragging?n.item.drag.left:n.item.x*n.xPerPx+n.gap}px`)+";\n        width: "+(n.item.resize.resizing?n.item.resize.width:n.item.w*n.xPerPx-2*n.gap-n.item.responsive.valueW*n.xPerPx)+"px;\n        height: "+(n.item.resize.resizing?n.item.resize.height:n.item.h*n.yPerPx-2*n.gap)+"px;\n        z-index: "+(n.item.drag.dragging||n.item.resize.resizing?3:1)+";\n        opacity: "+(n.item.resize.resizing?.5:1))&&y(i,"style",s)},i(e){o||(X(u,e),o=!0)},o(e){F(u,e),o=!1},d(e){e&&g(i),u&&u.d(e),m&&m.d(),r(c)}}}function gt(e){var t,n;return{c(){y(t=p("div"),"class","svlt-grid-shadow svelte-14tbpr7"),y(t,"style",n=(e.useTransform?`transform: translate(${e.shadow.drag.dragging?e.shadow.drag.left:e.shadow.x*e.xPerPx+e.gap}px, ${e.shadow.drag.dragging?e.shadow.drag.top:e.shadow.y*e.yPerPx+e.gap}px);`:"")+";\n        "+(e.useTransform?"":`top: ${e.shadow.drag.dragging?e.shadow.drag.top:e.shadow.y*e.yPerPx+e.gap}px`)+";\n        "+(e.useTransform?"":`left: ${e.shadow.drag.dragging?e.shadow.drag.left:e.shadow.x*e.xPerPx+e.gap}px`)+";\n    width:"+(e.shadow.w*e.xPerPx-2*e.gap-e.shadow.responsive.valueW*e.xPerPx)+"px;\n    height:"+(e.shadow.h*e.yPerPx-2*e.gap)+"px;")},m(e,n){h(e,t,n)},p(e,i){(e.useTransform||e.shadow||e.xPerPx||e.gap)&&n!==(n=(i.useTransform?`transform: translate(${i.shadow.drag.dragging?i.shadow.drag.left:i.shadow.x*i.xPerPx+i.gap}px, ${i.shadow.drag.dragging?i.shadow.drag.top:i.shadow.y*i.yPerPx+i.gap}px);`:"")+";\n        "+(i.useTransform?"":`top: ${i.shadow.drag.dragging?i.shadow.drag.top:i.shadow.y*i.yPerPx+i.gap}px`)+";\n        "+(i.useTransform?"":`left: ${i.shadow.drag.dragging?i.shadow.drag.left:i.shadow.x*i.xPerPx+i.gap}px`)+";\n    width:"+(i.shadow.w*i.xPerPx-2*i.gap-i.shadow.responsive.valueW*i.xPerPx)+"px;\n    height:"+(i.shadow.h*i.yPerPx-2*i.gap)+"px;")&&y(t,"style",n)},d(e){e&&g(t)}}}function mt(e){var t,n,i,r,a=[],s=new Map,o=e.items;const c=e=>e.item.id;for(var l=0;l<o.length;l+=1){let t=ut(e,o,l),n=c(t);s.set(n,a[l]=ht(n,t))}var d=e.shadow.active&&gt(e);return{c(){for(t=p("div"),l=0;l<a.length;l+=1)a[l].c();n=$(),d&&d.c(),y(t,"class","svlt-grid-container svelte-14tbpr7"),b(t,"height",e.ch+"px"),P(t,"svlt-grid-transition",!e.focuesdItem),r=w(ct,"resize",Qe(e.onResize,300))},m(r,s){for(h(r,t,s),l=0;l<a.length;l+=1)a[l].m(t,null);f(t,n),d&&d.m(t,null),e.div_binding(t),i=!0},p(e,r){const o=r.items;R(),a=function(e,t,n,i,r,a,s,o,c,l,d,u){let f=e.length,h=a.length,g=f;const m={};for(;g--;)m[e[g].key]=g;const p=[],v=new Map,$=new Map;for(g=h;g--;){const e=u(r,a,g),o=n(e);let c=s.get(o);c?i&&c.p(t,e):(c=l(o,e),c.c()),v.set(o,p[g]=c),o in m&&$.set(o,Math.abs(g-m[o]))}const x=new Set,w=new Set;function y(e){X(e,1),e.m(o,d),s.set(e.key,e),d=e.first,h--}for(;f&&h;){const t=p[h-1],n=e[f-1],i=t.key,r=n.key;t===n?(d=t.first,f--,h--):v.has(r)?!s.has(i)||x.has(i)?y(t):w.has(r)?f--:$.get(i)>$.get(r)?(w.add(i),y(t)):(x.add(r),f--):(c(n,s),f--)}for(;f--;){const t=e[f];v.has(t.key)||c(t,s)}for(;h;)y(p[h-1]);return p}(a,e,c,1,r,o,s,t,q,ht,n,ut),N(),r.shadow.active?d?d.p(e,r):((d=gt(r)).c(),d.m(t,null)):d&&(d.d(1),d=null),i&&!e.ch||b(t,"height",r.ch+"px"),e.focuesdItem&&P(t,"svlt-grid-transition",!r.focuesdItem)},i(e){if(!i){for(var t=0;t<o.length;t+=1)X(a[t]);i=!0}},o(e){for(l=0;l<a.length;l+=1)F(a[l]);i=!1},d(n){for(n&&g(t),l=0;l<a.length;l+=1)a[l].d();d&&d.d(),e.div_binding(null),r()}}}function pt(e,t,n){let i,r,a,s,o,c,l,d,{useTransform:u=!1,items:f=[],cols:h=0,dragDebounceMs:g=350,gap:m=0,rowHeight:p=150,breakpoints:v,fillEmpty:$=!0}=t,x=p,w=h,y={w:0,h:0,x:0,y:0,active:!1,id:null,responsive:{valueW:0},min:{},max:{}},_=ot(f,x);const b=T(),P=()=>document.documentElement.clientWidth;var I;let z,M,W,A;function C(e){let{pageX:t,pageY:i}=Ue(e);t-=a.x,i-=a.y;const l=A+i-M,u=W+(t-z),{responsive:{valueW:h}}=r;let g=Math.round(u/s)+h;const{h:m=1,w:p=1}=r.min,{h:v,w:$=c-r.x+h}=r.max;g=Math.min(Math.max(g,p),$);let w=Math.round(l/x);v&&(w=Math.min(w,v)),w=Math.max(w,m),n("shadow",y={...y,w:g,h:w});let _=f[o];f[o]={..._,resize:{resizing:!0,width:u,height:l},w:g,h:w},n("items",f),d||j()}function D(e){e.stopPropagation();let t=f[o];f[o]={...t,resize:{resizing:!1,width:0,height:0}},n("items",f),window.removeEventListener("mousemove",C,!1),window.removeEventListener("touchmove",C,!1),window.removeEventListener("mouseup",D,!1),window.removeEventListener("touchend",D,!1),n("shadow",y={...y,w:0,h:0,x:0,y:0,active:!1,id:null,responsive:{valueW:0},min:{},max:{}}),N(),n("focuesdItem",r=void 0),d=!1}I=()=>{a=i.getBoundingClientRect();let e=Ze(v,P(),h,w);c=e,l=document.documentElement.clientWidth,v&&n("items",f=nt(f,e)),n("xPerPx",s=a.width/e),b("mount",{cols:e,xPerPx:s,yPerPx:x})},k().$$.on_mount.push(I);let L=0,S=0;const j=Qe(N,g);let H={};function Y(e){e.stopPropagation();let{pageX:t,pageY:i}=Ue(e);const l=i-a.y,d=t-a.x;let u=Math.round((d-L)/s),h=Math.round((l-S)/x);u=Math.max(Math.min(u,c-(r.w-r.responsive.valueW)),0),h=Math.max(h,0);let g=f[o];f[o]={...g,drag:{dragging:!0,top:l-S,left:d-L},x:u,y:h},n("items",f),n("shadow",y={...y,x:u,y:h}),j()}function R(e){window.removeEventListener("mousemove",Y,!1),window.removeEventListener("touchmove",Y,!1),window.removeEventListener("mouseup",R,!1),window.removeEventListener("touchend",R,!1);let t=f[o];f[o]={...t,drag:{dragging:!1,top:0,left:0}},n("items",f),L=0,S=0,n("shadow",y={...y,w:0,h:0,x:0,y:0,active:!1,id:null}),N(),n("focuesdItem",r=void 0)}function N(e){const t=f[o];let i=Ze(v,P(),h,w),r=function(e,t,n,i){let r=tt(t,[e.id],Ve(t),n);const a=function(e,t,n){const{w:i,h:r,x:a,y:s,responsive:{valueW:o}}=n,c=t.slice(s,s+r);let l=[];for(var d=0;d<c.length;d++){let e=c[d].slice(a,a+(i-o));l=[...l,...e.map(e=>e&&e.id).filter(e=>e)]}return[...l.filter((e,t)=>l.indexOf(e)==t)]}(0,r,e);let s=function(e,t){return t.filter(t=>-1!==e.indexOf(t.id))}(a,t);if(s.find(e=>e.static)&&i)return t.map(st.bind(null,e,i));r=tt(t,a,Ve(t),n);let o=t,c=a,l=[];return s.forEach(e=>{let i=rt(r,e,o);if(l.push(e.id),i){o=o.map(at.bind(null,e,i));let a=c.filter(e=>-1===l.indexOf(e));r=tt(o,a,Ve(t),n)}}),o}(t,f,i,H);$&&r.forEach(e=>{e.id!==t.id&&(r=r.map(t=>t.id===e.id?{...t,...rt(tt(r,[e.id],Ve(r),i),e,r)}:t))}),n("items",f=r),b("adjust",{focuesdItem:t})}E(()=>{r||(n("ch",_=ot(f,x)),h!==w&&a&&(n("xPerPx",s=a.width/h),w=h))});let{$$slots:X={},$$scope:F}=t;return e.$set=e=>{"useTransform"in e&&n("useTransform",u=e.useTransform),"items"in e&&n("items",f=e.items),"cols"in e&&n("cols",h=e.cols),"dragDebounceMs"in e&&n("dragDebounceMs",g=e.dragDebounceMs),"gap"in e&&n("gap",m=e.gap),"rowHeight"in e&&n("rowHeight",p=e.rowHeight),"breakpoints"in e&&n("breakpoints",v=e.breakpoints),"fillEmpty"in e&&n("fillEmpty",$=e.fillEmpty),"$$scope"in e&&n("$$scope",F=e.$$scope)},{useTransform:u,items:f,cols:h,dragDebounceMs:g,gap:m,rowHeight:p,breakpoints:v,fillEmpty:$,container:i,focuesdItem:r,xPerPx:s,yPerPx:x,shadow:y,ch:_,onResize:function(){let e=document.documentElement.clientWidth;if(e!==l){l=e,a=i.getBoundingClientRect();let t=Ze(v,e,h,w);c=t,n("xPerPx",s=a.width/t),b("resize",{cols:t,xPerPx:s,yPerPx:x}),v&&n("items",f=nt(f,t))}},resizeOnMouseDown:function(e,t){t.stopPropagation();let{pageX:i,pageY:l}=Ue(t);const{item:u,index:g}=it(e,f);o=g,n("focuesdItem",r=u),H={...u},d=u.h+u.y===Ve(f),n("shadow",y={...y,...r,active:!0}),z=i-a.x,M=l-a.y,W=u.w*s-2*m-r.responsive.valueW*s,A=u.h*x-2*m,c=Ze(v,P(),h,w),window.addEventListener("mousemove",C,!1),window.addEventListener("touchmove",C,!1),window.addEventListener("mouseup",D,!1),window.addEventListener("touchend",D,!1)},dragOnMouseDown:function(e,t){t.stopPropagation();let{pageX:i,pageY:s}=Ue(t);const{item:l,index:d}=it(e,f);o=d,n("focuesdItem",r=l),H={...l},n("shadow",y={...y,...l,active:!0});let g,m,{currentTarget:p}=t;if(u){const{x:e,y:t}=($=p.style.transform,x=($=$.slice(10,-3)).indexOf("px, "),{x:+$.slice(0,x),y:+$.slice(x+4)});g=e,m=t}else g=p.offsetLeft,m=p.offsetTop;var $,x;i-=a.x,s-=a.y,L=i-g,S=s-m,c=Ze(v,P(),h,w),l?(window.addEventListener("mousemove",Y,!1),window.addEventListener("touchmove",Y,!1),window.addEventListener("mouseup",R,!1),window.addEventListener("touchend",R,!1)):console.warn("Can not get item")},div_binding:function(e){O[e?"unshift":"push"](()=>{n("container",i=e)})},$$slots:X,$$scope:F}}class vt extends U{constructor(e){super(),Q(this,e,pt,mt,s,["useTransform","items","cols","dragDebounceMs","gap","rowHeight","breakpoints","fillEmpty"])}}function $t(e){return Math.max(...e.map(e=>e.y+e.h),1)}const xt=(e,t)=>Array.from(Array(e),()=>new Array(t));function wt(e,t,n,i){let r=xt(n,i);for(var a=0;a<e.length;a++){const n=e[a],{x:i,y:c,w:l,h:d,id:u,responsive:{valueW:f}}=n;if(-1===t.indexOf(u))for(var s=c;s<c+d;s++){const e=r[s];if(e)for(var o=i;o<i+(l-f);o++)e[o]=n}}return r}function yt(e,t,n=$t(e)){let i=xt(n,t);return e.forEach((n,r)=>{let a=e.slice(r+1).map(e=>e.id),s=function(e,t,n=[],i){const{w:r}=t;let a=t.responsive.valueW;for(var s=0;s<e.length;s++){const t=e[s];for(var o=0;o<t.length;o++){const e=t.findIndex(e=>void 0===e);if(-1!==e){for(var c=t.slice(e),l=c.length,d=0;d<c.length;d++)if(void 0!==c[d]){l=d;break}return a=Math.max(r-l,0),{y:s,x:e,responsive:{valueW:a}}}}}return a=Math.max(r-i,0),{y:$t(n),x:0,responsive:{valueW:a}}}(i,n,e,t);e=e.map(e=>e.id===n.id?{...n,...s}:e),i=wt(e,a,$t(e),t)}),e}function _t(e,t,n=[]){let i=e[0].length-(t.w-t.responsive.valueW);for(var r=0;r<e.length;r++){const n=e[r];for(var a=0;a<i+1;a++){if(n.slice(a,a+(t.w-t.responsive.valueW)).every(e=>void 0===e)){if(e.slice(r,r+t.h).every(e=>e.slice(a,a+(t.w-t.responsive.valueW)).every(e=>void 0===e)))return{y:r,x:a}}}}return{y:$t(n),x:0}}function bt(e,t,n){return n.id===e.id?{...e,...t}:n}const Pt=(e,t,n)=>n.id===e.id?t:n;const It={findSpaceForItem:(e,t,n)=>_t(function(e,t=$t(e),n){let i=xt(t,n);for(var r=0;r<e.length;r++){const t=e[r],{x:n,y:o,w:c,h:l,responsive:{valueW:d}}=t;for(var a=o;a<o+l;a++){const e=i[a];for(var s=n;s<n+(c-d);s++)e[s]=t}}return i}(t,$t(t),n),e,t),appendItem:(e,t,n)=>function(e,t,n,i){let r=wt(t,[e.id],$t(t),n);const a=function(e,t,n){const{w:i,h:r,x:a,y:s,responsive:{valueW:o}}=n,c=t.slice(s,s+r);let l=[];for(var d=0;d<c.length;d++){let e=c[d].slice(a,a+(i-o));l=[...l,...e.map(e=>e&&e.id).filter(e=>e)]}return[...l.filter((e,t)=>l.indexOf(e)==t)]}(0,r,e);let s=function(e,t){return t.filter(t=>-1!==e.indexOf(t.id))}(a,t);if(s.find(e=>e.static)&&i)return t.map(Pt.bind(null,e,i));r=wt(t,a,$t(t),n);let o=t,c=a,l=[];return s.forEach(e=>{let i=_t(r,e,o);if(l.push(e.id),i){o=o.map(bt.bind(null,e,i));let a=c.filter(e=>-1===l.indexOf(e));r=wt(o,a,$t(t),n)}}),o}(e,[...t,e],n),resizeItems:(e,t,n)=>yt(e,t,n),item(e){return{drag:{top:null,left:null,dragging:!1},resize:{width:null,height:null,resizing:!1},responsive:{valueW:0},static:!1,resizable:!(t=e).static,draggable:!t.static,min:{...t.min},max:{...t.max},...t};var t}};function zt(e){var t,n=new Ke({props:{ref:e.item.id}});return{c(){n.$$.fragment.c()},m(e,i){G(n,e,i),t=!0},p(e,t){var i={};e.item&&(i.ref=t.item.id),n.$set(i)},i(e){t||(X(n.$$.fragment,e),t=!0)},o(e){F(n.$$.fragment,e),t=!1},d(e){J(n,e)}}}function kt(e){var t,n,i;function r(t){var i;e.grid_items_binding.call(null,t),n=!0,i=()=>n=!1,A.push(i)}let a={fillEmpty:e.fillEmpty,items:e.items_arr,cols:e.$cols,rowHeight:50,gap:20,$$slots:{default:[zt,({item:e})=>({item:e})]},$$scope:{ctx:e}};void 0!==e.items_arr&&(a.items=e.items_arr);var s=new vt({props:a});return O.push(()=>{return t="items",n=r,void(-1!==(e=s).$$.props.indexOf(t)&&(e.$$.bound[t]=n,n(e.$$.ctx[t])));var e,t,n}),s.$on("adjust",e.adjust_handler),s.$on("resize",e.handleWindowResize),s.$on("mount",e.handleWindowResize),{c(){t=p("div"),s.$$.fragment.c(),y(t,"id","gridContainer"),y(t,"class","grid-container svelte-6ymfld")},m(e,n){h(e,t,n),G(s,t,null),i=!0},p(e,t){var i={};e.fillEmpty&&(i.fillEmpty=t.fillEmpty),e.items_arr&&(i.items=t.items_arr),e.$cols&&(i.cols=t.$cols),e.$$scope&&(i.$$scope={changed:e,ctx:t}),!n&&e.items_arr&&(i.items=t.items_arr),s.$set(i)},i(e){i||(X(s.$$.fragment,e),i=!0)},o(e){F(s.$$.fragment,e),i=!1},d(e){e&&g(t),J(s)}}}function Et(t,n,i){let r,a,s,c=e;l(t,te,e=>{r=e,i("$activeDashIndex",r)}),t.$$.on_destroy.push(()=>c());let d=Array.from(ee[r].widgets.keys()),u=[];const f=Z(40);l(t,f,e=>{s=e,i("$cols",s)});let h=!1;const g=()=>{const e=document.getElementById("gridContainer").clientWidth,t=Math.round(e/50);return t-t%2},m=e=>{const{w:t,h:n,x:i,y:r}=e;((e,t)=>{try{ne().widgets.get(e).sizeAndPos=t}catch(e){}})(e.id,{w:t,h:n,x:i,y:r})},p=(e,t)=>{let n=[];return e.forEach((e,r)=>{let{w:a,h:s,x:o,y:c}=ie(e).sizeAndPos;a>t?(a=t,i("fillEmpty",h=!0)):i("fillEmpty",h=!1);let l=It.item({w:a,h:s,x:o,y:c,id:e});o+a>=t&&(l={...l,...It.findSpaceForItem(l,n,t)}),n=It.appendItem(l,n,t)}),(e=>{const t=Math.max(...e.map(e=>e.x+e.w)),n=Math.floor((s-t)/2);return e.map(e=>({...e,x:e.x+n}))})(n)};let v;return t.$$.update=(e={$activeDashIndex:1,$_widgetsCount:1,widgets:1,$cols:1})=>{e.$activeDashIndex&&(v=ee[r]._widgetsCount,c(),c=o(v,e=>{a=e,i("$_widgetsCount",a)}),i("_widgetsCount",v)),(e.$_widgetsCount||e.widgets||e.$activeDashIndex||e.$cols)&&a!==d.length&&(i("widgets",d=Array.from(ee[r].widgets.keys())),i("items_arr",u=p(d,s)))},{items_arr:u,cols:f,fillEmpty:h,storeWidgetSizeAndPos:m,handleWindowResize:()=>{f.update(g),i("items_arr",u=p(d,s))},_widgetsCount:v,$cols:s,grid_items_binding:function(e){u=e,i("items_arr",u),i("$_widgetsCount",a),i("widgets",d),i("$activeDashIndex",r),i("$cols",s)},adjust_handler:function(e){return m(e.detail.focuesdItem)}}}class Tt extends U{constructor(e){super(),Q(this,e,Et,kt,s,[])}}function Mt(e){var t,n,i,r,a;return{c(){t=p("img"),n=$(),i=p("div"),(r=p("button")).innerHTML='<h3 class="svelte-hyummf">Sticky</h3> <img src="/images/addIcon.svg" alt="+">',y(t,"class","cancel svelte-hyummf"),y(t,"src","/images/cancelIcon.svg"),y(t,"alt","x"),y(r,"class","svelte-hyummf"),y(i,"class","menu svelte-hyummf"),a=w(r,"click",e.click_handler)},m(e,a){h(e,t,a),h(e,n,a),h(e,i,a),f(i,r)},d(e){e&&(g(t),g(n),g(i)),a()}}}function Ot(e){var t,n,i,r,a,s,o,c=new me({props:{active:e.trashActive}});c.$on("trash",e.toggleTrash),c.$on("trash",e.trash_handler);var l=e.menuIsOpen&&Mt(e),d=new $e({props:{active:e.menuIsOpen}});return d.$on("add",e.menu.toggle),{c(){t=p("div"),n=p("nav"),c.$$.fragment.c(),i=$(),l&&l.c(),r=$(),(a=p("h2")).textContent="Widgets",s=$(),d.$$.fragment.c(),y(a,"class","svelte-hyummf"),y(n,"class","svelte-hyummf"),y(t,"class","menuArea svelte-hyummf")},m(e,u){h(e,t,u),f(t,n),G(c,n,null),f(n,i),l&&l.m(n,null),f(n,r),f(n,a),f(n,s),G(d,n,null),o=!0},p(e,t){var i={};e.trashActive&&(i.active=t.trashActive),c.$set(i),t.menuIsOpen?l||((l=Mt(t)).c(),l.m(n,r)):l&&(l.d(1),l=null);var a={};e.menuIsOpen&&(a.active=t.menuIsOpen),d.$set(a)},i(e){o||(X(c.$$.fragment,e),X(d.$$.fragment,e),o=!0)},o(e){F(c.$$.fragment,e),F(d.$$.fragment,e),o=!1},d(e){e&&g(t),J(c),l&&l.d(),J(d)}}}function Wt(e,t,n){let i=!1;const r=new xe(e=>{const t=i=e;return n("menuIsOpen",i),t});let a=!1;const s=e=>{ae(e)};return{menuIsOpen:i,menu:r,trashActive:a,toggleTrash:()=>{n("trashActive",a=!a)},add:s,trash_handler:function(t){!function(e,t){const n=e.$$.callbacks[t.type];n&&n.slice().forEach(e=>e(t))}(e,t)},click_handler:function(){return s("Sticky")}}}class At extends U{constructor(e){super(),Q(this,e,Wt,Ot,s,[])}}function Ct(e){var t,n,i,r,a,s=new We({}),o=new Tt({}),c=new At({});return c.$on("trash",e.activateTrash),{c(){t=p("main"),s.$$.fragment.c(),n=$(),o.$$.fragment.c(),i=$(),c.$$.fragment.c(),y(t,"class",r=u(e.trashActive?"trash":"")+" svelte-1y72nzg")},m(e,r){h(e,t,r),G(s,t,null),f(t,n),G(o,t,null),f(t,i),G(c,t,null),a=!0},p(e,n){a&&!e.trashActive||r===(r=u(n.trashActive?"trash":"")+" svelte-1y72nzg")||y(t,"class",r)},i(e){a||(X(s.$$.fragment,e),X(o.$$.fragment,e),X(c.$$.fragment,e),a=!0)},o(e){F(s.$$.fragment,e),F(o.$$.fragment,e),F(c.$$.fragment,e),a=!1},d(e){e&&g(t),J(s),J(o),J(c)}}}function Dt(e,t,n){let i=!1;return{trashActive:i,activateTrash:e=>{n("trashActive",i=e.detail.active)}}}return new class extends U{constructor(e){super(),Q(this,e,Dt,Ct,s,[])}}({target:document.body,props:{name:"world"}})}();
//# sourceMappingURL=bundle.js.map
