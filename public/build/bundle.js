var app=function(){"use strict";function t(){}const e=t=>t;function n(t,e){for(const n in e)t[n]=e[n];return t}function i(t){return t()}function r(){return Object.create(null)}function a(t){t.forEach(i)}function s(t){return"function"==typeof t}function o(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function c(t,e){const n=t.subscribe(e);return n.unsubscribe?()=>n.unsubscribe():n}function l(t){let e;return c(t,t=>e=t)(),e}function d(t,e,n){t.$$.on_destroy.push(c(e,n))}function u(t,e,i){return t[1]?n({},n(e.$$scope.ctx,t[1](i?i(e):{}))):e.$$scope.ctx}function f(t){return null==t?"":t}const g="undefined"!=typeof window;let h=g?()=>window.performance.now():()=>Date.now(),m=g?t=>requestAnimationFrame(t):t;const p=new Set;let v,$=!1;function x(){p.forEach(t=>{t[0](h())||(p.delete(t),t[1]())}),$=p.size>0,$&&m(x)}function w(t,e){t.appendChild(e)}function y(t,e,n){t.insertBefore(e,n||null)}function _(t){t.parentNode.removeChild(t)}function b(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function P(t){return document.createElement(t)}function k(t){return document.createTextNode(t)}function z(){return k(" ")}function I(){return k("")}function E(t,e,n,i){return t.addEventListener(e,n,i),()=>t.removeEventListener(e,n,i)}function T(t,e,n){null==n?t.removeAttribute(e):t.setAttribute(e,n)}function M(t,e){e=""+e,t.data!==e&&(t.data=e)}function O(t,e,n){t.style.setProperty(e,n)}function W(t,e,n){t.classList[n?"add":"remove"](e)}function A(t,e){const n=document.createEvent("CustomEvent");return n.initCustomEvent(t,!1,!1,e),n}let C,D=0,L={};function S(t,e,n,i,r,a,s,o=0){const c=16.666/i;let l="{\n";for(let t=0;t<=1;t+=c){const i=e+(n-e)*a(t);l+=100*t+`%{${s(i,1-i)}}\n`}const d=l+`100% {${s(n,1-n)}}\n}`,u=`__svelte_${function(t){let e=5381,n=t.length;for(;n--;)e=(e<<5)-e^t.charCodeAt(n);return e>>>0}(d)}_${o}`;if(!L[u]){if(!v){const t=P("style");document.head.appendChild(t),v=t.sheet}L[u]=!0,v.insertRule(`@keyframes ${u} ${d}`,v.cssRules.length)}const f=t.style.animation||"";return t.style.animation=`${f?`${f}, `:""}${u} ${i}ms linear ${r}ms 1 both`,D+=1,u}function j(t,e){t.style.animation=(t.style.animation||"").split(", ").filter(e?t=>t.indexOf(e)<0:t=>-1===t.indexOf("__svelte")).join(", "),e&&!--D&&m(()=>{if(D)return;let t=v.cssRules.length;for(;t--;)v.deleteRule(t);L={}})}function R(t){C=t}function N(){if(!C)throw new Error("Function called outside component initialization");return C}function Y(t){N().$$.before_update.push(t)}function H(){const t=C;return(e,n)=>{const i=t.$$.callbacks[e];if(i){const r=A(e,n);i.slice().forEach(e=>{e.call(t,r)})}}}const F=[],X=[],q=[],B=[],G=Promise.resolve();let J,K=!1;function Q(t){q.push(t)}function U(){const t=new Set;do{for(;F.length;){const t=F.shift();R(t),V(t.$$)}for(;X.length;)X.pop()();for(let e=0;e<q.length;e+=1){const n=q[e];t.has(n)||(n(),t.add(n))}q.length=0}while(F.length);for(;B.length;)B.pop()();K=!1}function V(t){t.fragment&&(t.update(t.dirty),a(t.before_update),t.fragment.p(t.dirty,t.ctx),t.dirty=null,t.after_update.forEach(Q))}function Z(t,e,n){t.dispatchEvent(A(`${e?"intro":"outro"}${n}`))}const tt=new Set;let et;function nt(){et={r:0,c:[],p:et}}function it(){et.r||a(et.c),et=et.p}function rt(t,e){t&&t.i&&(tt.delete(t),t.i(e))}function at(t,e,n,i){if(t&&t.o){if(tt.has(t))return;tt.add(t),et.c.push(()=>{tt.delete(t),i&&(n&&t.d(1),i())}),t.o(e)}}const st={duration:0};function ot(n,i,r,o){let c=i(n,r),l=o?0:1,d=null,u=null,f=null;function g(){f&&j(n,f)}function v(t,e){const n=t.b-l;return e*=Math.abs(n),{a:l,b:t.b,d:n,duration:e,start:t.start,end:t.start+e,group:t.group}}function w(i){const{delay:r=0,duration:s=300,easing:o=e,tick:w=t,css:y}=c||st,_={start:h()+r,b:i};i||(_.group=et,et.r+=1),d?u=_:(y&&(g(),f=S(n,l,i,s,r,o,y)),i&&w(0,1),d=v(_,s),Q(()=>Z(n,i,"start")),function(t){let e;$||($=!0,m(x)),new Promise(n=>{p.add(e=[t,n])})}(t=>{if(u&&t>u.start&&(d=v(u,s),u=null,Z(n,d.b,"start"),y&&(g(),f=S(n,l,d.b,d.duration,0,o,c.css))),d)if(t>=d.end)w(l=d.b,1-l),Z(n,d.b,"end"),u||(d.b?g():--d.group.r||a(d.group.c)),d=null;else if(t>=d.start){const e=t-d.start;l=d.a+d.d*o(e/d.duration),w(l,1-l)}return!(!d&&!u)}))}return{run(t){s(c)?(J||(J=Promise.resolve(),J.then(()=>{J=null})),J).then(()=>{c=c(),w(t)}):w(t)},end(){g(),d=u=null}}}const ct="undefined"!=typeof window?window:global;function lt(t,e){at(t,1,1,()=>{e.delete(t.key)})}function dt(t,e,n){const{fragment:r,on_mount:o,on_destroy:c,after_update:l}=t.$$;r.m(e,n),Q(()=>{const e=o.map(i).filter(s);c?c.push(...e):a(e),t.$$.on_mount=[]}),l.forEach(Q)}function ut(t,e){t.$$.fragment&&(a(t.$$.on_destroy),t.$$.fragment.d(e),t.$$.on_destroy=t.$$.fragment=null,t.$$.ctx={})}function ft(t,e){t.$$.dirty||(F.push(t),K||(K=!0,G.then(U)),t.$$.dirty=r()),t.$$.dirty[e]=!0}function gt(e,n,i,s,o,c){const l=C;R(e);const d=n.props||{},u=e.$$={fragment:null,ctx:null,props:c,update:t,not_equal:o,bound:r(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(l?l.$$.context:[]),callbacks:r(),dirty:null};let f=!1;u.ctx=i?i(e,d,(t,n)=>{u.ctx&&o(u.ctx[t],u.ctx[t]=n)&&(u.bound[t]&&u.bound[t](n),f&&ft(e,t))}):d,u.update(),f=!0,a(u.before_update),u.fragment=s(u.ctx),n.target&&(n.hydrate?u.fragment.l(function(t){return Array.from(t.childNodes)}(n.target)):u.fragment.c(),n.intro&&rt(e.$$.fragment),dt(e,n.target,n.anchor),U()),R(l)}class ht{$destroy(){ut(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(){}}const mt=[];function pt(e,n=t){let i;const r=[];function a(t){if(o(e,t)&&(e=t,i)){const t=!mt.length;for(let t=0;t<r.length;t+=1){const n=r[t];n[1](),mt.push(n,e)}if(t){for(let t=0;t<mt.length;t+=2)mt[t][0](mt[t+1]);mt.length=0}}}return{set:a,update:function(t){a(t(e))},subscribe:function(s,o=t){const c=[s,o];return r.push(c),1===r.length&&(i=n(a)||t),s(e),()=>{const t=r.indexOf(c);-1!==t&&r.splice(t,1),0===r.length&&(i(),i=null)}}}}const vt=[];let $t=pt(2);const xt=t=>$t.update(()=>t),wt=()=>vt[l($t)],yt=t=>wt().widgets.get(t),_t=(t="")=>{try{const e={_title:pt(t),widgets:new Map,_widgetsCount:pt(0)};vt.push(e),xt(vt.length-1)}catch(t){}},bt=(t,e="",n="",i={w:8,h:5,x:1/0,y:0})=>{try{const r={type:t,sizeAndPos:i,_title:pt(e),_data:pt(n)};wt().widgets.set(Symbol(),r),wt()._widgetsCount.update(t=>t+1)}catch(t){}},Pt=t=>{try{vt.splice(t,1)}catch(t){}};function kt(e){var n,i;return{c(){(n=P("button")).innerHTML='<img src="/images/arrowRightIcon.svg" alt="prev">',T(n,"class","svelte-1l6716q"),i=E(n,"click",e.left)},m(t,e){y(t,n,e)},p:t,i:t,o:t,d(t){t&&_(n),i()}}}function zt(t){const e=H();return{left:()=>{e("left")}}}_t("one"),_t("two"),_t("three"),_t("four"),_t("five"),bt("Sticky","Welcome","This is currently only a prototype. The concept is a personal dash space for organising activities. At the moment functionality is limited.",{w:8,h:5,x:0,y:0}),bt("Sticky","Widgets","These are the building block. Each has an editiable title. You can resize and drag and drop them.",{w:8,h:6,x:8,y:4}),bt("Sticky","Sticky","A type of Widget. Currently the only type available for the prototype. It accepts a text input. Future versions will accept and automatically convert image urls, dates, links, and todo lists.",{w:8,h:5,x:0,y:6}),bt("Sticky","Add Widget","You may add more widgets using the widgets menu in the bottom right corner.",{w:8,h:5,x:0,y:8}),bt("Sticky","Delete Widgets","You can remove widgets by activating the trash from the widgets menu and clicking the trash icon within each widget to be removed.",{w:8,h:5,x:16,y:8});class It extends ht{constructor(t){super(),gt(this,t,zt,kt,o,[])}}function Et(e){var n,i;return{c(){(n=P("button")).innerHTML='<img src="/images/arrowRightIcon.svg" alt="next">',T(n,"class","svelte-1bwa45r"),i=E(n,"click",e.right)},m(t,e){y(t,n,e)},p:t,i:t,o:t,d(t){t&&_(n),i()}}}function Tt(t){const e=H();return{right:()=>{e("right")}}}class Mt extends ht{constructor(t){super(),gt(this,t,Tt,Et,o,[])}}function Ot(t){var e,n,i;return{c(){T(e=P("img"),"class",n="cancel "+t.cancelPos+" svelte-1gmxc8e"),T(e,"src","/images/cancelIcon.svg"),T(e,"alt","x"),i=E(e,"click",t.trash)},m(t,n){y(t,e,n)},p(t,i){t.cancelPos&&n!==(n="cancel "+i.cancelPos+" svelte-1gmxc8e")&&T(e,"class",n)},d(t){t&&_(e),i()}}}function Wt(e){var n,i,r,a,s,o=e.active&&Ot(e);return{c(){n=P("button"),o&&o.c(),i=z(),T(r=P("img"),"src","/images/TrashIcon.svg"),T(r,"alt","-"),T(n,"class",a=f(e.active?"active":"")+" svelte-1gmxc8e"),s=E(n,"click",e.trash)},m(t,e){y(t,n,e),o&&o.m(n,null),w(n,i),w(n,r)},p(t,e){e.active?o?o.p(t,e):((o=Ot(e)).c(),o.m(n,i)):o&&(o.d(1),o=null),t.active&&a!==(a=f(e.active?"active":"")+" svelte-1gmxc8e")&&T(n,"class",a)},i:t,o:t,d(t){t&&_(n),o&&o.d(),s()}}}function At(t,e,n){let{active:i=!1,cancelPos:r="top"}=e;const a=H();return t.$set=t=>{"active"in t&&n("active",i=t.active),"cancelPos"in t&&n("cancelPos",r=t.cancelPos)},{active:i,cancelPos:r,trash:()=>{a("trash",{active:!i})}}}class Ct extends ht{constructor(t){super(),gt(this,t,At,Wt,o,["active","cancelPos"])}}function Dt(e){var n,i,r,a;return{c(){n=P("button"),T(i=P("img"),"src","/images/addIcon.svg"),T(i,"alt","+"),T(n,"class",r=f(e.active?"active":"")+" svelte-9b9csn"),a=E(n,"click",e.add)},m(t,e){y(t,n,e),w(n,i)},p(t,e){t.active&&r!==(r=f(e.active?"active":"")+" svelte-9b9csn")&&T(n,"class",r)},i:t,o:t,d(t){t&&_(n),a()}}}function Lt(t,e,n){let{active:i}=e;const r=H();return t.$set=t=>{"active"in t&&n("active",i=t.active)},{active:i,add:()=>r("add")}}class St extends ht{constructor(t){super(),gt(this,t,Lt,Dt,o,["active"])}}function jt(t,e=!1){this.isOpen=e,this.update=t,this.close=this.close.bind(this),this.open=this.open.bind(this),this.toggle=this.toggle.bind(this)}function Rt(t,e,n){const i=Object.create(t);return i.dashIndex=e[n],i.i=n,i}function Nt(t,e,n){const i=Object.create(t);return i.dash=e[n],i.i=n,i}function Yt(e){var n;return{c(){T(n=P("div"),"class","carousel svelte-1ykgzfv")},m(t,e){y(t,n,e)},p:t,d(t){t&&_(n)}}}function Ht(t){var e;function n(t){return t.trashIsOpen?Xt:Ft}var i=n(t),r=i(t);return{c(){r.c(),e=I()},m(t,n){r.m(t,n),y(t,e,n)},p(t,a){i===(i=n(a))&&r?r.p(t,a):(r.d(1),(r=i(a))&&(r.c(),r.m(e.parentNode,e)))},d(t){r.d(t),t&&_(e)}}}function Ft(t){for(var e,n,i,r=t.navIndexArray,a=[],s=0;s<r.length;s+=1)a[s]=Kt(Rt(t,r,s));return{c(){e=P("div"),n=P("div");for(var r=0;r<a.length;r+=1)a[r].c();T(n,"class",i="carousel "+t.animationClass+" svelte-1ykgzfv"),T(e,"class","carousel-space svelte-1ykgzfv")},m(t,i){y(t,e,i),w(e,n);for(var r=0;r<a.length;r+=1)a[r].m(n,null)},p(t,e){if(t.navIndexArray||t.$_activeDashIndex||t.editingTitle||t.$_title||t.dashboards||t.get){r=e.navIndexArray;for(var s=0;s<r.length;s+=1){const i=Rt(e,r,s);a[s]?a[s].p(t,i):(a[s]=Kt(i),a[s].c(),a[s].m(n,null))}for(;s<a.length;s+=1)a[s].d(1);a.length=r.length}t.animationClass&&i!==(i="carousel "+e.animationClass+" svelte-1ykgzfv")&&T(n,"class",i)},d(t){t&&_(e),b(a,t)}}}function Xt(t){for(var e,n=vt,i=[],r=0;r<n.length;r+=1)i[r]=Qt(Nt(t,n,r));return{c(){e=P("div");for(var t=0;t<i.length;t+=1)i[t].c();T(e,"class","trashMenu svelte-1ykgzfv")},m(t,n){y(t,e,n);for(var r=0;r<i.length;r+=1)i[r].m(e,null)},p(t,r){if(t.get||t.dashboards){n=vt;for(var a=0;a<n.length;a+=1){const s=Nt(r,n,a);i[a]?i[a].p(t,s):(i[a]=Qt(s),i[a].c(),i[a].m(e,null))}for(;a<i.length;a+=1)i[a].d(1);i.length=n.length}},d(t){t&&_(e),b(i,t)}}}function qt(t){var e,n,i,r=vt[t.dashIndex]?l(vt[t.dashIndex]._title):"";function a(){return t.click_handler_2(t)}return{c(){e=P("button"),n=k(r),T(e,"class","nav-button-"+t.i+" svelte-1ykgzfv"),i=E(e,"click",a)},m(t,i){y(t,e,i),w(e,n)},p(e,i){t=i,e.navIndexArray&&r!==(r=vt[t.dashIndex]?l(vt[t.dashIndex]._title):"")&&M(n,r)},d(t){t&&_(e),i()}}}function Bt(t){var e,n;function i(t){return t.editingTitle?Jt:Gt}var r=i(t),a=r(t);return{c(){e=P("div"),a.c(),n=z(),T(e,"class","current svelte-1ykgzfv")},m(t,i){y(t,e,i),a.m(e,null),w(e,n)},p(t,s){r===(r=i(s))&&a?a.p(t,s):(a.d(1),(a=r(s))&&(a.c(),a.m(e,n)))},d(t){t&&_(e),a.d()}}}function Gt(t){var e,n,i;return{c(){e=P("button"),n=k(t.$_title),T(e,"class","active-dash-title svelte-1ykgzfv"),i=E(e,"click",t.click_handler_1)},m(t,i){y(t,e,i),w(e,n)},p(t,e){t.$_title&&M(n,e.$_title)},d(t){t&&_(e),i()}}}function Jt(t){var e,n;return{c(){T(e=P("input"),"type","text"),e.autofocus=!0,T(e,"class","svelte-1ykgzfv"),n=[E(e,"input",t.input_input_handler),E(e,"blur",t.closeEditingTitle)]},m(n,i){y(n,e,i),e.value=t.$_title,e.focus()},p(t,n){t.$_title&&e.value!==n.$_title&&(e.value=n.$_title)},d(t){t&&_(e),a(n)}}}function Kt(t){var e;function n(t){return t.dashIndex===t.$_activeDashIndex?Bt:qt}var i=n(t),r=i(t);return{c(){r.c(),e=I()},m(t,n){r.m(t,n),y(t,e,n)},p(t,a){i===(i=n(a))&&r?r.p(t,a):(r.d(1),(r=i(a))&&(r.c(),r.m(e.parentNode,e)))},d(t){r.d(t),t&&_(e)}}}function Qt(t){var e,n,i,r,a,s,o,c=l(t.dash._title);function d(){return t.click_handler(t)}return{c(){e=P("button"),n=P("h3"),i=k(c),r=z(),a=P("img"),s=z(),T(n,"class","svelte-1ykgzfv"),T(a,"src","/images/trashIcon.svg"),T(a,"alt","-"),T(a,"class","svelte-1ykgzfv"),T(e,"class","svelte-1ykgzfv"),o=E(e,"click",d)},m(t,o){y(t,e,o),w(e,n),w(n,i),w(e,r),w(e,a),w(e,s)},p(e,n){t=n},d(t){t&&_(e),o()}}}function Ut(t){var e,n,i,r,a,s,o,c=new It({});c.$on("left",t.left_handler);var l=new Ct({props:{active:t.trashIsOpen,cancelPos:"right"}});function d(t){return vt.length>0?Ht:Yt}l.$on("trash",t.trash.toggle);var u=d(),f=u(t),g=new St({});g.$on("add",t.addNewDash);var h=new Mt({});return h.$on("right",t.right_handler),{c(){e=P("nav"),c.$$.fragment.c(),n=z(),l.$$.fragment.c(),i=z(),r=P("div"),f.c(),a=z(),g.$$.fragment.c(),s=z(),h.$$.fragment.c(),T(r,"class","container svelte-1ykgzfv"),T(e,"class","svelte-1ykgzfv")},m(t,d){y(t,e,d),dt(c,e,null),w(e,n),dt(l,e,null),w(e,i),w(e,r),f.m(r,null),w(e,a),dt(g,e,null),w(e,s),dt(h,e,null),o=!0},p(t,e){var n={};t.trashIsOpen&&(n.active=e.trashIsOpen),l.$set(n),u===(u=d())&&f?f.p(t,e):(f.d(1),(f=u(e))&&(f.c(),f.m(r,null)))},i(t){o||(rt(c.$$.fragment,t),rt(l.$$.fragment,t),rt(g.$$.fragment,t),rt(h.$$.fragment,t),o=!0)},o(t){at(c.$$.fragment,t),at(l.$$.fragment,t),at(g.$$.fragment,t),at(h.$$.fragment,t),o=!1},d(t){t&&_(e),ut(c),ut(l),f.d(),ut(g),ut(h)}}}function Vt(e,n,i){let r,a,s=t;d(e,$t,t=>{r=t,i("$_activeDashIndex",r)}),e.$$.on_destroy.push(()=>s());let o=!1;const l=new jt(t=>{const e=o=t;return i("trashIsOpen",o),e});let u=!1;let f="";const g=t=>{const e=(vt.length+r+t)%vt.length;0!==t&&e!==r&&(i("animationClass",f=t>0?"forward-animation":"backward-animation"),setTimeout(()=>{xt(e),i("animationClass",f="")},500))};let h=r;const m=t=>{Pt(t),xt((vt.length+r-1)%vt.length)};let p,v;return e.$$.update=(t={$_activeDashIndex:1})=>{t.$_activeDashIndex&&i("navIndexArray",p=(t=>{let e=[];for(let n=0;n<5;n++)if(vt.length<5)e.push(t+n-2);else{const i=(vt.length+t+n-2)%vt.length;e.push(i)}return e})(r)),t.$_activeDashIndex&&(v=vt[r]?vt[r]._title:pt(""),s(),s=c(v,t=>{a=t,i("$_title",a)}),i("_title",v))},{trashIsOpen:o,trash:l,editingTitle:u,animationClass:f,setActiveDash:g,addNewDash:()=>{h=r,_t(""),i("editingTitle",u=!0),xt(vt.length-1)},closeEditingTitle:()=>{i("editingTitle",u=!1),""===event.target.value&&(Pt(vt.length-1),xt(h))},deleteDash:m,navIndexArray:p,$_activeDashIndex:r,_title:v,$_title:a,left_handler:function(){return g(-1)},click_handler:function({i:t}){return m(t)},input_input_handler:function(){v.set(this.value)},click_handler_1:function(){const t=u=!0;return i("editingTitle",u),t},click_handler_2:function({i:t}){return g(t>3?1:-1)},right_handler:function(){return g(1)}}}jt.prototype.close=function(){setTimeout(()=>{this.isOpen&&(this.isOpen=!1,this.update(this.isOpen))},0),window.removeEventListener("click",this.close,{capture:!0})},jt.prototype.open=function(){this.isOpen=!0,window.addEventListener("click",this.close,{capture:!0}),this.update(this.isOpen)},jt.prototype.toggle=function(){this.isOpen?this.close():this.open()};class Zt extends ht{constructor(t){super(),gt(this,t,Vt,Ut,o,[])}}function te(t){return--t*t*t*t*t+1}function ee(t){var e,n,i;return{c(){e=P("article"),n=k(t.$_data),T(e,"class","svelte-1ovrvdo"),i=E(e,"click",t.click_handler)},m(t,i){y(t,e,i),w(e,n)},p(t,e){t.$_data&&M(n,e.$_data)},d(t){t&&_(e),i()}}}function ne(t){var e,n;return{c(){(e=P("textarea")).autofocus=!0,T(e,"class","svelte-1ovrvdo"),n=[E(e,"input",t.textarea_input_handler),E(e,"change",t.disableEditIfNoFocus),E(e,"blur",t.blur_handler)]},m(n,i){y(n,e,i),e.value=t.$_data,e.focus()},p(t,n){t.$_data&&(e.value=n.$_data)},d(t){t&&_(e),a(n)}}}function ie(e){var n;function i(t){return t.editing?ne:ee}var r=i(e),a=r(e);return{c(){a.c(),n=I()},m(t,e){a.m(t,e),y(t,n,e)},p(t,e){r===(r=i(e))&&a?a.p(t,e):(a.d(1),(a=r(e))&&(a.c(),a.m(n.parentNode,n)))},i:t,o:t,d(t){a.d(t),t&&_(n)}}}function re(t,e,n){let i,{_data:r}=e;d(t,r,t=>{i=t,n("$_data",i)});let a=!0;return t.$set=t=>{"_data"in t&&n("_data",r=t._data)},{_data:r,editing:a,disableEditIfNoFocus:()=>{this!==document.activeElement&&n("editing",a=!1)},$_data:i,textarea_input_handler:function(){r.set(this.value)},blur_handler:function(){const t=a=!1;return n("editing",a),t},click_handler:function(){const t=a=!0;return n("editing",a),t}}}class ae extends ht{constructor(t){super(),gt(this,t,re,ie,o,["_data"])}}function se(e){var n,i;return{c(){T(n=P("textarea"),"class","svelte-1jhz1zv"),i=E(n,"input",e.textarea_input_handler)},m(t,i){y(t,n,i),n.value=e.$_data},p(t,e){t.$_data&&(n.value=e.$_data)},i:t,o:t,d(t){t&&_(n),i()}}}function oe(t){var e,n=new ae({props:{_data:t._data}});return{c(){n.$$.fragment.c()},m(t,i){dt(n,t,i),e=!0},p(t,e){var i={};t._data&&(i._data=e._data),n.$set(i)},i(t){e||(rt(n.$$.fragment,t),e=!0)},o(t){at(n.$$.fragment,t),e=!1},d(t){ut(n,t)}}}function ce(t){var e,n,i,r,a=[oe,se],s=[];function o(t){return"Text"===t.type?0:1}return e=o(t),n=s[e]=a[e](t),{c(){n.c(),i=I()},m(t,n){s[e].m(t,n),y(t,i,n),r=!0},p(t,r){var c=e;(e=o(r))===c?s[e].p(t,r):(nt(),at(s[c],1,1,()=>{s[c]=null}),it(),(n=s[e])||(n=s[e]=a[e](r)).c(),rt(n,1),n.m(i.parentNode,i))},i(t){r||(rt(n),r=!0)},o(t){at(n),r=!1},d(t){s[e].d(t),t&&_(i)}}}function le(t,e,n){let i,r,{_data:a}=e;return d(t,a,t=>{i=t,n("$_data",i)}),Y(()=>{var t;n("type",r=(t=i)&&t.length>0?"Text":void 0)}),t.$set=t=>{"_data"in t&&n("_data",a=t._data)},{_data:a,type:r,$_data:i,textarea_input_handler:function(){a.set(this.value)}}}class de extends ht{constructor(t){super(),gt(this,t,le,ce,o,["_data"])}}function ue(t){var e,n,i;return{c(){e=P("h2"),n=k(t.$_title),T(e,"class","svelte-1w89jgw"),i=E(e,"click",t.click_handler)},m(t,i){y(t,e,i),w(e,n)},p(t,e){t.$_title&&M(n,e.$_title)},d(t){t&&_(e),i()}}}function fe(t){var e,n;return{c(){T(e=P("input"),"type","text"),e.autofocus=!0,T(e,"class","svelte-1w89jgw"),n=[E(e,"input",t.input_input_handler),E(e,"blur",t.blur_handler)]},m(n,i){y(n,e,i),e.value=t.$_title,e.focus()},p(t,n){t.$_title&&e.value!==n.$_title&&(e.value=n.$_title)},d(t){t&&_(e),a(n)}}}function ge(e){var n,i,r;return{c(){n=P("div"),i=k(e.type),r=k(" Widget type not yet implemented"),T(n,"class","svelte-1w89jgw")},m(t,e){y(t,n,e),w(n,i),w(n,r)},p:t,i:t,o:t,d(t){t&&_(n)}}}function he(t){var e,n=new de({props:{_data:t._data}});return{c(){n.$$.fragment.c()},m(t,i){dt(n,t,i),e=!0},p(t,e){var i={};t._data&&(i._data=e._data),n.$set(i)},i(t){e||(rt(n.$$.fragment,t),e=!0)},o(t){at(n.$$.fragment,t),e=!1},d(t){ut(n,t)}}}function me(t){var e,n,i,r,a,s,o,c;function l(t){return t.editingTitle?fe:ue}var d=l(t),u=d(t),f=[he,ge],g=[];function h(t){return"Sticky"===t.type?0:1}i=h(t),r=g[i]=f[i](t);var m=new Ct({});return m.$on("trash",t.removeSelf),{c(){e=P("div"),u.c(),n=z(),r.c(),a=z(),s=P("span"),m.$$.fragment.c(),T(s,"class","svelte-1w89jgw"),T(e,"class","svelte-1w89jgw")},m(t,r){y(t,e,r),u.m(e,null),w(e,n),g[i].m(e,null),w(e,a),w(e,s),dt(m,s,null),c=!0},p(t,s){d===(d=l(s))&&u?u.p(t,s):(u.d(1),(u=d(s))&&(u.c(),u.m(e,n)));var o=i;(i=h(s))===o?g[i].p(t,s):(nt(),at(g[o],1,1,()=>{g[o]=null}),it(),(r=g[i])||(r=g[i]=f[i](s)).c(),rt(r,1),r.m(e,a))},i(t){c||(rt(r),rt(m.$$.fragment,t),Q(()=>{o||(o=ot(e,pe,{duration:300,easing:te},!0)),o.run(1)}),c=!0)},o(t){at(r),at(m.$$.fragment,t),o||(o=ot(e,pe,{duration:300,easing:te},!1)),o.run(0),c=!1},d(t){t&&_(e),u.d(),g[i].d(),ut(m),t&&o&&o.end()}}}function pe(t,{delay:e=0,duration:n=400,easing:i=easing.cubicOut}){const r=getComputedStyle(t),a=+r.opacity;parseFloat(r.width);return{delay:e,duration:n,easing:i,css:t=>"overflow: hidden;"+`opacity: ${Math.min(20*t,1)*a};`+`transform: rotateY(${90*(t-1)}deg)`}}function ve(t,e,n){let i,{ref:r}=e,{_title:a,_data:s,type:o}=yt(r);d(t,a,t=>{i=t,n("$_title",i)});let c=!1;return t.$set=t=>{"ref"in t&&n("ref",r=t.ref)},{ref:r,_title:a,_data:s,type:o,editingTitle:c,removeSelf:()=>{((t,e=l($t))=>{try{vt[e].widgets.delete(t)&&vt[e]._widgetsCount.update(t=>t-1)}catch(t){}})(r)},$_title:i,input_input_handler:function(){a.set(this.value)},blur_handler:function(){const t=c=!1;return n("editingTitle",c),t},click_handler:function(){const t=c=!0;return n("editingTitle",c),t}}}class $e extends ht{constructor(t){super(),gt(this,t,ve,me,o,["ref"])}}const xe=(t,e=0)=>{let n;return function(...i){clearTimeout(n),n=setTimeout(()=>t.apply(this,i),e)}};function we(t){return{pageX:t.changedTouches?t.changedTouches[0].pageX:t.pageX,pageY:t.changedTouches?t.changedTouches[0].pageY:t.pageY}}function ye(t){return Math.max(...t.map(t=>t.y+t.h),1)}const _e=(t,e,n,i)=>{var r=!1,a=n;if(t)for(var s=t.length-1;s>=0;s--){const[n,i]=t[s];if(e<=n){r=!0,a=i;break}}return r||(a=i),a},be=(t,e)=>Array.from(Array(t),()=>new Array(e));function Pe(t,e,n,i){let r=be(n,i);for(var a=0;a<t.length;a++){const n=t[a],{x:i,y:c,w:l,h:d,id:u,responsive:{valueW:f}}=n;if(-1===e.indexOf(u))for(var s=c;s<c+d;s++){const t=r[s];if(t)for(var o=i;o<i+(l-f);o++)t[o]=n}}return r}function ke(t,e,n=ye(t)){let i=be(n,e);return t.forEach((n,r)=>{let a=t.slice(r+1).map(t=>t.id),s=function(t,e,n=[],i){const{w:r}=e;let a=e.responsive.valueW;for(var s=0;s<t.length;s++){const e=t[s];for(var o=0;o<e.length;o++){const t=e.findIndex(t=>void 0===t);if(-1!==t){for(var c=e.slice(t),l=c.length,d=0;d<c.length;d++)if(void 0!==c[d]){l=d;break}return a=Math.max(r-l,0),{y:s,x:t,responsive:{valueW:a}}}}}return a=Math.max(r-i,0),{y:ye(n),x:0,responsive:{valueW:a}}}(i,n,t,e);t=t.map(t=>t.id===n.id?{...n,...s}:t),i=Pe(t,a,ye(t),e)}),t}function ze(t,e){const n=e.findIndex(e=>e.id===t);return{index:n,item:e[n]}}function Ie(t,e,n=[]){let i=t[0].length-(e.w-e.responsive.valueW);for(var r=0;r<t.length;r++){const n=t[r];for(var a=0;a<i+1;a++){if(n.slice(a,a+(e.w-e.responsive.valueW)).every(t=>void 0===t)){if(t.slice(r,r+e.h).every(t=>t.slice(a,a+(e.w-e.responsive.valueW)).every(t=>void 0===t)))return{y:r,x:a}}}}return{y:ye(n),x:0}}function Ee(t,e,n){return n.id===t.id?{...t,...e}:n}const Te=(t,e,n)=>n.id===t.id?e:n;function Me(t,e){return Math.max(ye(t),2)*e}const{window:Oe}=ct,We=({item:t,items:e,i:n})=>({item:e,index:e}),Ae=({item:t,items:e,i:n})=>({item:t,index:n});function Ce(t,e,n){const i=Object.create(t);return i.item=e[n],i.i=n,i}function De(t){var e,n;return{c(){T(e=P("div"),"class","svlt-grid-resizer svelte-14tbpr7"),n=[E(e,"touchstart",t.resizeOnMouseDown.bind(this,t.item.id)),E(e,"mousedown",t.resizeOnMouseDown.bind(this,t.item.id))]},m(t,n){y(t,e,n)},p(e,n){t=n},d(t){t&&_(e),a(n)}}}function Le(t,e){var i,r,s,o,c;const l=e.$$slots.default,d=function(t,e,n){if(t){const i=u(t,e,n);return t[0](i)}}(l,e,Ae);var f=e.item.resizable&&De(e);return{key:t,first:null,c(){i=P("div"),d&&d.c(),r=z(),f&&f.c(),T(i,"class","svlt-grid-item svelte-14tbpr7"),T(i,"style",s=(e.useTransform?`transform: translate(${e.item.drag.dragging?e.item.drag.left:e.item.x*e.xPerPx+e.gap}px, ${e.item.drag.dragging?e.item.drag.top:e.item.y*e.yPerPx+e.gap}px);`:"")+";\n        "+(e.useTransform?"":`top: ${e.item.drag.dragging?e.item.drag.top:e.item.y*e.yPerPx+e.gap}px`)+";\n        "+(e.useTransform?"":`left: ${e.item.drag.dragging?e.item.drag.left:e.item.x*e.xPerPx+e.gap}px`)+";\n        width: "+(e.item.resize.resizing?e.item.resize.width:e.item.w*e.xPerPx-2*e.gap-e.item.responsive.valueW*e.xPerPx)+"px;\n        height: "+(e.item.resize.resizing?e.item.resize.height:e.item.h*e.yPerPx-2*e.gap)+"px;\n        z-index: "+(e.item.drag.dragging||e.item.resize.resizing?3:1)+";\n        opacity: "+(e.item.resize.resizing?.5:1)),c=[E(i,"mousedown",e.item.draggable?e.dragOnMouseDown.bind(this,e.item.id):null),E(i,"touchstart",e.item.draggable?e.dragOnMouseDown.bind(this,e.item.id):null)],this.first=i},l(t){d&&d.l(div_nodes)},m(t,e){y(t,i,e),d&&d.m(i,null),w(i,r),f&&f.m(i,null),o=!0},p(t,r){e=r,d&&d.p&&(t.$$scope||t.items)&&d.p(function(t,e,i,r){return t[1]?n({},n(e.$$scope.changed||{},t[1](r?r(i):{}))):e.$$scope.changed||{}}(l,e,t,We),u(l,e,Ae)),e.item.resizable?f||((f=De(e)).c(),f.m(i,null)):f&&(f.d(1),f=null),(!o||t.useTransform||t.items||t.xPerPx||t.gap)&&s!==(s=(e.useTransform?`transform: translate(${e.item.drag.dragging?e.item.drag.left:e.item.x*e.xPerPx+e.gap}px, ${e.item.drag.dragging?e.item.drag.top:e.item.y*e.yPerPx+e.gap}px);`:"")+";\n        "+(e.useTransform?"":`top: ${e.item.drag.dragging?e.item.drag.top:e.item.y*e.yPerPx+e.gap}px`)+";\n        "+(e.useTransform?"":`left: ${e.item.drag.dragging?e.item.drag.left:e.item.x*e.xPerPx+e.gap}px`)+";\n        width: "+(e.item.resize.resizing?e.item.resize.width:e.item.w*e.xPerPx-2*e.gap-e.item.responsive.valueW*e.xPerPx)+"px;\n        height: "+(e.item.resize.resizing?e.item.resize.height:e.item.h*e.yPerPx-2*e.gap)+"px;\n        z-index: "+(e.item.drag.dragging||e.item.resize.resizing?3:1)+";\n        opacity: "+(e.item.resize.resizing?.5:1))&&T(i,"style",s)},i(t){o||(rt(d,t),o=!0)},o(t){at(d,t),o=!1},d(t){t&&_(i),d&&d.d(t),f&&f.d(),a(c)}}}function Se(t){var e,n;return{c(){T(e=P("div"),"class","svlt-grid-shadow svelte-14tbpr7"),T(e,"style",n=(t.useTransform?`transform: translate(${t.shadow.drag.dragging?t.shadow.drag.left:t.shadow.x*t.xPerPx+t.gap}px, ${t.shadow.drag.dragging?t.shadow.drag.top:t.shadow.y*t.yPerPx+t.gap}px);`:"")+";\n        "+(t.useTransform?"":`top: ${t.shadow.drag.dragging?t.shadow.drag.top:t.shadow.y*t.yPerPx+t.gap}px`)+";\n        "+(t.useTransform?"":`left: ${t.shadow.drag.dragging?t.shadow.drag.left:t.shadow.x*t.xPerPx+t.gap}px`)+";\n    width:"+(t.shadow.w*t.xPerPx-2*t.gap-t.shadow.responsive.valueW*t.xPerPx)+"px;\n    height:"+(t.shadow.h*t.yPerPx-2*t.gap)+"px;")},m(t,n){y(t,e,n)},p(t,i){(t.useTransform||t.shadow||t.xPerPx||t.gap)&&n!==(n=(i.useTransform?`transform: translate(${i.shadow.drag.dragging?i.shadow.drag.left:i.shadow.x*i.xPerPx+i.gap}px, ${i.shadow.drag.dragging?i.shadow.drag.top:i.shadow.y*i.yPerPx+i.gap}px);`:"")+";\n        "+(i.useTransform?"":`top: ${i.shadow.drag.dragging?i.shadow.drag.top:i.shadow.y*i.yPerPx+i.gap}px`)+";\n        "+(i.useTransform?"":`left: ${i.shadow.drag.dragging?i.shadow.drag.left:i.shadow.x*i.xPerPx+i.gap}px`)+";\n    width:"+(i.shadow.w*i.xPerPx-2*i.gap-i.shadow.responsive.valueW*i.xPerPx)+"px;\n    height:"+(i.shadow.h*i.yPerPx-2*i.gap)+"px;")&&T(e,"style",n)},d(t){t&&_(e)}}}function je(t){var e,n,i,r,a=[],s=new Map,o=t.items;const c=t=>t.item.id;for(var l=0;l<o.length;l+=1){let e=Ce(t,o,l),n=c(e);s.set(n,a[l]=Le(n,e))}var d=t.shadow.active&&Se(t);return{c(){for(e=P("div"),l=0;l<a.length;l+=1)a[l].c();n=z(),d&&d.c(),T(e,"class","svlt-grid-container svelte-14tbpr7"),O(e,"height",t.ch+"px"),W(e,"svlt-grid-transition",!t.focuesdItem),r=E(Oe,"resize",xe(t.onResize,300))},m(r,s){for(y(r,e,s),l=0;l<a.length;l+=1)a[l].m(e,null);w(e,n),d&&d.m(e,null),t.div_binding(e),i=!0},p(t,r){const o=r.items;nt(),a=function(t,e,n,i,r,a,s,o,c,l,d,u){let f=t.length,g=a.length,h=f;const m={};for(;h--;)m[t[h].key]=h;const p=[],v=new Map,$=new Map;for(h=g;h--;){const t=u(r,a,h),o=n(t);let c=s.get(o);c?i&&c.p(e,t):(c=l(o,t),c.c()),v.set(o,p[h]=c),o in m&&$.set(o,Math.abs(h-m[o]))}const x=new Set,w=new Set;function y(t){rt(t,1),t.m(o,d),s.set(t.key,t),d=t.first,g--}for(;f&&g;){const e=p[g-1],n=t[f-1],i=e.key,r=n.key;e===n?(d=e.first,f--,g--):v.has(r)?!s.has(i)||x.has(i)?y(e):w.has(r)?f--:$.get(i)>$.get(r)?(w.add(i),y(e)):(x.add(r),f--):(c(n,s),f--)}for(;f--;){const e=t[f];v.has(e.key)||c(e,s)}for(;g;)y(p[g-1]);return p}(a,t,c,1,r,o,s,e,lt,Le,n,Ce),it(),r.shadow.active?d?d.p(t,r):((d=Se(r)).c(),d.m(e,null)):d&&(d.d(1),d=null),i&&!t.ch||O(e,"height",r.ch+"px"),t.focuesdItem&&W(e,"svlt-grid-transition",!r.focuesdItem)},i(t){if(!i){for(var e=0;e<o.length;e+=1)rt(a[e]);i=!0}},o(t){for(l=0;l<a.length;l+=1)at(a[l]);i=!1},d(n){for(n&&_(e),l=0;l<a.length;l+=1)a[l].d();d&&d.d(),t.div_binding(null),r()}}}function Re(t,e,n){let i,r,a,s,o,c,l,d,{useTransform:u=!1,items:f=[],cols:g=0,dragDebounceMs:h=350,gap:m=0,rowHeight:p=150,breakpoints:v,fillEmpty:$=!0}=e,x=p,w=g,y={w:0,h:0,x:0,y:0,active:!1,id:null,responsive:{valueW:0},min:{},max:{}},_=Me(f,x);const b=H(),P=()=>document.documentElement.clientWidth;var k;let z,I,E,T;function M(t){let{pageX:e,pageY:i}=we(t);e-=a.x,i-=a.y;const l=T+i-I,u=E+(e-z),{responsive:{valueW:g}}=r;let h=Math.round(u/s)+g;const{h:m=1,w:p=1}=r.min,{h:v,w:$=c-r.x+g}=r.max;h=Math.min(Math.max(h,p),$);let w=Math.round(l/x);v&&(w=Math.min(w,v)),w=Math.max(w,m),n("shadow",y={...y,w:h,h:w});let _=f[o];f[o]={..._,resize:{resizing:!0,width:u,height:l},w:h,h:w},n("items",f),d||C()}function O(t){t.stopPropagation();let e=f[o];f[o]={...e,resize:{resizing:!1,width:0,height:0}},n("items",f),window.removeEventListener("mousemove",M,!1),window.removeEventListener("touchmove",M,!1),window.removeEventListener("mouseup",O,!1),window.removeEventListener("touchend",O,!1),n("shadow",y={...y,w:0,h:0,x:0,y:0,active:!1,id:null,responsive:{valueW:0},min:{},max:{}}),j(),n("focuesdItem",r=void 0),d=!1}k=()=>{a=i.getBoundingClientRect();let t=_e(v,P(),g,w);c=t,l=document.documentElement.clientWidth,v&&n("items",f=ke(f,t)),n("xPerPx",s=a.width/t),b("mount",{cols:t,xPerPx:s,yPerPx:x})},N().$$.on_mount.push(k);let W=0,A=0;const C=xe(j,h);let D={};function L(t){t.stopPropagation();let{pageX:e,pageY:i}=we(t);const l=i-a.y,d=e-a.x;let u=Math.round((d-W)/s),g=Math.round((l-A)/x);u=Math.max(Math.min(u,c-(r.w-r.responsive.valueW)),0),g=Math.max(g,0);let h=f[o];f[o]={...h,drag:{dragging:!0,top:l-A,left:d-W},x:u,y:g},n("items",f),n("shadow",y={...y,x:u,y:g}),C()}function S(t){window.removeEventListener("mousemove",L,!1),window.removeEventListener("touchmove",L,!1),window.removeEventListener("mouseup",S,!1),window.removeEventListener("touchend",S,!1);let e=f[o];f[o]={...e,drag:{dragging:!1,top:0,left:0}},n("items",f),W=0,A=0,n("shadow",y={...y,w:0,h:0,x:0,y:0,active:!1,id:null}),j(),n("focuesdItem",r=void 0)}function j(t){const e=f[o];let i=_e(v,P(),g,w),r=function(t,e,n,i){let r=Pe(e,[t.id],ye(e),n);const a=function(t,e,n){const{w:i,h:r,x:a,y:s,responsive:{valueW:o}}=n,c=e.slice(s,s+r);let l=[];for(var d=0;d<c.length;d++){let t=c[d].slice(a,a+(i-o));l=[...l,...t.map(t=>t&&t.id).filter(t=>t)]}return[...l.filter((t,e)=>l.indexOf(t)==e)]}(0,r,t);let s=function(t,e){return e.filter(e=>-1!==t.indexOf(e.id))}(a,e);if(s.find(t=>t.static)&&i)return e.map(Te.bind(null,t,i));r=Pe(e,a,ye(e),n);let o=e,c=a,l=[];return s.forEach(t=>{let i=Ie(r,t,o);if(l.push(t.id),i){o=o.map(Ee.bind(null,t,i));let a=c.filter(t=>-1===l.indexOf(t));r=Pe(o,a,ye(e),n)}}),o}(e,f,i,D);$&&r.forEach(t=>{t.id!==e.id&&(r=r.map(e=>e.id===t.id?{...e,...Ie(Pe(r,[t.id],ye(r),i),t,r)}:e))}),n("items",f=r),b("adjust",{focuesdItem:e})}Y(()=>{r||(n("ch",_=Me(f,x)),g!==w&&a&&(n("xPerPx",s=a.width/g),w=g))});let{$$slots:R={},$$scope:F}=e;return t.$set=t=>{"useTransform"in t&&n("useTransform",u=t.useTransform),"items"in t&&n("items",f=t.items),"cols"in t&&n("cols",g=t.cols),"dragDebounceMs"in t&&n("dragDebounceMs",h=t.dragDebounceMs),"gap"in t&&n("gap",m=t.gap),"rowHeight"in t&&n("rowHeight",p=t.rowHeight),"breakpoints"in t&&n("breakpoints",v=t.breakpoints),"fillEmpty"in t&&n("fillEmpty",$=t.fillEmpty),"$$scope"in t&&n("$$scope",F=t.$$scope)},{useTransform:u,items:f,cols:g,dragDebounceMs:h,gap:m,rowHeight:p,breakpoints:v,fillEmpty:$,container:i,focuesdItem:r,xPerPx:s,yPerPx:x,shadow:y,ch:_,onResize:function(){let t=document.documentElement.clientWidth;if(t!==l){l=t,a=i.getBoundingClientRect();let e=_e(v,t,g,w);c=e,n("xPerPx",s=a.width/e),b("resize",{cols:e,xPerPx:s,yPerPx:x}),v&&n("items",f=ke(f,e))}},resizeOnMouseDown:function(t,e){e.stopPropagation();let{pageX:i,pageY:l}=we(e);const{item:u,index:h}=ze(t,f);o=h,n("focuesdItem",r=u),D={...u},d=u.h+u.y===ye(f),n("shadow",y={...y,...r,active:!0}),z=i-a.x,I=l-a.y,E=u.w*s-2*m-r.responsive.valueW*s,T=u.h*x-2*m,c=_e(v,P(),g,w),window.addEventListener("mousemove",M,!1),window.addEventListener("touchmove",M,!1),window.addEventListener("mouseup",O,!1),window.addEventListener("touchend",O,!1)},dragOnMouseDown:function(t,e){e.stopPropagation();let{pageX:i,pageY:s}=we(e);const{item:l,index:d}=ze(t,f);o=d,n("focuesdItem",r=l),D={...l},n("shadow",y={...y,...l,active:!0});let h,m,{currentTarget:p}=e;if(u){const{x:t,y:e}=($=p.style.transform,x=($=$.slice(10,-3)).indexOf("px, "),{x:+$.slice(0,x),y:+$.slice(x+4)});h=t,m=e}else h=p.offsetLeft,m=p.offsetTop;var $,x;i-=a.x,s-=a.y,W=i-h,A=s-m,c=_e(v,P(),g,w),l?(window.addEventListener("mousemove",L,!1),window.addEventListener("touchmove",L,!1),window.addEventListener("mouseup",S,!1),window.addEventListener("touchend",S,!1)):console.warn("Can not get item")},div_binding:function(t){X[t?"unshift":"push"](()=>{n("container",i=t)})},$$slots:R,$$scope:F}}class Ne extends ht{constructor(t){super(),gt(this,t,Re,je,o,["useTransform","items","cols","dragDebounceMs","gap","rowHeight","breakpoints","fillEmpty"])}}function Ye(t){return Math.max(...t.map(t=>t.y+t.h),1)}const He=(t,e)=>Array.from(Array(t),()=>new Array(e));function Fe(t,e,n,i){let r=He(n,i);for(var a=0;a<t.length;a++){const n=t[a],{x:i,y:c,w:l,h:d,id:u,responsive:{valueW:f}}=n;if(-1===e.indexOf(u))for(var s=c;s<c+d;s++){const t=r[s];if(t)for(var o=i;o<i+(l-f);o++)t[o]=n}}return r}function Xe(t,e,n=Ye(t)){let i=He(n,e);return t.forEach((n,r)=>{let a=t.slice(r+1).map(t=>t.id),s=function(t,e,n=[],i){const{w:r}=e;let a=e.responsive.valueW;for(var s=0;s<t.length;s++){const e=t[s];for(var o=0;o<e.length;o++){const t=e.findIndex(t=>void 0===t);if(-1!==t){for(var c=e.slice(t),l=c.length,d=0;d<c.length;d++)if(void 0!==c[d]){l=d;break}return a=Math.max(r-l,0),{y:s,x:t,responsive:{valueW:a}}}}}return a=Math.max(r-i,0),{y:Ye(n),x:0,responsive:{valueW:a}}}(i,n,t,e);t=t.map(t=>t.id===n.id?{...n,...s}:t),i=Fe(t,a,Ye(t),e)}),t}function qe(t,e,n=[]){let i=t[0].length-(e.w-e.responsive.valueW);for(var r=0;r<t.length;r++){const n=t[r];for(var a=0;a<i+1;a++){if(n.slice(a,a+(e.w-e.responsive.valueW)).every(t=>void 0===t)){if(t.slice(r,r+e.h).every(t=>t.slice(a,a+(e.w-e.responsive.valueW)).every(t=>void 0===t)))return{y:r,x:a}}}}return{y:Ye(n),x:0}}function Be(t,e,n){return n.id===t.id?{...t,...e}:n}const Ge=(t,e,n)=>n.id===t.id?e:n;const Je={findSpaceForItem:(t,e,n)=>qe(function(t,e=Ye(t),n){let i=He(e,n);for(var r=0;r<t.length;r++){const e=t[r],{x:n,y:o,w:c,h:l,responsive:{valueW:d}}=e;for(var a=o;a<o+l;a++){const t=i[a];for(var s=n;s<n+(c-d);s++)t[s]=e}}return i}(e,Ye(e),n),t,e),appendItem:(t,e,n)=>function(t,e,n,i){let r=Fe(e,[t.id],Ye(e),n);const a=function(t,e,n){const{w:i,h:r,x:a,y:s,responsive:{valueW:o}}=n,c=e.slice(s,s+r);let l=[];for(var d=0;d<c.length;d++){let t=c[d].slice(a,a+(i-o));l=[...l,...t.map(t=>t&&t.id).filter(t=>t)]}return[...l.filter((t,e)=>l.indexOf(t)==e)]}(0,r,t);let s=function(t,e){return e.filter(e=>-1!==t.indexOf(e.id))}(a,e);if(s.find(t=>t.static)&&i)return e.map(Ge.bind(null,t,i));r=Fe(e,a,Ye(e),n);let o=e,c=a,l=[];return s.forEach(t=>{let i=qe(r,t,o);if(l.push(t.id),i){o=o.map(Be.bind(null,t,i));let a=c.filter(t=>-1===l.indexOf(t));r=Fe(o,a,Ye(e),n)}}),o}(t,[...e,t],n),resizeItems:(t,e,n)=>Xe(t,e,n),item(t){return{drag:{top:null,left:null,dragging:!1},resize:{width:null,height:null,resizing:!1},responsive:{valueW:0},static:!1,resizable:!(e=t).static,draggable:!e.static,min:{...e.min},max:{...e.max},...e};var e}};function Ke(t){var e,n=new $e({props:{ref:t.item.id}});return{c(){n.$$.fragment.c()},m(t,i){dt(n,t,i),e=!0},p(t,e){var i={};t.item&&(i.ref=e.item.id),n.$set(i)},i(t){e||(rt(n.$$.fragment,t),e=!0)},o(t){at(n.$$.fragment,t),e=!1},d(t){ut(n,t)}}}function Qe(t){var e,n,i;function r(e){var i;t.grid_items_binding.call(null,e),n=!0,i=()=>n=!1,B.push(i)}let a={fillEmpty:t.fillEmpty,items:t.items_arr,cols:t.$cols,rowHeight:50,gap:20,$$slots:{default:[Ke,({item:t})=>({item:t})]},$$scope:{ctx:t}};void 0!==t.items_arr&&(a.items=t.items_arr);var s=new Ne({props:a});return X.push(()=>{return e="items",n=r,void(-1!==(t=s).$$.props.indexOf(e)&&(t.$$.bound[e]=n,n(t.$$.ctx[e])));var t,e,n}),s.$on("adjust",t.adjust_handler),s.$on("resize",t.handleWindowResize),s.$on("mount",t.handleWindowResize),{c(){e=P("div"),s.$$.fragment.c(),T(e,"id","gridContainer"),T(e,"class","grid-container svelte-2daa0q")},m(t,n){y(t,e,n),dt(s,e,null),i=!0},p(t,e){var i={};t.fillEmpty&&(i.fillEmpty=e.fillEmpty),t.items_arr&&(i.items=e.items_arr),t.$cols&&(i.cols=e.$cols),t.$$scope&&(i.$$scope={changed:t,ctx:e}),!n&&t.items_arr&&(i.items=e.items_arr),s.$set(i)},i(t){i||(rt(s.$$.fragment,t),i=!0)},o(t){at(s.$$.fragment,t),i=!1},d(t){t&&_(e),ut(s)}}}function Ue(e,n,i){let r,a,s,o=t;d(e,$t,t=>{r=t,i("$_activeDashIndex",r)}),e.$$.on_destroy.push(()=>o());let l=[],u=[];const f=pt(40);d(e,f,t=>{s=t,i("$cols",s)});let g=!1;const h=()=>{const t=document.getElementById("gridContainer").clientWidth,e=Math.round(t/50);return e-e%2},m=t=>{const{w:e,h:n,x:i,y:r}=t;((t,e)=>{try{wt().widgets.get(t).sizeAndPos=e}catch(t){}})(t.id,{w:e,h:n,x:i,y:r})},p=(t,e)=>{let n=[];return t.forEach((t,r)=>{let{w:a,h:s,x:o,y:c}=yt(t).sizeAndPos;a>e?(a=e,i("fillEmpty",g=!0)):i("fillEmpty",g=!1);let l=Je.item({w:a,h:s,x:o,y:c,id:t});o+a>=e&&(l={...l,...Je.findSpaceForItem(l,n,e)}),n=Je.appendItem(l,n,e)}),(t=>{const e=Math.max(...t.map(t=>t.x+t.w)),n=Math.floor((s-e)/2);return t.map(t=>({...t,x:t.x+n}))})(n)};let v;return e.$$.update=(t={$_activeDashIndex:1,$_widgetsCount:1,widgets:1,$cols:1})=>{t.$_activeDashIndex&&(v=vt[r]?vt[r]._widgetsCount:pt(0),o(),o=c(v,t=>{a=t,i("$_widgetsCount",a)}),i("_widgetsCount",v)),(t.$_widgetsCount||t.widgets||t.$_activeDashIndex||t.$cols)&&a!==l.length&&(i("widgets",l=Array.from(vt[r].widgets.keys())),i("items_arr",u=p(l,s)))},{items_arr:u,cols:f,fillEmpty:g,storeWidgetSizeAndPos:m,handleWindowResize:()=>{f.update(h),i("items_arr",u=p(l,s))},_widgetsCount:v,$cols:s,grid_items_binding:function(t){u=t,i("items_arr",u),i("$_widgetsCount",a),i("widgets",l),i("$_activeDashIndex",r),i("$cols",s)},adjust_handler:function(t){return m(t.detail.focuesdItem)}}}class Ve extends ht{constructor(t){super(),gt(this,t,Ue,Qe,o,[])}}function Ze(t){var e,n,i,r,a;return{c(){e=P("img"),n=z(),i=P("div"),(r=P("button")).innerHTML='<h3 class="svelte-hyummf">Sticky</h3> <img src="/images/addIcon.svg" alt="+">',T(e,"class","cancel svelte-hyummf"),T(e,"src","/images/cancelIcon.svg"),T(e,"alt","x"),T(r,"class","svelte-hyummf"),T(i,"class","menu svelte-hyummf"),a=E(r,"click",t.click_handler)},m(t,a){y(t,e,a),y(t,n,a),y(t,i,a),w(i,r)},d(t){t&&(_(e),_(n),_(i)),a()}}}function tn(t){var e,n,i,r,a,s,o,c=new Ct({props:{active:t.trashActive}});c.$on("trash",t.toggleTrash),c.$on("trash",t.trash_handler);var l=t.menuIsOpen&&Ze(t),d=new St({props:{active:t.menuIsOpen}});return d.$on("add",t.menu.toggle),{c(){e=P("div"),n=P("nav"),c.$$.fragment.c(),i=z(),l&&l.c(),r=z(),(a=P("h2")).textContent="Widgets",s=z(),d.$$.fragment.c(),T(a,"class","svelte-hyummf"),T(n,"class","svelte-hyummf"),T(e,"class","menuArea svelte-hyummf")},m(t,u){y(t,e,u),w(e,n),dt(c,n,null),w(n,i),l&&l.m(n,null),w(n,r),w(n,a),w(n,s),dt(d,n,null),o=!0},p(t,e){var i={};t.trashActive&&(i.active=e.trashActive),c.$set(i),e.menuIsOpen?l||((l=Ze(e)).c(),l.m(n,r)):l&&(l.d(1),l=null);var a={};t.menuIsOpen&&(a.active=e.menuIsOpen),d.$set(a)},i(t){o||(rt(c.$$.fragment,t),rt(d.$$.fragment,t),o=!0)},o(t){at(c.$$.fragment,t),at(d.$$.fragment,t),o=!1},d(t){t&&_(e),ut(c),l&&l.d(),ut(d)}}}function en(t,e,n){let i=!1;const r=new jt(t=>{const e=i=t;return n("menuIsOpen",i),e});let a=!1;const s=t=>{bt(t)};return{menuIsOpen:i,menu:r,trashActive:a,toggleTrash:()=>{n("trashActive",a=!a)},add:s,trash_handler:function(e){!function(t,e){const n=t.$$.callbacks[e.type];n&&n.slice().forEach(t=>t(e))}(t,e)},click_handler:function(){return s("Sticky")}}}class nn extends ht{constructor(t){super(),gt(this,t,en,tn,o,[])}}function rn(t){var e,n,i,r,a,s=new Zt({}),o=new Ve({}),c=new nn({});return c.$on("trash",t.activateTrash),{c(){e=P("main"),s.$$.fragment.c(),n=z(),o.$$.fragment.c(),i=z(),c.$$.fragment.c(),T(e,"class",r=f(t.trashActive?"trash":"")+" svelte-1y72nzg")},m(t,r){y(t,e,r),dt(s,e,null),w(e,n),dt(o,e,null),w(e,i),dt(c,e,null),a=!0},p(t,n){a&&!t.trashActive||r===(r=f(n.trashActive?"trash":"")+" svelte-1y72nzg")||T(e,"class",r)},i(t){a||(rt(s.$$.fragment,t),rt(o.$$.fragment,t),rt(c.$$.fragment,t),a=!0)},o(t){at(s.$$.fragment,t),at(o.$$.fragment,t),at(c.$$.fragment,t),a=!1},d(t){t&&_(e),ut(s),ut(o),ut(c)}}}function an(t,e,n){let i=!1;return{trashActive:i,activateTrash:t=>{n("trashActive",i=t.detail.active)}}}return new class extends ht{constructor(t){super(),gt(this,t,an,rn,o,[])}}({target:document.body,props:{name:"world"}})}();
//# sourceMappingURL=bundle.js.map
